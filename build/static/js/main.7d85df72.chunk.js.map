{"version":3,"sources":["../node_modules/cloudinary/lib-es5/utils sync","contants/index.js","helpers/media/index.js","redux/actions/authActions.js","redux/actions/callActions.js","redux/actions/chatActions.js","redux/actions/commentActions.js","redux/actions/createRoomChatActions.js","redux/actions/friendRequestActions.js","redux/actions/globalActions.js","redux/actions/messageActions.js","redux/actions/networkActions.js","redux/actions/notifycationActions.js","redux/actions/peerActions.js","redux/actions/postActions.js","redux/actions/profileActions.js","helpers/formatTime.js","hooks/useFormatTime.js","components/statusActive/StatusActive.jsx","config/cloudinary.js","helpers/image.js","hooks/useCheckOnline.js","components/avatar/Avatar.jsx","components/modalCreateCall/ModalCreateCall.jsx","components/MessagePretty/MessagePretty.jsx","components/modalInviteCall/ModalInviteCall.jsx","helpers/index.js","config/axiosInstance .js","api/fetchData.js","components/modalCall/CardFriend.jsx","components/modalCall/InviteFriend.jsx","components/modalCall/NavModalCall.jsx","components/modalCall/ModalCall.jsx","api/authApi.js","components/displayimg/DisplayImg.jsx","components/chooseImage/ChooseImage.jsx","components/modal/ModalChooseImage.jsx","components/conversation/Conversation.jsx","components/ModalCreateRoomChat/ModalCreateRoomChat.jsx","pages/messenger/Call.jsx","pages/messenger/DisplayImageMessage.jsx","pages/messenger/CreateMessage.jsx","pages/messenger/DisplayMessageContent.jsx","pages/messenger/DisplayMessage.jsx","pages/messenger/Typing.jsx","pages/messenger/ChatRoom.jsx","pages/messenger/OptionsMessage.jsx","pages/messenger/Messenger.jsx","components/topbar/IconMessage.jsx","components/notification/NotificationAction.jsx","components/notification/DisplayNotification.jsx","helpers/debounceFunction.js","components/notification/MenuNotifycation.jsx","components/notification/Notification.jsx","components/topbar/IconNotifycation.jsx","components/friendRequest/ButtonActionsFriendRequest.jsx","components/friendRequest/FriendRequest.jsx","components/friendRequest/DisplayFriendRequest.jsx","components/topbar/BoxFriendRequests.jsx","components/topbar/IconPerson.jsx","components/topbar/SeachUser.jsx","components/topbar/Topbar.jsx","components/UpdateImage/UpdateImage.jsx","components/buttonSocials/ButtonSocials.jsx","pages/profile/ProfileLeft.jsx","pages/profile/EditProfile.jsx","pages/profile/DisplayDetailInfo.jsx","pages/profile/AboutProfile.jsx","components/Carousel/Carousel.jsx","pages/profile/DisplayFriendList.jsx","pages/profile/NavProfile.jsx","pages/profile/ButtonFollow.jsx","components/modal/ModalConfirmDelete.jsx","pages/profile/ButtonFriend.jsx","pages/profile/ButtonMessage.jsx","pages/profile/ProfileButtonActions.jsx","pages/profile/ProfileRight.jsx","components/ShowError/ShowError.jsx","helpers/createKeyUser.js","pages/register/Register.jsx","pages/notFound/NotFound.jsx","components/userSuggestion/UserSuggestion.jsx","components/sidebar/Sidebar.jsx","components/comment/CommentCrud.jsx","components/comment/CommentInfo.jsx","components/commentReply/CommentReply.jsx","components/form/createComment/CreateComment.jsx","components/comment/Comment.jsx","components/modal/ModalEditPost.jsx","components/post/CrudPost.jsx","components/post/Post.jsx","components/share/Share.jsx","components/feed/GetMorePost.jsx","components/feed/Feed.jsx","components/friend/Friend.jsx","components/rightbar/Rightbar.jsx","components/Layout/ProtectLayOut/index.jsx","pages/post/PostPage.jsx","routes/index.js","pages/login/Login.jsx","pages/home/Home.jsx","pages/profile/Profile.jsx","App.js","redux/reducers/authReducer.js","redux/reducers/callReducer.js","redux/reducers/chatReducer.js","redux/reducers/commentReducer.js","redux/reducers/createRoomChatReducer.js","redux/reducers/friendRequestReducer.js","redux/reducers/globalReducer.js","redux/reducers/messageReducer.js","redux/reducers/networkReducer.js","redux/reducers/notifycationReducer.js","redux/reducers/peerReducer.js","redux/reducers/postReducer.js","redux/reducers/profileReducer.js","redux/reducers/index.js","redux/store.js","components/GlobalStyles/index.jsx","index.js"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","ACCESS_TOKEN","REFRESH_TOKEN","URL_BE","PUBLIC_FOLDER","SOCKET_SERVER","addClass","nameClass","element","split","forEach","el","classList","add","replaceClass","class1","class2","contains","replace","openStream","isVideo","config","video","audio","navigator","mediaDevices","getUserMedia","findStream","streamId","Array","from","document","querySelectorAll","find","getAttribute","addVideoStream","stream","isYou","divEl","createElement","imgEl","style","display","setAttribute","iEl","srcObject","addEventListener","play","onclick","videoPinCurent","querySelector","remove","iconVideoPin","target","append","handleUpdateUserCamera","data","img","videoEl","pause","src","LOGIN_SUCCESS","LOGIN_FAILED","LOADING_START","LOADING_END","UPDATE_USER","UN_FOLLOW","FOLLOW","UPDATE_BACKGROUND_USER","UPDATE_AVATAR_USER","ADD_FRIEND","REMOVE_FRIEND","USER_LOGOUT","SET_CALL","END_CALL","SET_IS_ANSWER","SET_FRIEND_INVITES","REFUSE_INVITE","SET_ACCEPT_INVITE","SET_USER_STREAM","SET_IS_COMPLETE","UPDATE_CONVERSATION","UPDATE_LAST_MESSAGE","UPDATE_STATUS_CONVERSATION","SET_STATUS_CONVERSATION","SET_CHAT","SET_LIST_CONVERSATION","SET_CONVERSATION_CHAT","SET_IS_SHOW","UPDATE_CONVERSATION_DISPLAYS","UPDATE_FRIEND_CHAT","ADD_CONVERSATION","SET_NUMBER_UNREAD","INCREASE_NUMBER_UNREAD","DECREASE_NUMBER_UNREAD","UPDATE_READ_CONVERSATION","SET_NEW_CONVERSATION_CHAT","UPDATE_ID_COMMENT","SET_CREATE_ROOM","ADD_FRIEND_TO_ROOM","REMOVE_FRIEND_TO_ROOM","SET_LIST_FRIEND","RESET_CREATE_ROOM","SET_TYPE","SET_LIST_FRIEND_REQUEST","ADD_LIST_FRIEND_REQUEST","REMOVE_FRIEND_REQUEST","INCREASE_NUMBER_FRIEND_REQUEST","SET_NUMBER_FRIEND_REQUEST","SET_ELEMENT_CLICK","SET_FILES","ADD_FILE","REMOVE_FILE","SET_SOCKET","SET_USERS_ONLINE","ADD_USER_ONLINE","REMOVE_USER_OFFLINE","RESET_NETWORK","SET_LIST_NOTIFICATION","ADD_NOTIFICATION","SET_NUMBER_NOTIFICATION_UNREAD","INCREASE_NUMBER_NOTIFICATION_UNREAD","DECREASE_NUMBER_NOTIFICATION_UNREAD","SET_SHOW_NOTIFICATION","REMOVE_NOTIFICATION","SET_TYPE_NOTIFICATION","SET_NOTIFICATIONs_DISPLAY","REMOVE_ALL_NOTIFICATION","UPDATE_LIST_CONVERSATION","ADD_NOTIFICATION_DISPLAY","SET_SHOW_NOTIFICATION_MENU","SET_PEER","UPDATE_INFO_GET_POST","LOADING_POST_END","SET_STATUS_FRIEND","SET_USER_PROFILE","SET_IS_ME","value","slice","timeFormat","format","idx","indexOf","useFormatTime","user","useMemo","lastLogin","formatTime","StatusActive","isOnline","time","padding","className","cloudinary","require","cloud_name","api_key","api_secret","imageUpload","images","Promise","all","map","image","formData","FormData","camera","url","axios","post","responses","public_id","removeImage","uploader","destroy","error","err","useCheckOnline","isLog","useState","setIsOnline","usersOnline","useSelector","state","network","userCurrent","auth","useEffect","_id","length","includes","Avatar","isStatus","width","height","link","isShowOffline","status","setStatus","friends","profilePicture","displayAvatar","to","alt","ModalCreateCall","socket","call","userSendCall","isSenderCall","isAnswer","roomCallId","conversationId","peer","dispatch","useDispatch","handleAnswer","type","payload","emit","userReceiveCall","peerId","isCreate","userName","console","log","onClick","userRefuseId","receiverId","MessagePretty","mess","ModalInviteCall","countTime","setCountTime","handleRefuseInvite","handleCountTime","prev","timer","setTimeout","clearTimeout","handleJoinCall","isEmail","email","test","checkExit","array","checkMinLength","val","key","addElment","callback","getLocalStorage","localStorage","getItem","JSON","parse","setLocalStorage","setItem","stringify","instance","create","baseURL","isTimeExpire","token","date","Date","jwt_decode","exp","getTime","refreshTokenRequest","handleRefreshToken","refreshToken","response","interceptors","request","use","accessToken","newAccessToken","headers","reject","message","toast","autoClose","getDataAPI","axiosInstance","get","res","postDataAPI","putDataAPI","put","patchDataAPI","patch","deleteDataAPI","delete","CardFriend","friend","isDisable","setIsDisable","timeRemaining","useRef","current","friendId","info","sender","InviteFriend","userCall","fristLoadFriends","friendInvites","isMount","handleFetchFriends","filter","settings","dots","infinite","speed","slidesToShow","slidesToScroll","body","NavModalCall","CallModal","hours","setHours","mins","setMins","second","setSecond","total","setTotal","isMic","setIsMic","isOpenVideo","setOpenVideo","userReciverCall","userStream","parseInt","on","answer","remoteStream","removeListener","timerId","setInterval","clearInterval","handleSendStream","off","handleUserCallOut","handleNotify","isClose","userCallId","userSendCallId","toogleStream","track","getTracks","kind","enabled","toString","stop","userOutCallId","defaults","login","userInfo","navigate","success","register","Displayimg","file","setImages","setFiles","URL","createObjectURL","item","uuid","Cancel","ChooseImage","setIsTakePhoto","isTakePhoto","files","multiple","videoRef","canvasRef","videoStream","setVideoStream","useFrontCamera","setUseFrontCamera","notify","setNotify","isStop","setIsStop","constraints","min","ideal","max","stopVideoStream","init","facingMode","videoWidth","videoHeight","getContext","drawImage","toDataURL","uuidv4","ref","htmlFor","PermMedia","htmlColor","accept","onChange","ModalChooseImage","text","typeImage","onSave","tabIndex","role","Conversation","conversation","reads","members","isMultiple","name","listMembers","nameConversation","setMessage","isRead","setIsRead","lastMessage","setLastMessage","chat","lastMessageConversation","statusConversations","handeGetInfoMembers","listMemberIds","memberId","handleSetImgConversation","listImages","ids","i","check","idxRamdom","Math","floor","random","push","member","isNotify","senderId","handleGetName","ModalCreateRoomChat","setFile","nameRef","descRef","createRoomChat","friendAdds","handleCloseModal","handleSubmit","desc","placeholder","required","Call","friendChat","conversationChat","isCall","roomCall","isNext","userJoinCallId","userSenderCall","DisplayImageMessage","CreateMessage","createNewMessage","isTyping","setIsTyping","messageRef","focus","onSubmit","preventDefault","onBlur","DisplayMessageContent","setUser","userSend","DisplayMessage","updateConversation","messages","setMessages","scrollIntoView","behavior","block","inline","removeMessage","newLastMessage","newMessage","receverId","moment","createdAt","isDeleted","Typing","ChatRoom","hasTyping","setHasTyping","handleSetTyping","updateListMessage","updateFriendConversation","userDisconnectId","getMessages","handleReceiveMessage","messageCreate","receivers","substring","OptionsMessage","number","setNumber","listConversation","numberSet","reduce","prevState","Messenger","conversationDisplays","setConversationDisplays","isShowConversationPending","getConversations","conversations","userId","handleChosseCurrentChat","dataUpdate","isChangeType","Object","entries","IconMessage","isChat","conversationUnReads","elClick","global","updateNumberConversationUnRead","Chat","NotificationAction","notification","handleRemoveNotification","handleUnReadNotification","newNotification","readNotification","DisplayNotifycation","useNavigate","fetchUser","updateReadNotification","timeago","debounce","delay","rest","MenuNotifycation","isShowMenu","listNotifycation","setNotifications","removeAllNotification","readAllNotification","notifications","Notification","notificationDisplays","updateListNotification","animation","animationFillMode","DisplayNotification","IconNotification","isShow","notifyRef","updateNumberNotification","getConversation","getNumberNotificationNotRead","Notifications","cursor","ButtonActionsFriendRequest","friendRequest","acceptFriendRequest","friendRequestId","refuseFriendRequest","deleteFriendRequest","sendToFriendRequest","responseCreateNotification","FriendRequest","handleGetUser","DisplayFriendRequest","listFriendRequest","getFriendRequest","friendRequests","BoxFriendRequests","IconPerson","isShowFriendRequests","setIsShowFriendRequests","numberFriendRequest","divRef","Person","SeachUser","usersSearch","setUsersSearch","isShowUsersSearch","setIsShowUsersSearch","searchInputRef","searchRef","handleSearchUsers","users","Search","onFocus","Topbar","setFirstShowNotification","getNumberFriendRequest","updateNumberFriendRequest","handleUpdateNotification","getNumberConversationUnWatch","textDecoration","IconNotifycation","removeItem","UpdateImage","ButtonSocials","ProfileLeft","idAvatar","userProfile","profile","followers","followings","EditProfile","onEdit","phoneRef","addressRef","relationshipRef","updateUser","phone","address","relationship","userUpdate","defaultValue","disabled","selected","DisplayDetailInfo","AboutProfile","isEditInfo","setIsEditInfo","Carousel","children","setup","lazyLoad","responsive","breakpoint","initialSlide","DisplayFriendList","friendList","setFriendList","NavProfile","option","setOption","toUpperCase","ButtonFollow","followed","setFollowed","handleClick","ModalConfirmDelete","onRemove","ButtonFriend","setFriendRequest","statusFriend","setStatusFriend","isFriend","idModalRemoveFriendRequest","idModal","addListFriend","removeListFriend","updateStatus","handleCheckStatusFriend","friendRequestDb","handleSetStatusFriend","createFriendRequest","removeFriendRequest","unFriend","ButtonMessage","isClick","setIsClick","handleSetConversationChat","ProfileButtonAction","isMe","ProfileRight","ProfileButtonActions","ShowError","generateKeywords","displayName","word","flagArray","result","stringArray","findPermutation","k","join","keywords","acc","cur","words","arrName","curName","letter","createKeywords","initValue","password","passwordAgain","Register","infoRegister","setInfoRegister","errors","setErrors","isLoading","isFirst","handleChangeInput","isValid","newErrors","warn","minLength","maxLength","CircularProgress","color","justifyContent","NotFound","UserSuggestion","Sidebar","usersSuggestion","setUsersSuggestion","getUsersSuggestion","RssFeed","PlayCircleFilledOutlined","Group","Bookmark","HelpOutline","WorkOutline","Event","School","CommentCrud","setIsEdit","CommentInfo","comment","isEdit","setText","handleReset","updateComment","newImages","imagesRemove","newImage","responseImages","newComment","postId","userPost","autoFocus","DisplayImg","CommentReply","commentReply","setCommentsReply","like","setLike","isCrudComment","setIsCrudComment","isLiked","setIsLiked","likes","handleCheckClick","removeEventListener","likeHandler","handleRemoveCommnetReply","onRemoveComment","CreateComment","onCreateComment","commentRef","Comment","setComments","isShowCommentsReply","setIsShowCommentsReply","commentsReply","idComment","idCreateComment","handleGetCommentReply","comments","handleCreateCommentReply","commentInfo","commentReplyId","handleRemoveComment","commentId","commentPost","newIdComment","ModalEditPost","setPosts","setDesc","updatePost","newPost","userFollowings","handleClose","Modal","show","onHide","Header","closeButton","Title","Body","row","Footer","Button","variant","CrudPost","Post","isShowComment","setIsShowComment","isCrudPost","setIsCrudPost","idPostOpen","getComments","handleUpdateLikePost","handleUpdateCmtPost","handleCreateComment","handleRemovePost","newIdPostOpen","Share","shareing","setShearing","handleCreatePost","userFollowingId","dataEmit","border","outline","backgroundColor","Label","Room","EmojiEmotions","GetMorePost","postsLength","limit","observer","IntersectionObserver","entry","isIntersecting","skip","isLoadingPost","observe","unobserve","Feed","posts","isMaxPost","handleUpdateFeed","postFeed","fetchPosts","newPosts","p","Friend","Rightbar","updateFriendList","online","friendsUpdateStatus","HomeRightbar","ProfileRightbar","Remove","Add","city","relationships","ProtectLayOut","isLogin","setIslogin","PostPage","useParams","setPost","fetchPost","publicRoutes","path","component","layout","userNameRef","passwordRef","size","privateRoutes","idBgc","handleUpload","dataImage","backgroundImage","coverPicture","App","firstConnect","firstGetData","window","handleConnectCall","Peer","undefined","host","port","addUserOnline","userLoginId","removeUserOffline","handleSetUserOnline","allUser","usersFollowOnline","followingiD","io","route","Layout","Fragment","Page","ModalCall","initialState","authReducer","action","idUserFollow","isComplete","networkReducer","chatReducer","newInfo","conversationAccepts","isExit","conversationPendings","commentReducer","createRoomChatReducer","friendRequestReducer","peerReducer","postReducer","rootReducer","globalReducer","messageReducer","notifycationReducer","profileReducer","callReducer","composeEnhancers","composeWithDevTools","applyMiddleware","thunk","createStore","GlobalStyles","ReactDOM","render","store","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.7d85df72.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 605;","const ACCESS_TOKEN = 'access_token';\r\nconst REFRESH_TOKEN = 'refresh_token';\r\n\r\nconst URL_BE = 'https://codernoob-be.onrender.com/'\r\nconst PUBLIC_FOLDER = URL_BE + 'images/'\r\nconst SOCKET_SERVER = 'https://codernoob-sv-socket.onrender.com'\r\n\r\nconst CLOUD_NAME = 'ko-c'\r\nconst API_KEY = '859769854664576'\r\nconst API_SECRET = '4IajgOMmiGtm4j3D-kz7AhqyiCw'\r\n\r\n\r\nexport { ACCESS_TOKEN, REFRESH_TOKEN, URL_BE, PUBLIC_FOLDER, SOCKET_SERVER, CLOUD_NAME, API_KEY, API_SECRET };\r\n\r\n","import { v4 as uuidv4 } from \"uuid\";\r\n\r\nexport const addClass = (nameClass, element) => {\r\n  const array = nameClass.split(\" \");\r\n\r\n  array.forEach((el) => {\r\n    element.classList.add(el);\r\n  });\r\n};\r\n\r\nexport const replaceClass = (class1, class2, el) => {\r\n  if (el.classList.contains(class1)) {\r\n    el.classList.replace(class1, class2);\r\n  } else {\r\n    el.classList.replace(class2, class1);\r\n  }\r\n};\r\n\r\nexport const openStream = (isVideo) => {\r\n  const config = {\r\n    video: isVideo,\r\n    audio: true,\r\n  };\r\n\r\n  return navigator.mediaDevices.getUserMedia(config);\r\n};\r\n\r\nexport const findStream = (streamId) => {\r\n  const listVideoContainer = Array.from(document.querySelectorAll(`.video`));\r\n\r\n  return listVideoContainer.find(\r\n    (el) => el.getAttribute(\"streamId\") === streamId\r\n  );\r\n};\r\n\r\nexport const addVideoStream = (stream, isYou = false) => {\r\n  if (!stream) return;\r\n\r\n  const divStream = findStream(stream.id);\r\n\r\n  if (divStream) return;\r\n\r\n  const divEl = document.createElement(\"div\");\r\n  const imgEl = document.createElement(\"img\");\r\n  imgEl.style.display = \"none\";\r\n  divEl.setAttribute(\"streamId\", stream?.id);\r\n  const iEl = document.createElement(\"i\");\r\n  addClass(\"fa-solid fa-thumbtack icon_video\", iEl);\r\n  divEl.classList.add(\"video\");\r\n\r\n  if (isYou) {\r\n    divEl.classList.add(\"you_video\");\r\n  }\r\n\r\n  const video = document.createElement(\"video\");\r\n  video.srcObject = stream;\r\n  video.addEventListener(\"loadedmetadata\", () => {\r\n    video.play();\r\n  });\r\n\r\n  iEl.onclick = (e) => {\r\n    const videoPinCurent = document.querySelector(\".video.pin\");\r\n\r\n    if (iEl.classList.contains(\"fa-thumbtack\")) {\r\n      if (videoPinCurent) {\r\n        videoPinCurent.classList.remove(\"pin\");\r\n        const iconVideoPin = videoPinCurent.querySelector(\".icon_video\");\r\n        replaceClass(\"fa-thumbtack\", \"fa-circle-xmark\", iconVideoPin);\r\n      }\r\n      divEl.classList.add(\"pin\");\r\n    } else {\r\n      divEl.classList.remove(\"pin\");\r\n    }\r\n    replaceClass(\"fa-thumbtack\", \"fa-circle-xmark\", e.target);\r\n  };\r\n\r\n  divEl.append(video);\r\n  divEl.append(imgEl);\r\n  divEl.append(iEl);\r\n\r\n  document.querySelector(\".video-joins\").append(divEl);\r\n};\r\n\r\nexport const playStream = (video, stream) => {\r\n  if (!video) return;\r\n  video.srcObject = stream;\r\n  video.play();\r\n  if (!video.uuid) {\r\n    video.uuid = uuidv4();\r\n  }\r\n};\r\n\r\nexport const handleUpdateUserCamera = (data) => {\r\n  const { img, streamId } = data;\r\n  const divEl = findStream(streamId);\r\n\r\n  if (divEl) {\r\n    const videoEl = divEl.querySelector(\"video\");\r\n    const imgEl = divEl.querySelector(\"img\");\r\n\r\n    if (videoEl && imgEl) {\r\n      if (img) {\r\n        videoEl.style.display = \"none\";\r\n        videoEl.pause();\r\n        imgEl.src = img;\r\n        imgEl.style.display = \"block\";\r\n      } else {\r\n        videoEl.style.display = \"block\";\r\n        videoEl.play();\r\n        imgEl.src = \"\";\r\n        imgEl.style.display = \"none\";\r\n      }\r\n    }\r\n  }\r\n};\r\n","// auth\r\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\r\nexport const LOGIN_START = \"LOGIN_START\";\r\nexport const LOGIN_FAILED = \"LOGIN_FAILED\";\r\n\r\n\r\nexport const LOADING_START = \"LOADING_START\";\r\nexport const LOADING_END = \"LOADING_END\";\r\n\r\n// user\r\nexport const UPDATE_USER = \"UPDATE_USER\";\r\nexport const UN_FOLLOW = \"UN_FOLLOW\";\r\nexport const FOLLOW = \"FOLLOW\";\r\nexport const UPDATE_BACKGROUND_USER = \"UPDATE_BACKGROUND_USER\";\r\nexport const UPDATE_AVATAR_USER = \"UPDATE_AVATAR_USER\";\r\nexport const ADD_FRIEND = \"ADD_FRIEND\";\r\nexport const REMOVE_FRIEND = \"REMOVE_FRIEND\";\r\nexport const USER_LOGOUT = \"USER_LOGOUT\";\r\n","export const SET_CALL = \"SET_CALL\";\r\nexport const END_CALL = \"END_CALL\";\r\nexport const SET_IS_ANSWER = \"SET_IS_ANSWER\";\r\nexport const SET_IS_MIC = \"SET_IS_MIC\";\r\nexport const SET_FRIEND_INVITES = \"SET_FRIEND_INVITES\";\r\nexport const SET_INFO_INVITE = \"SET_INFO_INVITE\";\r\nexport const SET_IS_INVITED = \"SET_IS_INVITED\";\r\nexport const REFUSE_INVITE = \"REFUSE_INVITE\";\r\nexport const SET_ACCEPT_INVITE = \"SET_ACCEPT_INVITE\";\r\nexport const SET_USER_STREAM = \"SET_USER_STREAM\";\r\nexport const SET_IS_COMPLETE = \"SET_IS_COMPLETE\";\r\nexport const UPDATE_CONVERSATION = \"UPDATE_CONVERSATION\";\r\n","//chat\r\nexport const UPDATE_LAST_MESSAGE = \"UPDATE_LAST_MESSAGE\";\r\nexport const UPDATE_STATUS_CONVERSATION = \"UPDATE_STATUS_CONVERSATION\";\r\nexport const SET_STATUS_CONVERSATION = \"SET_STATUS_CONVERSATION\";\r\nexport const SET_CHAT = \"SET_CHAT\";\r\nexport const SET_LIST_CONVERSATION = \"SET_LIST_CONVERSATION\";\r\nexport const ADD_STATUS_CONVERSATION = \"ADD_STATUS_CONVERSATION\";\r\nexport const SET_CONVERSATION_CHAT = \"SET_CONVERSATION_CHAT\";\r\nexport const SET_IS_SHOW = \"SET_IS_SHOW\";\r\nexport const DISPLAY_CONVERSATION_ACCEPTS = \"DISPLAY_CONVERSATION_ACCEPTS\";\r\nexport const UPDATE_CONVERSATION_DISPLAYS = \"UPDATE_CONVERSATION_DISPLAYS\";\r\nexport const UPDATE_FRIEND_CHAT = \"UPDATE_FRIEND_CHAT\";\r\n\r\nexport const ADD_CONVERSATION_ACCEPTS = \"ADD_CONVERSATION_ACCEPTS\";\r\nexport const ADD_CONVERSATION_PENDINGS = \"ADD_CONVERSATION_PENDINGS\";\r\nexport const ADD_CONVERSATION = \"ADD_CONVERSATION\";\r\n\r\nexport const SET_NUMBER_UNREAD = \"SET_NUMBER_UNREAD\";\r\nexport const INCREASE_NUMBER_UNREAD = \"INCREASE_NUMBER_UNREAD\";\r\nexport const DECREASE_NUMBER_UNREAD = \"DECREASE_NUMBER_UNREAD\";\r\n\r\nexport const UPDATE_READ_CONVERSATION = \"UPDATE_READ_CONVERSATION\";\r\nexport const SET_NEW_CONVERSATION_CHAT = \"SET_NEW_CONVERSATION_CHAT\";\r\n","export const UPDATE_ID_COMMENT = \"UPDATE_ID_COMMENT\";\r\n","export const SET_CREATE_ROOM = \"SET_CREATE_ROOM\";\r\nexport const ADD_FRIEND_TO_ROOM = \"ADD_FRIEND_TO_ROOM\";\r\nexport const REMOVE_FRIEND_TO_ROOM = \"REMOVE_FRIEND_TO_ROOM\";\r\nexport const SET_LIST_FRIEND = \"SET_LIST_FRIEND\";\r\nexport const RESET_CREATE_ROOM = \"RESET_CREATE_ROOM\";\r\n","//Friend Request\r\nexport const SET_TYPE = \"SET_TYPE\";\r\nexport const SET_LIST_FRIEND_REQUEST = \"SET_LIST_FRIEND_REQUEST\";\r\nexport const ADD_LIST_FRIEND_REQUEST = \"ADD_LIST_FRIEND_REQUEST\";\r\nexport const REMOVE_FRIEND_REQUEST = \"REMOVE_FRIEND_REQUEST\";\r\nexport const INCREASE_NUMBER_FRIEND_REQUEST = \"INCREASE_NUMBER_FRIEND_REQUEST\";\r\nexport const SET_NUMBER_FRIEND_REQUEST = \"SET_NUMBER_FRIEND_REQUEST\";\r\n","export const SET_ELEMENT_CLICK = \"SET_ELEMENT_CLICK\";\r\n","//message\r\nexport const SET_FILES = \"SET_FILES\";\r\nexport const ADD_FILE = \"ADD_FILE\";\r\nexport const REMOVE_FILE = \"REMOVE_FILE\";\r\n","//network\r\nexport const SET_SOCKET = \"SET_SOCKET\";\r\nexport const SET_USERS_ONLINE = \"SET_USERS_ONLINE\";\r\nexport const ADD_USER_ONLINE = \"ADD_USER_ONLINE\";\r\nexport const REMOVE_USER_OFFLINE = \"REMOVE_USER_OFFLINE\";\r\nexport const RESET_NETWORK = \"RESET_NETWORK\";\r\n","//chat\r\nexport const SET_LIST_NOTIFICATION = \"SET_LIST_NOTIFICATION\";\r\nexport const ADD_NOTIFICATION = \"ADD_NOTIFICATION\";\r\nexport const SET_NUMBER_NOTIFICATION_UNREAD = \"SET_NUMBER_NOTIFICATION_UNREAD\";\r\nexport const INCREASE_NUMBER_NOTIFICATION_UNREAD =\r\n  \"INCREASE_NUMBER_NOTIFICATION_UNREAD\";\r\nexport const DECREASE_NUMBER_NOTIFICATION_UNREAD =\r\n  \"DECREASE_NUMBER_NOTIFICATION_UNREAD\";\r\nexport const SET_SHOW_NOTIFICATION = \"SET_SHOW_NOTIFICATION\";\r\nexport const REMOVE_NOTIFICATION = \"REMOVE_NOTIFICATION\";\r\nexport const SET_TYPE_NOTIFICATION = \"SET_TYPE_NOTIFICATION\";\r\nexport const SET_NOTIFICATIONs_DISPLAY = \"SET_NOTIFICATIONs_DISPLAY\";\r\nexport const REMOVE_ALL_NOTIFICATION = \"REMOVE_ALL_NOTIFICATION\";\r\nexport const UPDATE_LIST_CONVERSATION = \"UPDATE_LIST_CONVERSATION\";\r\nexport const ADD_NOTIFICATION_DISPLAY = \"ADD_NOTIFICATION_DISPLAY\";\r\nexport const SET_SHOW_NOTIFICATION_MENU = \"SET_SHOW_NOTIFICATION_MENU\";\r\n","export const SET_PEER = \"SET_PEER\";\r\n","//message\r\nexport const UPDATE_INFO_GET_POST = \"UPDATE_INFO_GET_POST\";\r\nexport const LOADING_POST_END = \"LOADING_POST_END\";\r\n","export const SET_STATUS_FRIEND = \"SET_STATUS_FRIEND\";\r\nexport const SET_USER_PROFILE = \"SET_USER_PROFILE\";\r\nexport const SET_IS_ME = \"SET_IS_ME\";\r\n\r\n","import { format } from \"timeago.js\";\r\n\r\nexport default function (value, slice) {\r\n  const time = format(value);\r\n  let timeFormat = time.replace(\"seconds\", \"giây\");\r\n  timeFormat = timeFormat.replace(\"minutes\", \"phút\");\r\n  timeFormat = timeFormat.replace(\"hours\", \"giờ\");\r\n  timeFormat = timeFormat.replace(\"days\", \"ngày\");\r\n  const idx = timeFormat.indexOf(\" ago\");\r\n  return slice ? timeFormat.slice(0, idx) : timeFormat;\r\n}\r\n","import { useMemo } from \"react\";\r\nimport formatTime from \"../helpers/formatTime\";\r\n\r\nconst useFormatTime = (user, slice = true) => {\r\n  const time = useMemo(() => {\r\n    if (user?.lastLogin) return formatTime(user.lastLogin, slice);\r\n  }, [user]);\r\n\r\n  return time;\r\n};\r\n\r\nexport default useFormatTime;\r\n","import React from \"react\";\r\nimport \"./statusActive.scss\";\r\n\r\nconst StatusActive = ({ isOnline, time, padding }) => {\r\n  return (\r\n    <span\r\n      className={`active ${isOnline ? \"online\" : \"offline\"}`}\r\n      style={{ padding: padding }}\r\n    >\r\n      {!isOnline && time}\r\n    </span>\r\n  );\r\n};\r\n\r\nexport default StatusActive;\r\n","import { API_KEY, API_SECRET, CLOUD_NAME } from \"../contants\";\r\n\r\nconst cloudinary = require(\"cloudinary/lib-es5/cloudinary\");\r\nrequire(\"dotenv\").config();\r\n\r\ncloudinary.config({\r\n    cloud_name: CLOUD_NAME,\r\n    api_key: API_KEY,\r\n    api_secret: API_SECRET,\r\n});\r\n\r\nexport default cloudinary;\r\n","import axios from \"axios\";\r\nimport cloudinary from \"../config/cloudinary\";\r\nimport { PUBLIC_FOLDER } from \"../contants\";\r\nrequire(\"dotenv\").config();\r\n\r\nexport const imageUpload = async (images) => {\r\n    try {\r\n        const responses = await Promise.all(\r\n            images.map((image) => {\r\n                const formData = new FormData();\r\n                if (image.camera) {\r\n                    formData.append(\"file\", image.url);\r\n                } else formData.append(\"file\", image);\r\n                formData.append(\"upload_preset\", \"react-social\");\r\n\r\n                return axios.post(\r\n                    \"https://api.cloudinary.com/v1_1/ko-c/image/upload\",\r\n                    formData\r\n                );\r\n            })\r\n        );\r\n        return responses.map(({ data }) => {\r\n            return {\r\n                url: data.url,\r\n                public_id: data.public_id,\r\n            };\r\n        });\r\n    } catch (err) {\r\n        throw err;\r\n    }\r\n};\r\n\r\nexport const removeImage = (images) => {\r\n    try {\r\n        images.map((image) =>\r\n            cloudinary.uploader.destroy(image, (data, error) => {\r\n                if (error) {\r\n                    throw error;\r\n                }\r\n            })\r\n        );\r\n    } catch (err) {\r\n        throw err;\r\n    }\r\n};\r\n\r\nexport const displayAvatar = (user) => {\r\n    return (user?.profilePicture?.length && user?.profilePicture[0]) || PUBLIC_FOLDER + 'no-avatar.png';\r\n};\r\nexport const displayBgc = (user) => {\r\n    return (user?.coverPicture?.length && user?.coverPicture[0]) || PUBLIC_FOLDER + 'no-avatar.png';\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst useCheckOnline = (user, isLog) => {\r\n  const [isOnline, setIsOnline] = useState(false);\r\n\r\n  const { usersOnline } = useSelector((state) => state.network);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  useEffect(() => {\r\n    if (userCurrent?._id === user?._id) return setIsOnline(true);\r\n    if (usersOnline && usersOnline.length > 0) {\r\n      return setIsOnline(usersOnline.includes(user?._id));\r\n    }\r\n    setIsOnline(false);\r\n  }, [usersOnline, user, userCurrent]);\r\n\r\n  return [isOnline, setIsOnline];\r\n};\r\n\r\nexport default useCheckOnline;\r\n","import React, { useEffect, useMemo, useState } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport useFormatTime from \"../../hooks/useFormatTime\";\r\nimport StatusActive from \"../statusActive/StatusActive\";\r\nimport \"./avatar.scss\";\r\nimport { displayAvatar } from \"../../helpers/image\";\r\nimport { useSelector } from \"react-redux\";\r\nimport useCheckOnline from \"../../hooks/useCheckOnline\";\r\n\r\nconst Avatar = ({\r\n  isStatus = true,\r\n  user,\r\n  width,\r\n  height,\r\n  link = true,\r\n  isShowOffline = true,\r\n  className = \"\",\r\n}) => {\r\n  const [status, setStatus] = useState();\r\n  const [isOnline, setIsOnline] = useCheckOnline(user);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  useEffect(() => {\r\n    if (!userCurrent || !user) return;\r\n    setStatus(\r\n      userCurrent._id === user._id\r\n        ? true\r\n        : userCurrent.friends.includes(user._id)\r\n    );\r\n  }, [user, userCurrent]);\r\n\r\n  const time = useFormatTime(user);\r\n\r\n  const src = useMemo(() => displayAvatar(user), [user]);\r\n\r\n  return (\r\n    <>\r\n      {link ? (\r\n        <Link\r\n          to={`/profile/${user?._id}`}\r\n          style={{\r\n            width,\r\n            height,\r\n          }}\r\n          className={`avatarContainer ${className}`}\r\n        >\r\n          <img className=\"avatarImg\" src={src} alt=\"\" />\r\n\r\n          {status && isStatus ? (\r\n            isShowOffline ? (\r\n              time && <StatusActive isOnline={isOnline} time={time} />\r\n            ) : (\r\n              isOnline &&\r\n              time && <StatusActive isOnline={isOnline} time={time} />\r\n            )\r\n          ) : (\r\n            <></>\r\n          )}\r\n        </Link>\r\n      ) : (\r\n        <div\r\n          className={`avatarContainer ${className}`}\r\n          style={{\r\n            width,\r\n            height,\r\n          }}\r\n        >\r\n          <img className=\"avatarImg\" src={src} alt=\"\" />\r\n          {status && isStatus ? (\r\n            isShowOffline ? (\r\n              time && <StatusActive isOnline={isOnline} time={time} />\r\n            ) : (\r\n              isOnline &&\r\n              time && <StatusActive isOnline={isOnline} time={time} />\r\n            )\r\n          ) : (\r\n            <></>\r\n          )}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Avatar;\r\n","import React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { addVideoStream, openStream } from \"../../helpers/media\";\r\nimport { END_CALL, SET_IS_ANSWER, SET_USER_STREAM } from \"../../redux/actions\";\r\nimport Avatar from \"../avatar/Avatar\";\r\n\r\nconst ModalCreateCall = () => {\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const {\r\n    isVideo,\r\n    userSendCall,\r\n    isSenderCall,\r\n    isAnswer,\r\n    roomCallId,\r\n    conversationId,\r\n  } = useSelector((state) => state.call);\r\n  const peer = useSelector((state) => state.peer);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const refuseCall = () => {\r\n    socket.emit(\"userRefuseCall\", {\r\n      userRefuseId: userCurrent?._id,\r\n      receiverId: userSendCall?._id,\r\n      isCreate: true,\r\n    });\r\n\r\n    dispatch({\r\n      type: END_CALL,\r\n    });\r\n  };\r\n\r\n  const handleAnswer = async () => {\r\n    dispatch({\r\n      type: SET_IS_ANSWER,\r\n      payload: true,\r\n    });\r\n\r\n    let stream;\r\n    try {\r\n      stream = await openStream(isVideo);\r\n\r\n      dispatch({\r\n        type: SET_USER_STREAM,\r\n        payload: stream,\r\n      });\r\n      addVideoStream(stream, true);\r\n      if (!socket) return;\r\n\r\n      socket.emit(\"joinRoomCall\", {\r\n        userSendCall: userSendCall?._id,\r\n        userReceiveCall: userCurrent?._id,\r\n        roomCallId,\r\n        peerId: peer._id,\r\n        isCreate: true,\r\n        conversationId,\r\n        isVideo,\r\n        userName: userCurrent?.userName,\r\n        streamId: stream.id,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", { err });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"call_box\">\r\n      <div className=\"text-center call_info\" style={{ padding: \"40px 0\" }}>\r\n        <Avatar\r\n          width=\"150px\"\r\n          height=\"150px\"\r\n          user={userSendCall}\r\n          link={false}\r\n          isStatus={false}\r\n        />\r\n        <h4>{userSendCall?.userName}</h4>\r\n      </div>\r\n\r\n      {!isAnswer && (\r\n        <div>\r\n          {isVideo ? (\r\n            <span>calling video...</span>\r\n          ) : (\r\n            <span>calling audio...</span>\r\n          )}\r\n\r\n          {/* <div className=\"timer\">\r\n            <small>{mins.toString().length < 2 ? \"0\" + mins : mins}</small>\r\n            <small>:</small>\r\n            <small>\r\n              {second.toString().length < 2 ? \"0\" + second : second}\r\n            </small>\r\n          </div> */}\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"call_menu\">\r\n        <i\r\n          className=\"fa-solid fa-phone-slash text-danger\"\r\n          onClick={refuseCall}\r\n        ></i>\r\n\r\n        {!isSenderCall && !isAnswer && (\r\n          <i className=\"fa-solid fa-phone-flip\" onClick={handleAnswer}></i>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalCreateCall;\r\n","import React from \"react\";\r\nimport \"./MessagePretty.scss\";\r\nconst MessagePretty = ({ mess }) => {\r\n  return <div className=\"mess-pretty\">{mess}</div>;\r\n};\r\n\r\nexport default MessagePretty;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  REFUSE_INVITE,\r\n  SET_IS_ANSWER,\r\n  SET_USER_STREAM,\r\n} from \"../../redux/actions\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport \"./modalInviteCall.scss\";\r\n\r\nimport { addVideoStream, openStream } from \"../../helpers/media\";\r\nimport MessagePretty from \"../MessagePretty/MessagePretty\";\r\n\r\nconst ModalInviteCall = () => {\r\n  const { userSendCall } = useSelector((state) => state.call);\r\n  const [countTime, setCountTime] = useState(20);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { socket } = useSelector((state) => state.network);\r\n  const peer = useSelector((state) => state.peer);\r\n  const { isAnswer, roomCallId, isVideo, conversationId } = useSelector(\r\n    (state) => state.call\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (isAnswer) return;\r\n    if (!countTime) {\r\n      return handleRefuseInvite();\r\n    }\r\n\r\n    const handleCountTime = () => setCountTime((prev) => prev - 1);\r\n\r\n    const timer = setTimeout(handleCountTime, 1000);\r\n\r\n    return () => clearTimeout(timer, handleCountTime);\r\n  }, [countTime, isAnswer]);\r\n\r\n  const handleJoinCall = async () => {\r\n    dispatch({\r\n      type: SET_IS_ANSWER,\r\n      payload: true,\r\n    });\r\n\r\n    const stream = await openStream(isVideo);\r\n    dispatch({\r\n      type: SET_USER_STREAM,\r\n      payload: stream,\r\n    });\r\n    addVideoStream(stream, true);\r\n\r\n    if (!socket) return;\r\n\r\n    socket.emit(\"joinRoomCall\", {\r\n      userSendCall: userSendCall?._id,\r\n      userReceiveCall: userCurrent?._id,\r\n      roomCallId,\r\n      peerId: peer._id,\r\n      isCreate: false,\r\n      conversationId,\r\n      userName: userCurrent?.userName,\r\n      streamId: stream.id,\r\n    });\r\n  };\r\n\r\n  const handleRefuseInvite = () => {\r\n    dispatch({\r\n      type: REFUSE_INVITE,\r\n    });\r\n\r\n    socket?.emit(\"refuseInviteCall\", userCurrent?._id);\r\n  };\r\n\r\n  return (\r\n    <div className=\"modalInvite_content\">\r\n      <span className=\"close\" onClick={handleRefuseInvite}>\r\n        ×\r\n      </span>\r\n      <div className=\"info\">\r\n        <Avatar user={userSendCall} link={false} isStatus={false} />\r\n        <MessagePretty\r\n          mess={`${userSendCall?.userName} Invited you to join the call`}\r\n        />\r\n      </div>\r\n      <div className=\"buttons\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-danger\"\r\n          onClick={handleRefuseInvite}\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-primary\"\r\n          onClick={handleJoinCall}\r\n        >\r\n          {`Join ${countTime}`}\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalInviteCall;\r\n","export const isEmail = (email) => {\r\n    const emailRegex = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\r\n    return emailRegex.test(email);\r\n}\r\n\r\nexport const checkExit = (array, value) => array.includes(value);\r\n\r\nexport const checkMinLength = (val, key, length) => {\r\n    if (val.length >= length) return '';\r\n    return `${key} must be at least ${length} characters long`;\r\n\r\n}\r\n\r\nexport const checkMaxLength = (val, key, length) => {\r\n    if (val.length <= length) return '';\r\n    return `${key} user name should not exceed ${length} characters`;\r\n\r\n}\r\n\r\n\r\nexport const addElment = (array, value, callback, isFrist = true) => {\r\n    const isExit =\r\n        (callback && callback(array, value)) || checkExit(array, value);\r\n\r\n    if (isExit) return array;\r\n    return isFrist ? [...array, value] : [...array, value];\r\n};\r\n\r\n\r\nexport const displayName = (name) => {\r\n    return name.length >= 10 ? name.substring(0, 10) + '...' : name.length\r\n};\r\n\r\nexport const getLocalStorage = (key) => {\r\n    return localStorage.getItem(key)\r\n        ? JSON.parse(localStorage.getItem(key))\r\n        : \"\";\r\n}\r\n\r\nexport const setLocalStorage = (key, value) => {\r\n    console.log(key, value)\r\n    return localStorage.setItem(key, JSON.stringify(value))\r\n}\r\n\r\n/**\r\n * \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2M2RlNmM3MjcxMGVkYzQ0NzcwYWYzOGUiLCJpYXQiOjE2NzY3MDM3MzUsImV4cCI6MTY3NjcwNzMzNX0.pXjKSL-zJmIZrdJc3KIPP6uls8XuOHxt0dfVx6mqL7o\"\r\n * \r\n * eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI2M2RlNmM3MjcxMGVkYzQ0NzcwYWYzOGUiLCJpYXQiOjE2NzY3MDM3MzQsImV4cCI6MTY3NjcwNzMzNH0.Mb_d4_Kj1anxPfN2_VglG15T9YIUIrUppxG9A1mbj64\r\n * \r\n * \r\n * Mb_d4_Kj1anxPfN2_VglG15T9YIUIrUppxG9A1mbj64\r\n\r\n */","import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\n\r\nimport jwt_decode from \"jwt-decode\";\r\nimport { ACCESS_TOKEN, REFRESH_TOKEN, URL_BE } from \"../contants\";\r\nimport { getLocalStorage } from \"../helpers\";\r\n\r\n\r\n\r\nconst instance = axios.create({\r\n    baseURL: URL_BE + \"v1/api\",\r\n});\r\n\r\n\r\nconst isTimeExpire = (token) => {\r\n    if (!token) {\r\n        return true;\r\n    }\r\n    const date = new Date();\r\n    const { exp } = jwt_decode(token);\r\n    return exp < date.getTime() / 1000\r\n}\r\n\r\n\r\n\r\n\r\nlet refreshTokenRequest = null;\r\nconst handleRefreshToken = async () => {\r\n    try {\r\n        let refreshToken = getLocalStorage(REFRESH_TOKEN);\r\n        if (isTimeExpire(refreshToken)) throw new Error(\"Refresh token invalid\");\r\n        const response = await axios.post(\"/auth/refresh-token\", { refreshToken });\r\n        return response;\r\n    } catch (err) {\r\n        throw err;\r\n    }\r\n};\r\n\r\ninstance.interceptors.request.use(\r\n    async (request) => {\r\n        let accessToken = getLocalStorage(ACCESS_TOKEN);\r\n\r\n        if (!accessToken) {\r\n            throw new Error(\"Please login\");\r\n        }\r\n\r\n        if (isTimeExpire(accessToken)) {\r\n            try {\r\n                refreshTokenRequest = refreshTokenRequest\r\n                    ? refreshTokenRequest\r\n                    : handleRefreshToken();\r\n\r\n                const response = await refreshTokenRequest;\r\n\r\n                const { newAccessToken } = response.data;\r\n\r\n                localStorage.setItem(ACCESS_TOKEN, JSON.stringify(newAccessToken));\r\n                accessToken = newAccessToken;\r\n            } catch (err) {\r\n                throw new Error(\"Refresh Token failed\");\r\n            }\r\n        }\r\n\r\n        request.headers[\"Authorization\"] = \"Bearer \" + accessToken;\r\n        return request;\r\n    },\r\n    function (error) {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\ninstance.interceptors.response.use(\r\n    function (response) {\r\n        return response.data;\r\n    },\r\n    function (error) {\r\n        console.log(\"error on respon\", error);\r\n        const message = error?.response?.data?.message || error.message;\r\n\r\n        toast.error(message, { autoClose: 1000 });\r\n        return Promise.reject(message);\r\n    }\r\n);\r\n\r\nexport default instance;\r\n","import axiosInstance from \"../config/axiosInstance \";\r\n\r\nexport const getDataAPI = async (url) => {\r\n\r\n  const res = await axiosInstance.get(`${url}`);\r\n  return res;\r\n};\r\n\r\nexport const postDataAPI = async (url, data) => {\r\n  const res = await axiosInstance.post(`${url}`, data);\r\n  return res;\r\n};\r\n\r\nexport const putDataAPI = async (url, data) => {\r\n  const res = await axiosInstance.put(`${url}`, data);\r\n  return res;\r\n};\r\n\r\nexport const patchDataAPI = async (url, data) => {\r\n  const res = await axiosInstance.patch(`${url}`, data);\r\n  return res;\r\n};\r\n\r\nexport const deleteDataAPI = async (url) => {\r\n  const res = await axiosInstance.delete(`${url}`);\r\n  return res;\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { format } from \"timeago.js\";\r\nimport Avatar from \"../avatar/Avatar\";\r\n\r\nconst CardFriend = ({ friend }) => {\r\n  const [isDisable, setIsDisable] = useState(false);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { isVideo, roomCallId, conversationId } = useSelector(\r\n    (state) => state.call\r\n  );\r\n\r\n  const timeRemaining = useRef();\r\n\r\n  useEffect(() => {\r\n    if (!isDisable || timeRemaining.current) return;\r\n    const time = 5 * 60 * 1000;\r\n\r\n    const date = new Date();\r\n\r\n    timeRemaining.current = time + date.getTime();\r\n\r\n    const removeDisable = () => {\r\n      setIsDisable(false);\r\n      timeRemaining.current = \"\";\r\n    };\r\n    const timer = setTimeout(removeDisable, 1000);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [isDisable]);\r\n\r\n  const handleInviteFriend = (friendId) => {\r\n    if (isDisable) {\r\n      return toast.info(\r\n        `Already invited this friend ${format(\r\n          timeRemaining.current\r\n        )} later can invite again`,\r\n        { autoClose: 1000 }\r\n      );\r\n    }\r\n\r\n    if (!socket || !userCurrent) return;\r\n    socket.emit(\"createCall\", {\r\n      isVideo,\r\n      sender: {\r\n        profilePicture: userCurrent.profilePicture,\r\n        userName: userCurrent.userName,\r\n        _id: userCurrent?._id,\r\n      },\r\n      receiverId: friend?._id,\r\n      roomCallId,\r\n      isCreate: false,\r\n      conversationId,\r\n    });\r\n\r\n    setIsDisable(true);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Avatar\r\n        width=\"60px\"\r\n        height=\"60px\"\r\n        user={friend}\r\n        link={false}\r\n        isShowOffline={false}\r\n      />\r\n      <p>{friend?.userName}</p>\r\n      <button\r\n        type=\"button\"\r\n        className=\"btn btn-info\"\r\n        onClick={handleInviteFriend}\r\n      >\r\n        {isDisable ? \"Invited\" : \"Invite\"}\r\n      </button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CardFriend;\r\n","import React, { useEffect, useMemo } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Slider from \"react-slick\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { SET_FRIEND_INVITES } from \"../../redux/actions\";\r\nimport CardFriend from \"./CardFriend\";\r\nimport \"./InviteFriend.scss\";\r\n\r\nconst InviteFriend = () => {\r\n  const { userCall, isAnswer, fristLoadFriends, friendInvites } = useSelector(\r\n    (state) => state.call\r\n  );\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const handleFetchFriends = async () => {\r\n      if (userCurrent && userCurrent._id) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/user/get-friends/${userCurrent?._id}`\r\n          );\r\n\r\n          const { message, friends } = response;\r\n          // toast.success(message, { autoClose: 2000 });\r\n\r\n          let data = [...friends];\r\n\r\n          if (userCall) {\r\n            data = friends.filter((friend) => friend?._id !== userCall._id);\r\n          }\r\n\r\n          if (isMount) {\r\n            dispatch({\r\n              type: SET_FRIEND_INVITES,\r\n              payload: data,\r\n            });\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    //isAnswer && fristLoadFriends\r\n    if (fristLoadFriends) {\r\n      handleFetchFriends();\r\n    }\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent, isAnswer]);\r\n\r\n  const settings = useMemo(() => ({\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: 3,\r\n    slidesToScroll: 1,\r\n  }));\r\n\r\n  const body = (className) =>\r\n    friendInvites.map((friend) => (\r\n      <div key={friend?._id}>\r\n        <div className={\"friend_invite \" + className}>\r\n          <CardFriend friend={friend} />\r\n        </div>\r\n      </div>\r\n    ));\r\n\r\n  return (\r\n    <div className=\"invite\">\r\n      <p className=\"title\">Invite More People</p>\r\n\r\n      {friendInvites.length <= 3 ? (\r\n        <div className=\"invite_content\">{body(\"no-slider\")}</div>\r\n      ) : (\r\n        <Slider {...settings}>{body()}</Slider>\r\n      )}\r\n\r\n      {/* <Carousel>\r\n        {friendInvites.map((friend) => (\r\n          <div key={friend?._id}>\r\n            <div className=\"friend_invite\">\r\n            <CardFriend friend={friend} />\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </Carousel> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default InviteFriend;\r\n","import React from \"react\";\r\nimport { PUBLIC_FOLDER } from \"../../contants\";\r\n\r\nconst NavModalCall = () => {\r\n  return (\r\n    <nav>\r\n      <img src={PUBLIC_FOLDER + \"logo.png\"} alt=\"\" />\r\n      <ul>\r\n        <li>\r\n          <img\r\n            src={PUBLIC_FOLDER + \"live.png\"}\r\n            alt=\"\"\r\n            className=\"icon_modal-active\"\r\n          />\r\n        </li>\r\n        <li>\r\n          <img src={PUBLIC_FOLDER + \"video.png\"} alt=\"\" />\r\n        </li>\r\n        <li>\r\n          <img src={PUBLIC_FOLDER + \"message.png\"} alt=\"\" />\r\n        </li>\r\n        <li>\r\n          <img src={PUBLIC_FOLDER + \"notification.png\"} alt=\"\" />\r\n        </li>\r\n        <li>\r\n          <img src={PUBLIC_FOLDER + \"users.png\"} alt=\"\" />\r\n        </li>\r\n        <li>\r\n          <img src={PUBLIC_FOLDER + \"setting.png\"} alt=\"\" />\r\n        </li>\r\n      </ul>\r\n    </nav>\r\n  );\r\n};\r\n\r\nexport default NavModalCall;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { PUBLIC_FOLDER } from \"../../contants\";\r\nimport {\r\n  addVideoStream,\r\n  findStream,\r\n  handleUpdateUserCamera,\r\n  openStream,\r\n} from \"../../helpers/media\";\r\nimport { END_CALL, SET_IS_ANSWER, SET_USER_STREAM } from \"../../redux/actions\";\r\nimport ModalCreateCall from \"../modalCreateCall/ModalCreateCall\";\r\nimport ModalInviteCall from \"../modalInviteCall/ModalInviteCall\";\r\nimport InviteFriend from \"./InviteFriend\";\r\nimport \"./modalCall.scss\";\r\nimport NavModalCall from \"./NavModalCall\";\r\n\r\nconst CallModal = () => {\r\n  const [hours, setHours] = useState(0);\r\n  const [mins, setMins] = useState(0);\r\n  const [second, setSecond] = useState(0);\r\n  const [total, setTotal] = useState(0);\r\n\r\n  const [isMic, setIsMic] = useState(true);\r\n  const [isOpenVideo, setOpenVideo] = useState(true);\r\n\r\n  const {\r\n    isVideo,\r\n    userReciverCall,\r\n    isAnswer,\r\n    isCreate,\r\n    roomCallId,\r\n    isSenderCall,\r\n    userStream,\r\n    conversationId,\r\n  } = useSelector((state) => state.call);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n  const peer = useSelector((state) => state.peer);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n\r\n  // Set Time\r\n\r\n  useEffect(() => {\r\n    setSecond(total % 60);\r\n    setMins(parseInt(total / 60));\r\n    setHours(parseInt(total / 3600));\r\n  }, [total]);\r\n\r\n  useEffect(() => {\r\n    if (!peer || !userStream) return;\r\n\r\n    peer.on(\"call\", (call) => {\r\n      call.answer(userStream);\r\n      call.on(\"stream\", function (remoteStream) {\r\n        addVideoStream(remoteStream);\r\n      });\r\n    });\r\n\r\n    return () => peer.removeListener(\"call\");\r\n  }, [userStream, peer]);\r\n\r\n  useEffect(() => {\r\n    const timerId = setInterval(() => setTotal((prev) => prev + 1), 1000);\r\n\r\n    return () => {\r\n      setTotal(0);\r\n      clearInterval(timerId);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleSendStream = async (data) => {\r\n      const { peerId, userName } = data;\r\n\r\n      toast.info(`${userName} joined the call`, { autoClose: 1000 });\r\n\r\n      let stream;\r\n\r\n      if (!userStream) {\r\n        stream = await openStream(isVideo);\r\n        dispatch({\r\n          type: SET_USER_STREAM,\r\n          payload: stream,\r\n        });\r\n      } else {\r\n        stream = userStream;\r\n      }\r\n\r\n      const call = peer.call(peerId, stream);\r\n\r\n      if (!isAnswer) {\r\n        dispatch({\r\n          type: SET_IS_ANSWER,\r\n          payload: true,\r\n        });\r\n        addVideoStream(stream, true);\r\n      }\r\n\r\n      if (!call) return;\r\n\r\n      call.on(\"stream\", (remoteStream) => {\r\n        addVideoStream(remoteStream);\r\n      });\r\n    };\r\n\r\n    socket.on(\"user-joined-call\", handleSendStream);\r\n\r\n    return () => socket?.off(\"user-joined-call\", handleSendStream);\r\n  }, [socket, userStream, isAnswer]);\r\n\r\n  useEffect(() => {\r\n    const handleUserCallOut = (data) => {\r\n      const { streamId, userName } = data;\r\n\r\n      toast.info(`${userName} got off the call`, {\r\n        autoClose: 1000,\r\n      });\r\n\r\n      const divEl = findStream(streamId);\r\n\r\n      if (divEl) divEl.remove();\r\n    };\r\n\r\n    socket.on(\"user-call-out\", handleUserCallOut);\r\n\r\n    return () => socket?.off(\"user-call-out\", handleUserCallOut);\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    const handleNotify = (message, isClose) => {\r\n      toast.info(message, {\r\n        autoClose: 500,\r\n      });\r\n\r\n      if (isClose) {\r\n        dispatch({\r\n          type: END_CALL,\r\n        });\r\n      }\r\n    };\r\n\r\n    socket.on(\"callRefused\", () => {\r\n      handleNotify(`${userReciverCall?.userName} refuse the call`);\r\n    });\r\n\r\n    socket.on(\"userCallBusy\", (isClose) => {\r\n      handleNotify(`${userReciverCall.userName} is on another call!`, isClose);\r\n    });\r\n\r\n    return () => {\r\n      socket?.off(\"userCallBusy\");\r\n      socket?.off(\"callRefused\");\r\n    };\r\n  }, [socket, userReciverCall]);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    socket.on(\"update-user-camera\", handleUpdateUserCamera);\r\n\r\n    return () => socket?.off(\"update-user-camera\", handleUpdateUserCamera);\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    if (isAnswer) {\r\n      setTotal(0);\r\n    } else {\r\n      const timerId = setTimeout(() => {\r\n        if (isSenderCall) {\r\n          socket?.emit(\"userCallNoReaction\", {\r\n            userCallId: userReciverCall._id,\r\n            userSendCallId: userCurrent._id,\r\n            conversationId,\r\n            isVideo,\r\n          });\r\n        }\r\n\r\n        dispatch({\r\n          type: END_CALL,\r\n        });\r\n      }, 10000);\r\n\r\n      return () => clearTimeout(timerId);\r\n    }\r\n  }, [isAnswer]);\r\n\r\n  const endCall = () => {\r\n    const streamId = userStream.id;\r\n\r\n    const tracks = userStream?.getTracks();\r\n    tracks.forEach((track) => track.stop());\r\n\r\n    dispatch({\r\n      type: END_CALL,\r\n    });\r\n    socket?.emit(\"end-call\", {\r\n      userOutCallId: userCurrent?._id,\r\n      streamId,\r\n    });\r\n  };\r\n\r\n  const toogleStream = (type) => {\r\n    if (!userStream) return;\r\n\r\n    const track = userStream.getTracks().find((track) => track.kind === type);\r\n\r\n    if (!track) return;\r\n\r\n    let data = {};\r\n\r\n    if (track.enabled) {\r\n      if (type === \"video\") {\r\n        data.img = userCurrent?.profilePicture.length\r\n          ? userCurrent?.profilePicture[0]\r\n          : PUBLIC_FOLDER + \"no-avatar.png\";\r\n      }\r\n\r\n      track.enabled = false;\r\n    } else {\r\n      track.enabled = true;\r\n    }\r\n\r\n    if (type === \"video\") {\r\n      data.streamId = userStream?.id;\r\n      data.roomCallId = roomCallId;\r\n\r\n      socket.emit(\"user-turn-off-video\", {\r\n        ...data,\r\n      });\r\n      handleUpdateUserCamera(data);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"call_modal\">\r\n      <div\r\n        className=\"modal_container\"\r\n        style={{\r\n          display: isAnswer ? \"none\" : \"flex\",\r\n        }}\r\n      >\r\n        {!isAnswer && (isCreate ? <ModalCreateCall /> : <ModalInviteCall />)}\r\n      </div>\r\n      <div\r\n        className=\"header\"\r\n        style={{\r\n          display: `${isAnswer ? \"block\" : \"none\"}`,\r\n        }}\r\n      >\r\n        <NavModalCall />\r\n\r\n        <div className=\"container\">\r\n          <div className=\"top-icons\">\r\n            <img src={PUBLIC_FOLDER + \"search.png\"} alt=\"\" />\r\n            <img src={PUBLIC_FOLDER + \"menu.png\"} alt=\"\" />\r\n          </div>\r\n          <div className=\"video_layout\">\r\n            <div className=\"content_left\">\r\n              <div className=\"pin_video border_center\"></div>\r\n              <div className=\"time_video\">\r\n                <span>{hours.toString().length < 2 ? \"0\" + hours : hours}</span>\r\n                <span>:</span>\r\n                <span>{mins.toString().length < 2 ? \"0\" + mins : mins}</span>\r\n                <span>:</span>\r\n                <span>\r\n                  {second.toString().length < 2 ? \"0\" + second : second}\r\n                </span>\r\n              </div>\r\n              <div className=\"controls\">\r\n                <div className=\"icon-control\">\r\n                  <img src={PUBLIC_FOLDER + \"chat.png\"} alt=\"\" />\r\n                </div>\r\n\r\n                <div\r\n                  className=\"icon-control\"\r\n                  onClick={() => {\r\n                    toogleStream(\"video\");\r\n                    setOpenVideo((prev) => !prev);\r\n                  }}\r\n                >\r\n                  {isOpenVideo ? (\r\n                    <i className=\"fa-solid fa-video-slash\"></i>\r\n                  ) : (\r\n                    <i className=\"fa-solid fa-video\"></i>\r\n                  )}\r\n                </div>\r\n                <div className=\"icon-control\">\r\n                  <img\r\n                    src={PUBLIC_FOLDER + \"call.png\"}\r\n                    alt=\"\"\r\n                    className=\"call-icon\"\r\n                    onClick={endCall}\r\n                  />\r\n                </div>\r\n                <div\r\n                  className=\"icon-mic icon-control\"\r\n                  onClick={() => {\r\n                    toogleStream(\"audio\");\r\n                    setIsMic((prev) => !prev);\r\n                  }}\r\n                >\r\n                  {isMic ? (\r\n                    <img src={PUBLIC_FOLDER + \"mic.png\"} alt=\"\" />\r\n                  ) : (\r\n                    <i className=\"fa-solid fa-microphone-slash\"></i>\r\n                  )}\r\n                </div>\r\n                <div className=\"icon-control\">\r\n                  <img src={PUBLIC_FOLDER + \"cast.png\"} alt=\"\" />\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div className=\"content_right\">\r\n              <div className=\"joined\">\r\n                <p>People Joined</p>\r\n                <div className=\"video-joins\"></div>\r\n              </div>\r\n              <InviteFriend />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CallModal;\r\n","import axios from \"axios\";\r\nimport { toast } from \"react-toastify\";\r\nimport { ACCESS_TOKEN, REFRESH_TOKEN, URL_BE } from \"../contants\";\r\nimport { setLocalStorage } from \"../helpers\";\r\nimport { LOADING_END, LOADING_START, LOGIN_FAILED, LOGIN_SUCCESS } from \"../redux/actions\";\r\n\r\naxios.defaults.baseURL = URL_BE + \"v1/api\";\r\n\r\n\r\nexport const login = (userInfo, navigate) => async (dispatch) => {\r\n    try {\r\n        dispatch({\r\n            type: LOADING_START,\r\n        });\r\n        const response = await axios.post(\"/auth/login\", userInfo);\r\n        const { user, message, accessToken, refreshToken } = response.data;\r\n\r\n        toast.success(message, { autoClose: 500 });\r\n\r\n        dispatch({\r\n            type: LOGIN_SUCCESS,\r\n            payload: user,\r\n        });\r\n\r\n        setLocalStorage(ACCESS_TOKEN, accessToken);\r\n        setLocalStorage(REFRESH_TOKEN, refreshToken);\r\n\r\n        navigate(\"/\");\r\n    } catch (err) {\r\n        const message = err?.response?.data?.message || err.message;\r\n        toast.error(message, { autoClose: 2000 });\r\n\r\n        dispatch({\r\n            type: LOGIN_FAILED,\r\n            payload: err,\r\n        });\r\n    } finally {\r\n        dispatch({\r\n            type: LOADING_END,\r\n        });\r\n    }\r\n};\r\n\r\nexport const register = (userInfo, navigate) => async (dispatch) => {\r\n    try {\r\n        dispatch({\r\n            type: LOADING_START,\r\n        })\r\n        await axios.post(\"/auth/register\", userInfo);\r\n        navigate(\"/login\");\r\n    } catch (err) {\r\n        const message = err?.response?.data?.message || err.message;\r\n        toast.error(message, { autoClose: 2000 });\r\n    }\r\n    finally {\r\n        dispatch({ type: LOADING_END })\r\n    }\r\n};\r\n","import { Cancel } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport \"./displayImg.css\";\r\n\r\nconst Displayimg = ({ image, file, setImages, setFiles }) => {\r\n  return (\r\n    <>\r\n      <img\r\n        src={image ? image : file.camera ? file.url : URL.createObjectURL(file)}\r\n      />\r\n      <span\r\n        className=\"imgCancel\"\r\n        onClick={() =>\r\n          image\r\n            ? setImages((prev) => prev.filter((item) => item.url !== image))\r\n            : setFiles((prev) => prev.filter((item) => item.uuid !== file.uuid))\r\n        }\r\n      >\r\n        <Cancel />\r\n      </span>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Displayimg;\r\n","import { PermMedia } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport Displayimg from \"../displayimg/DisplayImg\";\r\nimport \"./ChooseImage.scss\";\r\n\r\nconst ChooseImage = ({\r\n  setIsTakePhoto,\r\n  isTakePhoto,\r\n  files,\r\n  height,\r\n  width,\r\n  id,\r\n  multiple,\r\n  setFiles,\r\n}) => {\r\n  const videoRef = useRef();\r\n  const canvasRef = useRef();\r\n  const [videoStream, setVideoStream] = useState();\r\n  // camera truoc\r\n  const [useFrontCamera, setUseFrontCamera] = useState(true);\r\n  const [notify, setNotify] = useState(\"\");\r\n  const [isStop, setIsStop] = useState(false);\r\n\r\n  const constraints = useRef({\r\n    video: {\r\n      width: {\r\n        min: 1280,\r\n        ideal: 1920,\r\n        max: 2560,\r\n      },\r\n      height: {\r\n        min: 720,\r\n        ideal: 1080,\r\n        max: 1440,\r\n      },\r\n    },\r\n  });\r\n\r\n  const stopVideoStream = () => {\r\n    if (videoStream) {\r\n      videoStream.getTracks().forEach((track) => {\r\n        track.stop();\r\n      });\r\n    }\r\n  };\r\n\r\n  const init = async () => {\r\n    stopVideoStream();\r\n    constraints.current.video.facingMode = useFrontCamera\r\n      ? \"user\"\r\n      : \"environment\";\r\n    try {\r\n      const stream = await navigator.mediaDevices.getUserMedia(\r\n        constraints.current\r\n      );\r\n\r\n      videoRef.current.srcObject = stream;\r\n      videoRef.current.play();\r\n      setVideoStream(stream);\r\n    } catch (error) {\r\n      setNotify(\"An error occurred while starting the camera\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!isTakePhoto) {\r\n      videoRef?.current?.pause();\r\n      stopVideoStream();\r\n      setVideoStream();\r\n      return;\r\n    }\r\n    if (\r\n      !\"mediaDevices\" in navigator ||\r\n      !\"getUserMedia\" in navigator.mediaDevices\r\n    ) {\r\n      setNotify(\"Not support API camera\");\r\n      return;\r\n    }\r\n\r\n    init();\r\n\r\n    return () => {\r\n      videoRef?.current?.srcObject.getTracks().forEach((track) => {\r\n        track.stop();\r\n      });\r\n    };\r\n  }, [isTakePhoto, useFrontCamera]);\r\n\r\n  const handleTakePhoto = () => {\r\n    canvasRef.current.width = videoRef.current.videoWidth;\r\n    canvasRef.current.height = videoRef.current.videoHeight;\r\n    canvasRef.current.getContext(\"2d\").drawImage(videoRef.current, 0, 0);\r\n\r\n    const image = canvasRef.current.toDataURL(\"image/png\");\r\n\r\n    if (multiple) {\r\n      setFiles((prev) => [\r\n        ...prev,\r\n        {\r\n          camera: true,\r\n          url: image,\r\n          uuid: uuidv4(),\r\n        },\r\n      ]);\r\n    } else {\r\n      setFiles([\r\n        {\r\n          camera: true,\r\n          url: image,\r\n          uuid: uuidv4(),\r\n        },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const handleChangeVideo = () => {\r\n    setUseFrontCamera((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"optionUploadImage\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-primary\"\r\n          onClick={() => setIsTakePhoto(false)}\r\n        >\r\n          Upload photos\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-info\"\r\n          onClick={() => setIsTakePhoto(true)}\r\n        >\r\n          Take a photo\r\n        </button>\r\n      </div>\r\n      <div className=\"uploadImageContent\">\r\n        {!isTakePhoto ? (\r\n          <div className=\"uploadImageContentTop\">\r\n            <label htmlFor={`file${id}`} className=\"shareOption\">\r\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n              <span className=\"shareOptionText\">{\"Choose photo\"}</span>\r\n            </label>\r\n            <input\r\n              multiple={multiple}\r\n              style={{ display: \" none\" }}\r\n              type={\"file\"}\r\n              id={`file${id}`}\r\n              accept=\".png,.jpeg,.jpg\"\r\n              onChange={(e) => {\r\n                const data = Array.from(e.target.files).map((file) => {\r\n                  file.uuid = uuidv4();\r\n                  return file;\r\n                });\r\n\r\n                if (multiple) {\r\n                  setFiles((prev) => [...prev, ...data]);\r\n                } else {\r\n                  setFiles([...data]);\r\n                }\r\n              }}\r\n            />\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"takeVideoTop\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n                onClick={() => {\r\n                  if (isStop) videoRef.current.play();\r\n                  else videoRef.current.pause();\r\n\r\n                  setIsStop((prev) => !prev);\r\n                }}\r\n              >\r\n                {`${isStop ? \"Play\" : \"Stop\"} video`}\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-warning\"\r\n                onClick={handleTakePhoto}\r\n              >\r\n                Shot\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-dark\"\r\n                onClick={handleChangeVideo}\r\n              >\r\n                Change camera\r\n              </button>\r\n            </div>\r\n            <div className=\"takeVideoBody\">\r\n              {notify ? notify : <video ref={videoRef}></video>}\r\n              <canvas\r\n                style={{\r\n                  display: \"none\",\r\n                }}\r\n                ref={canvasRef}\r\n              ></canvas>\r\n            </div>\r\n          </>\r\n        )}\r\n\r\n        <div className=\"uploadImageContentBody\">\r\n          <div className=\"shareImgContainer\">\r\n            {files.map((file) => {\r\n              return (\r\n                <div\r\n                  className=\"imgContainer\"\r\n                  style={{\r\n                    width: width,\r\n                    height: height,\r\n                  }}\r\n                  key={file.uuid}\r\n                >\r\n                  <Displayimg file={file} setFiles={setFiles} />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChooseImage;\r\n","import React, { useState } from \"react\";\r\nimport ChooseImage from \"../chooseImage/ChooseImage\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst ModalChooseImage = ({\r\n  height,\r\n  width,\r\n  id,\r\n  text,\r\n  multiple,\r\n  typeImage,\r\n  onSave,\r\n}) => {\r\n  const [files, setFiles] = useState([]);\r\n  const [isTakePhoto, setIsTakePhoto] = useState(false);\r\n\r\n  const handleSave = () => {\r\n    onSave(files, typeImage);\r\n    setFiles([]);\r\n    setIsTakePhoto(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"modal fade\"\r\n        id={id}\r\n        tabIndex=\"-1\"\r\n        role=\"dialog\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className={`modal-dialog chooseImgage`} role=\"document\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n                {`${text}`}\r\n              </h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                data-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n                onClick={() => {\r\n                  setIsTakePhoto(false);\r\n                }}\r\n              >\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              <ChooseImage\r\n                setIsTakePhoto={setIsTakePhoto}\r\n                isTakePhoto={isTakePhoto}\r\n                files={files}\r\n                height={height}\r\n                width={width}\r\n                setFiles={setFiles}\r\n                multiple={multiple}\r\n                id={id}\r\n              />\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-danger\"\r\n                onClick={handleSave}\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Save\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n                data-dismiss=\"modal\"\r\n                onClick={() => {\r\n                  setIsTakePhoto(false);\r\n                }}\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ModalChooseImage;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { PUBLIC_FOLDER } from \"../../contants\";\r\nimport { UPDATE_CONVERSATION } from \"../../redux/actions\";\r\n\r\nexport default function Conversation({ conversation }) {\r\n  const {\r\n    _id: id,\r\n    reads,\r\n    members,\r\n    isMultiple,\r\n    name,\r\n    image,\r\n    listMembers,\r\n    images,\r\n    nameConversation,\r\n  } = conversation;\r\n  const [message, setMessage] = useState(\"\");\r\n  const [isRead, setIsRead] = useState(true);\r\n  const [lastMessage, setLastMessage] = useState(\r\n    () => conversation.lastMessage || \"\"\r\n  );\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { lastMessageConversation, statusConversations } = useSelector(\r\n    (state) => state.chat\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n    if (!conversation) return;\r\n\r\n    const handeGetInfoMembers = async () => {\r\n      const listMemberIds = members.filter(\r\n        (memberId) => memberId !== userCurrent?._id\r\n      );\r\n\r\n      const responses = await Promise.all(\r\n        listMemberIds.map((memberId) => getDataAPI(`/user?userId=${memberId}`))\r\n      );\r\n\r\n      const listMembers = responses.map((response) => {\r\n        const { user } = response;\r\n        return user;\r\n      });\r\n\r\n      if (isMount) {\r\n        dispatch({\r\n          type: UPDATE_CONVERSATION,\r\n          payload: {\r\n            conversationId: conversation?._id,\r\n            listMembers,\r\n          },\r\n        });\r\n      }\r\n    };\r\n\r\n    if (!listMembers) {\r\n      handeGetInfoMembers();\r\n    }\r\n\r\n    return () => (isMount = false);\r\n  }, [conversation, listMembers]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n    if (!conversation || !userCurrent) return;\r\n\r\n    const handleSetImgConversation = async () => {\r\n      if (isMultiple) {\r\n        //get img conversation\r\n        if (image.length) {\r\n          if (isMount)\r\n            dispatch({\r\n              type: UPDATE_CONVERSATION,\r\n              payload: {\r\n                conversationId: conversation?._id,\r\n                images: [\r\n                  {\r\n                    src: image[0],\r\n                    key: uuidv4(),\r\n                  },\r\n                ],\r\n              },\r\n            });\r\n        }\r\n      }\r\n    };\r\n\r\n    if (!images) handleSetImgConversation();\r\n\r\n    return () => (isMount = false);\r\n  }, [conversation, userCurrent, images]);\r\n\r\n  useEffect(() => {\r\n    if (!conversation || !userCurrent || nameConversation) return;\r\n\r\n    if (isMultiple) {\r\n      dispatch({\r\n        type: UPDATE_CONVERSATION,\r\n        payload: {\r\n          conversationId: conversation?._id,\r\n          nameConversation: name,\r\n        },\r\n      });\r\n    } else {\r\n      if (!listMembers) return;\r\n      const { userName } = listMembers[0];\r\n      dispatch({\r\n        type: UPDATE_CONVERSATION,\r\n        payload: {\r\n          conversationId: conversation?._id,\r\n          nameConversation: userName,\r\n        },\r\n      });\r\n    }\r\n  }, [conversation, userCurrent, nameConversation, listMembers, name]);\r\n\r\n  useEffect(() => {\r\n    if (!reads || !userCurrent) return;\r\n\r\n    setIsRead(() => reads.includes(userCurrent._id));\r\n  }, [reads, userCurrent]);\r\n\r\n  useEffect(() => {\r\n    if (\r\n      !lastMessageConversation ||\r\n      lastMessageConversation?.conversationId !== id\r\n    )\r\n      return;\r\n\r\n    setLastMessage(lastMessageConversation);\r\n  }, [lastMessageConversation]);\r\n\r\n  useEffect(() => {\r\n    if (!listMembers || !userCurrent || (images && images.length > 0)) return;\r\n\r\n    let listImages = [];\r\n\r\n    if (isMultiple) {\r\n      const ids = [];\r\n      const length = members.length;\r\n      for (let i = 0; i < 2; ++i) {\r\n        let check;\r\n        do {\r\n          const idxRamdom = Math.floor(Math.random() * length);\r\n          if (!ids.includes(members[idxRamdom])) {\r\n            ids.push(members[idxRamdom]);\r\n            check = true;\r\n          }\r\n        } while (!check);\r\n      }\r\n\r\n      listImages = ids.map((id) => {\r\n        let img;\r\n\r\n        if (id === userCurrent?._id) {\r\n          img = userCurrent.profilePicture;\r\n        } else {\r\n          img = listMembers.find((member) => member?._id === id).profilePicture;\r\n        }\r\n\r\n        return {\r\n          src: img && img.length ? img[0] : PUBLIC_FOLDER + \"no-avatar.png\",\r\n          key: uuidv4(),\r\n        };\r\n      });\r\n    } else {\r\n      const { profilePicture } = listMembers[0];\r\n\r\n      listImages.push({\r\n        src: profilePicture.length\r\n          ? profilePicture[0]\r\n          : PUBLIC_FOLDER + \"no-avatar.png\",\r\n        key: uuidv4(),\r\n      });\r\n    }\r\n\r\n    dispatch({\r\n      type: UPDATE_CONVERSATION,\r\n      payload: {\r\n        conversationId: conversation?._id,\r\n        images: listImages,\r\n      },\r\n    });\r\n  }, [listMembers, members, images, userCurrent]);\r\n\r\n  useEffect(() => {\r\n    if (!lastMessage || !listMembers || !userCurrent) return;\r\n    const { isNotify, senderId, notify, text } = lastMessage;\r\n\r\n    // if (isNotify) {\r\n    //   let message;\r\n    //   if (senderId) {\r\n    //     const { userName } = friendContact;\r\n\r\n    //     message =\r\n    //       userCurrent?._id === senderId\r\n    //         ? `${userName} missed your call`\r\n    //         : `You missed the call with ${userName}`;\r\n    //   } else {\r\n    //     message = notify[0];\r\n    //   }\r\n    //   return setMessage(message);\r\n    // }\r\n\r\n    let data;\r\n\r\n    if (senderId === userCurrent?._id) {\r\n      data = \"You\";\r\n    } else {\r\n      const sender = listMembers.find((member) => member?._id === senderId);\r\n      data = handleGetName(sender?.userName);\r\n    }\r\n\r\n    setMessage(data + \": \" + text);\r\n  }, [lastMessage, listMembers]);\r\n\r\n  const handleGetName = (name) => {\r\n    const data = name.split(\" \");\r\n    const length = data.length;\r\n\r\n    if (!data || !length) {\r\n      return name?.userName || \"\";\r\n    }\r\n\r\n    return data[length - 1];\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"pic banner\">\r\n        {/* <Avatar user={friendContact} width=\"64px\" height=\"64px\" link={false} /> */}\r\n\r\n        {images &&\r\n          (images.length === 1 ? (\r\n            <img className=\"one-img\" src={images[0].src} alt=\"\" />\r\n          ) : (\r\n            <div className=\"multiple-img\">\r\n              {images.map((img) => (\r\n                <img src={img.src} key={img.key} />\r\n              ))}\r\n            </div>\r\n          ))}\r\n      </div>\r\n\r\n      <div className={`name ${!isRead ? \"unread\" : \"\"}`}>\r\n        {nameConversation}\r\n      </div>\r\n      <div className={`message ${!isRead ? \"unread\" : \"\"}`}>\r\n        {lastMessage?.[0] === \"notify\" ? lastMessage?.[1] : message}\r\n      </div>\r\n      {!isRead && <div className=\"NotificationCircle\"></div>}\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getDataAPI, postDataAPI } from \"../../api/fetchData\";\r\nimport { imageUpload } from \"../../helpers/image\";\r\nimport {\r\n  ADD_CONVERSATION,\r\n  ADD_FRIEND_TO_ROOM,\r\n  REMOVE_FRIEND_TO_ROOM,\r\n  RESET_CREATE_ROOM,\r\n  SET_LIST_FRIEND,\r\n} from \"../../redux/actions\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport \"./ModalCreateRoomChat.scss\";\r\n\r\nconst ModalCreateRoomChat = () => {\r\n  const [file, setFile] = useState();\r\n\r\n  const nameRef = useRef(\"\");\r\n  const descRef = useRef(\"\");\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { friends, friendAdds } = useSelector((state) => state.createRoomChat);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const handleFetchFriends = async () => {\r\n      if (userCurrent && userCurrent._id) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/user/get-friends/${userCurrent?._id}`\r\n          );\r\n\r\n          const { message, friends } = response;\r\n\r\n          if (isMount) {\r\n            dispatch({\r\n              type: SET_LIST_FRIEND,\r\n              payload: friends,\r\n            });\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n\r\n    handleFetchFriends();\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent]);\r\n\r\n  const handleCloseModal = () =>\r\n    dispatch({\r\n      type: RESET_CREATE_ROOM,\r\n    });\r\n\r\n  const handleSubmit = async () => {\r\n    const data = {};\r\n\r\n    if (!nameRef.current.value) {\r\n      return toast.info(`Please enter name room chat`, { autoClose: 500 });\r\n    }\r\n\r\n    if (!friendAdds.length) {\r\n      return toast.info(`Please add members to room chat`, { autoClose: 500 });\r\n    }\r\n\r\n    data.members = [\r\n      userCurrent?._id,\r\n      ...friendAdds.map((friend) => friend?._id),\r\n    ];\r\n\r\n    if (file) {\r\n      const images = await imageUpload([file]);\r\n      data.image = [];\r\n      for (const key in images[0]) {\r\n        data.image.push(images[0][key]);\r\n      }\r\n    }\r\n\r\n    data.name = nameRef.current.value;\r\n    data.desc = descRef.current.value;\r\n\r\n    data.reads = [userCurrent?._id, ...friendAdds.map((friend) => friend?._id)];\r\n    data.status = [userCurrent?._id];\r\n    data.isMultiple = true;\r\n\r\n    const { conversation } = await postDataAPI(\"/conversation\", data);\r\n\r\n    dispatch({\r\n      type: ADD_CONVERSATION,\r\n      payload: { conversation },\r\n    });\r\n\r\n    handleCloseModal();\r\n  };\r\n\r\n  return (\r\n    <div className=\"create_room_modal\">\r\n      <div className=\"container\">\r\n        <h3 className=\"title\">Create New Room Chat</h3>\r\n\r\n        <div className=\"content\">\r\n          <div className=\"content-left\">\r\n            <h4>Add friends to the room</h4>\r\n\r\n            {/* List friend */}\r\n\r\n            <div className=\"list_friend\">\r\n              {friends.map((friend) => (\r\n                <div className=\"friend\" key={friend?._id}>\r\n                  <div className=\"friend-info\">\r\n                    <Avatar user={friend} link={false} isStatus={false} />\r\n                    <p className=\"friend-name\">{friend?.userName}</p>\r\n                  </div>\r\n                  <div className=\"button-actions\">\r\n                    <button\r\n                      type=\"button\"\r\n                      className=\"btn btn-success\"\r\n                      onClick={() =>\r\n                        dispatch({\r\n                          type: ADD_FRIEND_TO_ROOM,\r\n                          payload: friend,\r\n                        })\r\n                      }\r\n                    >\r\n                      Add\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"content-right\">\r\n            <h4>Room information you want to create</h4>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"name-room\">Name Room</label>\r\n              <input\r\n                ref={nameRef}\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"name-room\"\r\n                placeholder=\"abc\"\r\n                required\r\n              />\r\n            </div>\r\n\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"desc-room\">Description</label>\r\n              <input\r\n                ref={descRef}\r\n                type=\"text\"\r\n                className=\"form-control\"\r\n                id=\"desc-room\"\r\n                placeholder=\"abc\"\r\n              />\r\n            </div>\r\n\r\n            <div className=\"custom-file\">\r\n              <input\r\n                onChange={(e) => setFile(e.target.files[0])}\r\n                type=\"file\"\r\n                className=\"custom-file-input\"\r\n                id=\"validatedCustomFile\"\r\n              />\r\n              <label\r\n                className=\"custom-file-label\"\r\n                htmlFor=\"validatedCustomFile\"\r\n              >\r\n                Choose Avatar...\r\n              </label>\r\n            </div>\r\n\r\n            <div className=\"display_room_avatar\">\r\n              {file && <img src={URL.createObjectURL(file)} alt=\"\" />}\r\n            </div>\r\n\r\n            {friendAdds.length > 0 && (\r\n              <>\r\n                <h5 className=\"members mt-4\">members</h5>\r\n                <div className=\"list_friend\">\r\n                  {friendAdds.map((friend) => (\r\n                    <div className=\"friend\" key={friend?._id}>\r\n                      <div className=\"friend-info\">\r\n                        <Avatar user={friend} link={false} isStatus={false} />\r\n                        <p className=\"friend-name\">{friend?.userName}</p>\r\n                      </div>\r\n                      <div className=\"button-actions\">\r\n                        <button\r\n                          type=\"button\"\r\n                          className=\"btn btn-success\"\r\n                          onClick={() =>\r\n                            dispatch({\r\n                              type: REMOVE_FRIEND_TO_ROOM,\r\n                              payload: friend,\r\n                            })\r\n                          }\r\n                        >\r\n                          Delete\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        </div>\r\n        <div className=\"footer\">\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-danger\"\r\n            onClick={handleCloseModal}\r\n          >\r\n            Cancel\r\n          </button>\r\n          <button type=\"button\" className=\"btn btn-info\" onClick={handleSubmit}>\r\n            Save\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ModalCreateRoomChat;\r\n","import React, { useEffect, useMemo } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { SET_CALL, SET_USER_STREAM } from \"../../redux/actions\";\r\nimport ModalCall from \"../../components/modalCall/ModalCall\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { addVideoStream, openStream } from \"../../helpers/media\";\r\n\r\nconst Call = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const { friendChat } = useSelector((state) => state.chat);\r\n  const {\r\n    conversationChat: { _id },\r\n  } = useSelector((state) => state.chat);\r\n  const { socket } = useSelector((state) => state.network);\r\n  const peer = useSelector((state) => state.peer);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const {\r\n    userStream,\r\n    isCall,\r\n    isVideo,\r\n    userReciverCall,\r\n    roomCallId,\r\n    isAnswer,\r\n    conversationId,\r\n  } = useSelector((state) => state.call);\r\n\r\n  const call = async (isVideo) => {\r\n    try {\r\n      const response = await getDataAPI(`/room-chat?conversationId=${_id}`);\r\n\r\n      const { roomCall } = response;\r\n\r\n      const stream = await openStream(isVideo);\r\n      dispatch({\r\n        type: SET_USER_STREAM,\r\n        payload: stream,\r\n      });\r\n\r\n      if (roomCall) {\r\n        const { conversationId, isVideo, roomCallId } = roomCall;\r\n\r\n        dispatch({\r\n          type: SET_CALL,\r\n          payload: {\r\n            isVideo,\r\n            isAnswer: true,\r\n            isCall: true,\r\n            isCreate: false,\r\n            conversationId: conversationId,\r\n          },\r\n        });\r\n\r\n        addVideoStream(stream, true);\r\n\r\n        if (!socket) return;\r\n\r\n        socket.emit(\"joinRoomCall\", {\r\n          roomCallId,\r\n          peerId: peer._id,\r\n          isCreate: false,\r\n          conversationId,\r\n          isVideo,\r\n          isNext: true,\r\n          userJoinCallId: userCurrent?._id,\r\n          userName: userCurrent?.userName,\r\n          streamId: stream.id,\r\n        });\r\n      } else {\r\n\r\n        dispatch({\r\n          type: SET_CALL,\r\n          payload: {\r\n            isVideo,\r\n            userSenderCall: null,\r\n            userReciverCall: friendChat,\r\n            isSenderCall: true,\r\n            roomCallId: uuidv4(),\r\n            isCall: true,\r\n            isCreate: true,\r\n            conversationId: _id,\r\n          },\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", { err });\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!socket || !userCurrent || !isCall || !userStream) return;\r\n    if (!isAnswer) {\r\n      socket?.emit(\"createCall\", {\r\n        isVideo,\r\n        sender: {\r\n          profilePicture: userCurrent.profilePicture,\r\n          userName: userCurrent.userName,\r\n          _id: userCurrent?._id,\r\n        },\r\n        conversationId,\r\n        receiverId: userReciverCall?._id,\r\n        roomCallId,\r\n        isCreate: true,\r\n        streamId: userStream.id,\r\n      });\r\n    }\r\n  }, [socket, userCurrent, isCall, userStream, isAnswer]);\r\n\r\n  return (\r\n    <>\r\n      <div className=\"icon-call\">\r\n        <i className=\"fa-solid fa-phone\" onClick={() => call(false)}></i>\r\n        <i className=\"fa-solid fa-video\" onClick={() => call(true)}></i>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Call;\r\n","import { Cancel } from \"@material-ui/icons\";\r\nimport React from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { REMOVE_FILE } from \"../../redux/actions\";\r\n\r\nconst DisplayImageMessage = () => {\r\n  const { files } = useSelector((state) => state.message);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div\r\n      className=\"display-image-message\"\r\n      style={{\r\n        padding: `${files.length && \"10px\"}`,\r\n      }}\r\n    >\r\n      {files.map((file) => (\r\n        <div className=\"imgMessage\" key={file.uuid}>\r\n          <img src={URL.createObjectURL(file)} />\r\n          <span\r\n            className=\"imgCancel\"\r\n            onClick={() =>\r\n              dispatch({\r\n                type: REMOVE_FILE,\r\n                payload: file.uuid,\r\n              })\r\n            }\r\n          >\r\n            <Cancel />\r\n          </span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayImageMessage;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { SET_FILES } from \"../../redux/actions\";\r\nimport DisplayImageMessage from \"./DisplayImageMessage\";\r\n\r\nconst CreateMessage = ({ createNewMessage }) => {\r\n  const [isTyping, setIsTyping] = useState(false);\r\n\r\n  const messageRef = useRef();\r\n\r\n  const { files } = useSelector((state) => state.message);\r\n  const { conversationChat } = useSelector((state) => state.chat);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!isTyping) return;\r\n\r\n    socket?.emit(\"typing\", {\r\n      receiverId: conversationChat?.friend?._id,\r\n      conversationId: conversationChat?._id,\r\n    });\r\n  }, [isTyping]);\r\n\r\n  const handleSubmit = () => {\r\n    createNewMessage(messageRef.current.value);\r\n    messageRef.current.value = \"\";\r\n    messageRef.current.focus();\r\n  };\r\n\r\n  return (\r\n    <form\r\n      className={`input ${!conversationChat && \"disable\"} ${\r\n        files.length && \"files\"\r\n      }`}\r\n      onSubmit={(e) => {\r\n        e.preventDefault();\r\n        handleSubmit();\r\n      }}\r\n    >\r\n      <label htmlFor={conversationChat?._id} className=\"icon-camera\">\r\n        <i className=\"fas fa-camera\"></i>\r\n      </label>\r\n      <input\r\n        style={{ display: \" none\" }}\r\n        type={\"file\"}\r\n        id={conversationChat?._id}\r\n        accept=\".png,.jpeg,.jpg\"\r\n        multiple\r\n        onChange={(e) => {\r\n          const data = Array.from(e.target.files);\r\n\r\n          dispatch({\r\n            type: SET_FILES,\r\n            payload: [\r\n              ...data.map((file) => {\r\n                file.uuid = uuidv4();\r\n                return file;\r\n              }),\r\n              ...files,\r\n            ],\r\n          });\r\n        }}\r\n      />\r\n\r\n      <i className=\"far fa-laugh-beam\"></i>\r\n\r\n      <div className=\"inputContainer\">\r\n        <DisplayImageMessage />\r\n        <div className=\"inputCreate\">\r\n          <input\r\n            ref={messageRef}\r\n            placeholder=\"Aa\"\r\n            type=\"text\"\r\n            onChange={() => setIsTyping(true)}\r\n            onBlur={() => setIsTyping(false)}\r\n          />\r\n          <img\r\n            src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAARpJREFUSEu9lIERwUAQRX8qoBNUQgeUoAQqQAd0QAdUgA7ogA7MyyyTObncJhE7kzFD/Hd/999m6riyjvX1d8BFUk/SQtLuF+5CBw8DoH2TtJW0kcT3jSoE7CWNAyXE101BIWAuaRU5KiAOsDR3LkchYCjp7PgnrXOBylJUnEOKhSNmdIy9WAbAxcweEuUpADj6AqXuwcRA4eBjUGJOID4RTwHeQv2Cq4HDEqAR79UBTA1CC1N1lZS/lwLQIoT59BTCtIiU5RUb8vu0tMZTJ1svriHXienBTuyOqfeikRIWIvuqsuqsiqetCpdwbAZlyw5hBsdTe6tWreu7paGRcMwBF4Tk0IZP1FJ9rvo9dQ/aaEfvQWvRokDnDl64CTgZWvgaSwAAAABJRU5ErkJggg==\"\r\n            onClick={handleSubmit}\r\n          />\r\n        </div>\r\n      </div>\r\n      <i className=\"fas fa-microphone\"></i>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default CreateMessage;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst DisplayMessageContent = ({ message }) => {\r\n  const [user, setUser] = useState();\r\n\r\n  const {\r\n    conversationChat: { listMembers },\r\n  } = useSelector((state) => state.chat);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  useEffect(() => {\r\n    if (!message || !listMembers) return;\r\n\r\n    let userSend;\r\n    if (message.senderId === userCurrent?._id) userSend = { ...userCurrent };\r\n    else {\r\n      userSend = listMembers.find((member) => member?._id === message.senderId);\r\n    }\r\n\r\n    setUser({\r\n      profilePicture: userSend?.profilePicture,\r\n      userName: userSend?.userName,\r\n    });\r\n  }, [message, listMembers, userCurrent]);\r\n\r\n  return (\r\n    <>\r\n      {message?.isNotify ? (\r\n        message?.senderId ? (\r\n          <div\r\n            className={`message ${\r\n              message.senderId === userCurrent?._id ? \"user\" : \"friend\"\r\n            }`}\r\n          >\r\n            {message.senderId === userCurrent?._id\r\n              ? message?.notify[0]\r\n              : message?.notify[1]}\r\n          </div>\r\n        ) : (\r\n          <div className={`message notify`}>{message.notify[0]}</div>\r\n        )\r\n      ) : (\r\n        message?.text && (\r\n          <div\r\n            className={`message ${\r\n              message.senderId === userCurrent?._id ? \"user\" : \"friend\"\r\n            }`}\r\n          >\r\n            {message.text}\r\n          </div>\r\n        )\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DisplayMessageContent;\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport { deleteDataAPI } from \"../../api/fetchData\";\r\nimport { UPDATE_LAST_MESSAGE } from \"../../redux/actions\";\r\nimport DisplayMessageContent from \"./DisplayMessageContent\";\r\n\r\nconst DisplayMessage = ({ updateConversation, messages, setMessages }) => {\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { conversationChat } = useSelector((state) => state.chat);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const messageRef = useRef();\r\n\r\n  useEffect(() => {\r\n    if (messageRef.current) {\r\n      messageRef.current.scrollIntoView({\r\n        behavior: \"smooth\",\r\n        block: \"end\",\r\n        inline: \"nearest\",\r\n      });\r\n    }\r\n  }, [messages]);\r\n\r\n  const removeMessage = async (message) => {\r\n    const lastMessage = messages[messages.length - 1];\r\n\r\n    try {\r\n      const response = await deleteDataAPI(`/message/${message?._id}`);\r\n\r\n      let newLastMessage = null;\r\n\r\n      if (lastMessage?._id === message?._id) {\r\n        newLastMessage = {\r\n          conversationId: message.conversationId,\r\n          senderId: userCurrent?._id,\r\n          message: \" has withdrawn the message\",\r\n        };\r\n\r\n        updateConversation({\r\n          conversationId: message?.conversationId,\r\n          lastMessage: [userCurrent?._id, \" has withdrawn the message\"],\r\n        });\r\n\r\n        dispatch({\r\n          type: UPDATE_LAST_MESSAGE,\r\n          payload: newLastMessage,\r\n        });\r\n      }\r\n\r\n      const { newMessage } = response;\r\n\r\n      // toast.success(message, { autoClose: 2000 });\r\n\r\n      setMessages((prev) =>\r\n        prev.map((item) => (item._id == newMessage?._id ? newMessage : item))\r\n      );\r\n\r\n      socket.emit(\"removeMessage\", {\r\n        newMessage,\r\n        receverId: conversationChat.members.find(\r\n          (memberId) => memberId !== userCurrent?._id\r\n        ),\r\n        lastMessage: newLastMessage,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {messages.map((message) => (\r\n        <div className={`messageContent`} key={message?._id} ref={messageRef}>\r\n          <DisplayMessageContent message={message} />\r\n\r\n          {!message?.notify && (\r\n            <div\r\n              className={`imgsContainer ${!message?.text && \"add-space\"} ${\r\n                message.senderId === userCurrent?._id ? \"user\" : \"friend\"\r\n              }`}\r\n            >\r\n              <div className={`imgs `}>\r\n                {message.images.map((img) => (\r\n                  <div className=\"img\" key={img.public_id}>\r\n                    <img src={img.url} />\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n          )}\r\n\r\n          <div\r\n            className={`time ${\r\n              (message?.notify && \"notify\") ||\r\n              (message.senderId === userCurrent?._id && \"user\")\r\n            }`}\r\n          >\r\n            {moment(message?.createdAt).format(\"HH:mm\")}\r\n          </div>\r\n\r\n          {!message.isDeleted && message.senderId === userCurrent?._id && (\r\n            <span className=\"CrudMessage\">\r\n              <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAFBJREFUSEtjZKAxYKSx+Qwjy4L/aMFJlO+JUgQ1eNQC2iRYUuKALBeQYsFoJBMMYpoHEUEXYFNASiTT3AKaB9GoBWTFIUFNgyoVEXTtgOQDAEM9DBleh0KcAAAAAElFTkSuQmCC\" />\r\n\r\n              <div className=\"buttonActions\">\r\n                <button type={\"button\"} onClick={() => removeMessage(message)}>\r\n                  Remove\r\n                </button>\r\n              </div>\r\n            </span>\r\n          )}\r\n        </div>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DisplayMessage;\r\n","import React from \"react\";\r\n\r\nconst Typing = () => {\r\n  return (\r\n    <>\r\n      <div className=\"message stark\">\r\n        <div className=\"typing typing-1\"></div>\r\n        <div className=\"typing typing-2\"></div>\r\n        <div className=\"typing typing-3\"></div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Typing;\r\n","import { getDataAPI, postDataAPI } from \"../../api/fetchData\";\r\n\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport Call from \"./Call\";\r\nimport CreateMessage from \"./CreateMessage\";\r\nimport DisplayMessage from \"./DisplayMessage\";\r\nimport Typing from \"./Typing\";\r\n\r\nimport { SET_FILES, UPDATE_LAST_MESSAGE } from \"../../redux/actions\";\r\n\r\nimport MessagePretty from \"../../components/MessagePretty/MessagePretty\";\r\nimport { addElment, displayName } from \"../../helpers\";\r\nimport { imageUpload } from \"../../helpers/image\";\r\n\r\nconst ChatRoom = () => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [hasTyping, setHasTyping] = useState(false);\r\n\r\n  const { conversationChat } = useSelector((state) => state.chat);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { files } = useSelector((state) => state.message);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (!socket) return;\r\n\r\n    const handleSetTyping = (conversationId) => {\r\n      if (conversationChat?._id !== conversationId) return;\r\n      if (isMount) setHasTyping(true);\r\n    };\r\n\r\n    const updateListMessage = ({ newMessage, lastMessage }) => {\r\n      if (lastMessage) {\r\n        dispatch({\r\n          type: UPDATE_LAST_MESSAGE,\r\n          payload: lastMessage,\r\n        });\r\n      }\r\n\r\n      if (newMessage?.conversationId === conversationChat?._id) {\r\n        setMessages((prev) =>\r\n          prev.map((message) =>\r\n            message?._id === newMessage?._id ? newMessage : message\r\n          )\r\n        );\r\n      }\r\n    };\r\n\r\n    const updateFriendConversation = ({ userDisconnectId, time }) => {\r\n      // if (friendChat?._id === userDisconnectId) {\r\n      //   dispatch({\r\n      //     type: UPDATE_FRIEND_CHAT,\r\n      //     payload: time,\r\n      //   });\r\n      // }\r\n    };\r\n\r\n    socket.on(\"displayTyping\", handleSetTyping);\r\n    socket.on(\"updateMessage\", updateListMessage);\r\n    socket.on(\"friendLogout\", updateFriendConversation);\r\n\r\n    return () => {\r\n      isMount = false;\r\n      socket?.off(\"displayTyping\", handleSetTyping);\r\n      socket?.off(\"updateMessage\", updateListMessage);\r\n      socket?.off(\"friendLogout\", updateFriendConversation);\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getMessages = async () => {\r\n      if (conversationChat?._id) {\r\n        try {\r\n          const response = await getDataAPI(`/message/${conversationChat._id}`);\r\n          const { message, messages } = response;\r\n\r\n          // toast.success(message, { autoClose: 2000 });\r\n          if (isMount) {\r\n            setMessages(messages);\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n\r\n    if (conversationChat) getMessages();\r\n\r\n    return () => (isMount = false);\r\n  }, [conversationChat]);\r\n\r\n  useEffect(() => {\r\n    const handleReceiveMessage = ({ newMessage, receiverId }) => {\r\n      const { conversationId, text, senderId } = newMessage;\r\n\r\n      dispatch({\r\n        type: UPDATE_LAST_MESSAGE,\r\n        payload: newMessage,\r\n      });\r\n\r\n      if (!conversationChat) return;\r\n\r\n      if (conversationId === conversationChat._id) {\r\n        updateConversation({\r\n          receiverId,\r\n          conversationId,\r\n          isRead: true,\r\n        });\r\n\r\n        setMessages(\r\n          (prev) =>\r\n            addElment(prev, newMessage, (array, newMessage) =>\r\n              array.find((el) => el?._id === newMessage?._id)\r\n            ),\r\n          false\r\n        );\r\n\r\n        setHasTyping(false);\r\n      }\r\n    };\r\n\r\n    socket?.on(\"getMessage\", handleReceiveMessage);\r\n\r\n    return () => {\r\n      socket?.off(\"getMessage\", handleReceiveMessage);\r\n    };\r\n  }, [socket, conversationChat]);\r\n\r\n  const updateConversation = async (data) => {\r\n    try {\r\n      const response = await postDataAPI(\r\n        `/conversation/update-conversation`,\r\n        data\r\n      );\r\n\r\n      const { message } = response;\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const createNewMessage = async (text) => {\r\n    if (!text && !files.length) return;\r\n    try {\r\n      const messageCreate = {\r\n        conversationId: conversationChat?._id,\r\n        senderId: userCurrent?._id,\r\n      };\r\n\r\n      if (text) messageCreate.text = text;\r\n\r\n      const images = await imageUpload(files);\r\n      messageCreate.images = [...images];\r\n\r\n      const response = await postDataAPI(`/message`, messageCreate);\r\n      const { message, newMessage } = response;\r\n\r\n      updateConversation({\r\n        conversationId: conversationChat?._id,\r\n        reads: [userCurrent?._id],\r\n      });\r\n\r\n      dispatch({\r\n        type: UPDATE_LAST_MESSAGE,\r\n        payload: newMessage,\r\n      });\r\n\r\n      dispatch({\r\n        type: SET_FILES,\r\n        payload: [],\r\n      });\r\n\r\n      socket?.emit(\"sendMessage\", {\r\n        receivers: conversationChat.members,\r\n        newMessage,\r\n      });\r\n\r\n      // toast.success(message, { autoClose: 2000 });\r\n\r\n      setMessages((prev) => [...prev, newMessage]);\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"contact bar\">\r\n        {conversationChat && (\r\n          <>\r\n            <div className=\"pic\">\r\n              {conversationChat.images &&\r\n                (conversationChat.images.length === 1 ? (\r\n                  <img\r\n                    className=\"one-img\"\r\n                    src={conversationChat.images[0].src}\r\n                    alt=\"\"\r\n                  />\r\n                ) : (\r\n                  <div className=\"multiple-img\">\r\n                    {conversationChat.images.map((img) => (\r\n                      <img src={img.src} key={img.key} />\r\n                    ))}\r\n                  </div>\r\n                ))}\r\n            </div>\r\n            <div className=\"contact-info\">\r\n              <div className=\"name\">\r\n                {displayName(conversationChat.nameConversation)}\r\n              </div>\r\n            </div>\r\n            <Call />\r\n          </>\r\n        )}\r\n      </div>\r\n      <div className=\"messages\" id=\"chat\">\r\n        {conversationChat ? (\r\n          <div className=\"messagesContainer\">\r\n            <DisplayMessage\r\n              updateConversation={updateConversation}\r\n              setMessages={setMessages}\r\n              messages={messages}\r\n            />\r\n            {hasTyping && <Typing />}\r\n          </div>\r\n        ) : (\r\n          <MessagePretty mess=\"Chọn Bạn Để Chat\" />\r\n        )}\r\n      </div>\r\n      <CreateMessage createNewMessage={createNewMessage} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChatRoom;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { DISPLAY_CONVERSATION_PENDING, SET_IS_SHOW } from \"../../redux/actions\";\r\nimport \"./optionsMessage.scss\";\r\n\r\nconst OptionsMessage = () => {\r\n  const [number, setNumber] = useState(0);\r\n\r\n  const { listConversation } = useSelector((state) => state.chat);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!listConversation || !userCurrent) return;\r\n\r\n    const { _id } = userCurrent;\r\n\r\n    const numberSet = listConversation.reduce((prevState, conversation) => {\r\n      const {status} = conversation;\r\n      return status.includes(_id) ? prevState : prevState + 1;\r\n    }, 0);\r\n\r\n    setNumber(numberSet);\r\n  }, [listConversation, userCurrent]);\r\n\r\n  const displayConversationPending = () => {\r\n    dispatch({\r\n      type: SET_IS_SHOW,\r\n      payload: true,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <h2 className=\"options-message\" onClick={displayConversationPending}>\r\n      <div className=\"number\">\r\n        <i className=\"fa-solid fa-message\"></i>\r\n        <span>{number}</span>\r\n      </div>\r\n      Message waiting\r\n    </h2>\r\n  );\r\n};\r\n\r\nexport default OptionsMessage;\r\n","import \"./messenger.scss\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataAPI, postDataAPI } from \"../../api/fetchData\";\r\n\r\nimport Conversation from \"../../components/conversation/Conversation\";\r\nimport ModalCreateRoomChat from \"../../components/ModalCreateRoomChat/ModalCreateRoomChat\";\r\nimport ChatRoom from \"./ChatRoom\";\r\nimport OptionsMessage from \"./OptionsMessage\";\r\n\r\nimport { SET_CREATE_ROOM } from \"../../redux/actions\";\r\nimport {\r\n  SET_CONVERSATION_CHAT,\r\n  SET_LIST_CONVERSATION,\r\n} from \"../../redux/actions/chatActions\";\r\n\r\nexport default function Messenger() {\r\n  const [conversationDisplays, setConversationDisplays] = useState([]);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { isCreate } = useSelector((state) => state.createRoomChat);\r\n  const { conversationChat, listConversation, isShowConversationPending } =\r\n    useSelector((state) => state.chat);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getConversations = async () => {\r\n      if (userCurrent) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/conversation/get-all-conversations`\r\n          );\r\n\r\n          let { message, conversations } = response;\r\n\r\n          // toast.success(message, { autoClose: 2000 });\r\n\r\n          conversations = conversations.map((conversation) => {\r\n            if (conversation.roomCallId) {\r\n              return {\r\n                ...conversation,\r\n                lastMessage: [\"notify\", `${\"Conversation going on\"}`],\r\n              };\r\n            }\r\n\r\n            return conversation;\r\n          });\r\n\r\n          if (isMount) {\r\n            dispatch({\r\n              type: SET_LIST_CONVERSATION,\r\n              payload: {\r\n                userId: userCurrent?._id,\r\n                conversations,\r\n              },\r\n            });\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    getConversations();\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent]);\r\n\r\n  useEffect(() => {\r\n    if (!listConversation || !userCurrent) return;\r\n\r\n    const { _id } = userCurrent;\r\n\r\n    let data;\r\n\r\n    if (isShowConversationPending) {\r\n      data = listConversation.filter(\r\n        (conversation) => !conversation.status.includes(_id)\r\n      );\r\n    } else {\r\n      data = listConversation.filter((conversation) =>\r\n        conversation.status.includes(_id)\r\n      );\r\n    }\r\n\r\n    setConversationDisplays(data);\r\n  }, [listConversation, isShowConversationPending, userCurrent]);\r\n\r\n  const handleChosseCurrentChat = async (conversation) => {\r\n    if (!conversationChat || conversation?._id !== conversationChat._id) {\r\n      const { _id } = userCurrent;\r\n      const { status, reads } = conversation;\r\n\r\n      const dataUpdate = {};\r\n      let isChangeType = false;\r\n\r\n      if (!status.includes(_id)) {\r\n        isChangeType = true;\r\n\r\n        dataUpdate.status = [...status, _id];\r\n      }\r\n\r\n      if (!reads.includes(_id)) {\r\n        dataUpdate.reads = [...reads, _id];\r\n      }\r\n\r\n      if (Object.entries(dataUpdate).length) {\r\n        const response = await postDataAPI(\r\n          \"/conversation/update-conversation\",\r\n          {\r\n            conversationId: conversation?._id,\r\n            ...dataUpdate,\r\n          }\r\n        );\r\n      }\r\n\r\n      dispatch({\r\n        type: SET_CONVERSATION_CHAT,\r\n        payload: {\r\n          conversationChat: {\r\n            ...conversation,\r\n            ...dataUpdate,\r\n          },\r\n          isChangeType,\r\n        },\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"center\">\r\n        <div className=\"contacts\">\r\n          <div className=\"options-chat\">\r\n            <i className=\"fas fa-bars fa-2x\"></i>\r\n            <div className=\"list_options_chat\">\r\n              <button\r\n                onClick={() => {\r\n                  dispatch({\r\n                    type: SET_CREATE_ROOM,\r\n                    payload: true,\r\n                  });\r\n                }}\r\n              >\r\n                Create chat room\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n          <OptionsMessage />\r\n\r\n          <div className=\"contacts-container\">\r\n            {conversationDisplays &&\r\n              conversationDisplays.map((conversation) => (\r\n                <div\r\n                  className=\"contact\"\r\n                  key={conversation?._id}\r\n                  onClick={() => {\r\n                    handleChosseCurrentChat(conversation);\r\n                  }}\r\n                >\r\n                  <Conversation conversation={conversation} />\r\n                </div>\r\n              ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"chat\">\r\n          <ChatRoom conversationChat={conversationChat} />\r\n        </div>\r\n      </div>\r\n\r\n      {isCreate && <ModalCreateRoomChat />}\r\n    </>\r\n  );\r\n}\r\n","import { Chat } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport Messenger from \"../../pages/messenger/Messenger\";\r\nimport { INCREASE_NUMBER_UNREAD, SET_CHAT } from \"../../redux/actions\";\r\n\r\nconst IconMessage = () => {\r\n  const [number, setNumber] = useState(0);\r\n\r\n  const { isChat, conversationUnReads } = useSelector((state) => state.chat);\r\n  const { elClick } = useSelector((state) => state.global);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { conversationChat } = useSelector((state) => state.chat);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const messageRef = useRef();\r\n  useEffect(() => {\r\n    if (!elClick) return;\r\n    if (\r\n      messageRef.current.contains(elClick) ||\r\n      elClick.classList.contains(\"messSkip\")\r\n    )\r\n      return;\r\n    dispatch({\r\n      type: SET_CHAT,\r\n      payload: { isChat: false },\r\n    });\r\n  }, [elClick]);\r\n\r\n  useEffect(() => {\r\n    if (!conversationUnReads) return;\r\n\r\n    setNumber(conversationUnReads.length);\r\n  }, [conversationUnReads]);\r\n\r\n  useEffect(() => {\r\n    const updateNumberConversationUnRead = ({ newMessage }) => {\r\n      const { conversationId } = newMessage;\r\n\r\n      if (!conversationChat || conversationChat?._id !== conversationId) {\r\n        if (!conversationUnReads.includes(conversationId)) {\r\n          dispatch({\r\n            type: INCREASE_NUMBER_UNREAD,\r\n          });\r\n        }\r\n      }\r\n    };\r\n\r\n    socket?.on(\"getMessage\", updateNumberConversationUnRead);\r\n\r\n    return () => {\r\n      socket?.off(\"getMessage\", updateNumberConversationUnRead);\r\n    };\r\n  }, [socket, conversationUnReads, conversationChat]);\r\n\r\n  const toogleMessage = () => {\r\n    const data = {\r\n      isChat: !isChat,\r\n    };\r\n\r\n    if (isChat) {\r\n      data.conversationChat = null;\r\n    }\r\n\r\n    dispatch({\r\n      type: SET_CHAT,\r\n      payload: data,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div ref={messageRef}>\r\n      <Chat onClick={toogleMessage} />\r\n      <span className=\"topbarIconBadge\">{number}</span>\r\n      {isChat && <Messenger />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IconMessage;\r\n","import React from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { deleteDataAPI, putDataAPI } from \"../../api/fetchData\";\r\nimport {\r\n  REMOVE_NOTIFICATION,\r\n  UPDATE_LIST_CONVERSATION,\r\n} from \"../../redux/actions\";\r\nimport \"./notificationAction.scss\";\r\n\r\nconst NotificationAction = ({ notification }) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleRemoveNotification = async () => {\r\n    try {\r\n      const response = await deleteDataAPI(`/notification/${notification._id}`);\r\n\r\n      const { message } = response;\r\n\r\n      toast.success(message, { autoClose: 1000 });\r\n\r\n      dispatch({\r\n        type: REMOVE_NOTIFICATION,\r\n        payload: notification?._id,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const handleUnReadNotification = async () => {\r\n    try {\r\n      const response = await putDataAPI(\r\n        `/notification/unRead/${notification._id}`\r\n      );\r\n\r\n      const { message, newNotification } = response;\r\n\r\n      toast.success(message, { autoClose: 1000 });\r\n\r\n      dispatch({\r\n        type: UPDATE_LIST_CONVERSATION,\r\n        payload: newNotification,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const readNotification = async () => {\r\n    try {\r\n      const response = await putDataAPI(`/notification/${notification._id}`);\r\n\r\n      const { message, newNotification } = response;\r\n\r\n      toast.success(message, { autoClose: 1000 });\r\n\r\n      dispatch({\r\n        type: UPDATE_LIST_CONVERSATION,\r\n        payload: newNotification,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"notificationCrudAction\">\r\n        <button\r\n          className={`${notification.isRead ? \"disable\" : \"\"} `}\r\n          onClick={readNotification}\r\n        >\r\n          Mark\r\n        </button>\r\n\r\n        <button\r\n          onClick={handleUnReadNotification}\r\n          className={`${!notification.isRead ? \"disable\" : \"\"} `}\r\n        >\r\n          Unread\r\n        </button>\r\n\r\n        <button onClick={handleRemoveNotification}>Remove</button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NotificationAction;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as timeago from \"timeago.js\";\r\nimport NotificationAction from \"./NotificationAction\";\r\nimport { getDataAPI, putDataAPI } from \"../../api/fetchData\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { UPDATE_LIST_CONVERSATION } from \"../../redux/actions\";\r\n\r\nconst DisplayNotifycation = ({ notification }) => {\r\n  const [user, setUser] = useState(null);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const fetchUser = async () => {\r\n      if (!notification?.senderId) return;\r\n\r\n      try {\r\n        const response = await getDataAPI(\r\n          `/user?userId=${notification?.senderId}`\r\n        );\r\n\r\n        const { user } = response;\r\n\r\n        if (isMount) {\r\n          setUser(user);\r\n        }\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n    fetchUser();\r\n\r\n    return () => {\r\n      isMount = false;\r\n    };\r\n  }, [notification]);\r\n\r\n  const updateReadNotification = async () => {\r\n    try {\r\n      if (!notification || notification?.isRead || !userCurrent) return;\r\n\r\n      const response = await putDataAPI(`/notification/${notification?._id}`);\r\n\r\n      const { message, notification: newNotification } = response;\r\n      dispatch({\r\n        type: UPDATE_LIST_CONVERSATION,\r\n        payload: newNotification,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"circle\"></div>\r\n      <span className=\"time\">{timeago.format(notification?.createdAt)}</span>\r\n      <p\r\n        className={`${notification?.isRead ? \"read\" : \"\"}`}\r\n        onClick={() => {\r\n          updateReadNotification();\r\n          navigate(notification?.link);\r\n        }}\r\n      >\r\n        <b>{user?.userName}</b>\r\n        {notification?.text.slice(\r\n          notification?.text.indexOf(user?.userName) + user?.userName?.length\r\n        )}\r\n      </p>\r\n      <NotificationAction notification={notification} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DisplayNotifycation;\r\n","export const debounce = (callback, delay, ...rest) => {\r\n  if (!delay) delay = 1000;\r\n  let timerId;\r\n\r\n  return () => {\r\n    if (timerId) {\r\n      clearTimeout(timerId);\r\n      timerId = null;\r\n    }\r\n\r\n    timerId = setTimeout(() => {\r\n      callback(...rest);\r\n    }, delay);\r\n  };\r\n};\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { deleteDataAPI, putDataAPI } from \"../../api/fetchData\";\r\nimport { debounce } from \"../../helpers/debounceFunction\";\r\nimport {\r\n  REMOVE_ALL_NOTIFICATION,\r\n  SET_NOTIFICATIONs_DISPLAY,\r\n  SET_TYPE_NOTIFICATION,\r\n} from \"../../redux/actions\";\r\n\r\nconst MenuNotifycation = () => {\r\n  const { isShowMenu, listNotifycation, type } = useSelector(\r\n    (state) => state.notification\r\n  );\r\n\r\n  const setNotifications = (type) => {\r\n    dispatch({\r\n      type: SET_TYPE_NOTIFICATION,\r\n      payload: type,\r\n    });\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n    let payload;\r\n\r\n    if (!listNotifycation) return;\r\n\r\n    if (type === \"all\") payload = listNotifycation;\r\n    else if (type === \"unread\") {\r\n      payload = listNotifycation.filter((notification) => !notification.isRead);\r\n    } else\r\n      payload = listNotifycation.filter((notification) => notification.isRead);\r\n\r\n    if (isMount) {\r\n      dispatch({\r\n        type: SET_NOTIFICATIONs_DISPLAY,\r\n        payload,\r\n      });\r\n    }\r\n\r\n    return () => (isMount = false);\r\n  }, [type]);\r\n\r\n  const removeAllNotification = async () => {\r\n    try {\r\n      const response = await deleteDataAPI(\r\n        `/notification/delete-all-notification`\r\n      );\r\n\r\n      const { message } = response;\r\n\r\n      dispatch({\r\n        type: REMOVE_ALL_NOTIFICATION,\r\n      });\r\n\r\n      toast.success(message, { autoClose: 1000 });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const readAllNotification = async () => {\r\n    try {\r\n      const response = await putDataAPI(`/notification/read-all-notification`);\r\n\r\n      const { message, notifications } = response;\r\n\r\n      toast.success(message, { autoClose: 1000 });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`menu ${isShowMenu && \"active\"}`}>\r\n      <ul>\r\n        <li\r\n          className=\"hvr-underline-from-left\"\r\n          onClick={debounce(setNotifications, 500, \"all\")}\r\n        >\r\n          <span className=\"fa-solid fa-border-all\"></span>All\r\n        </li>\r\n        <li\r\n          className=\"hvr-underline-from-left\"\r\n          onClick={debounce(setNotifications, 500, \"read\")}\r\n        >\r\n          <span className=\"fa-solid fa-check-double\"></span>Read\r\n        </li>\r\n        <li\r\n          className=\"hvr-underline-from-left\"\r\n          onClick={debounce(setNotifications, 500, \"unread\")}\r\n        >\r\n          <span className=\"fa-solid fa-rectangle-xmark\"></span>Un Read\r\n        </li>\r\n        <li\r\n          className=\"hvr-underline-from-left\"\r\n          onClick={debounce(removeAllNotification, 500)}\r\n        >\r\n          <span className=\"fa-solid fa-trash-can\"></span>Remove all\r\n        </li>\r\n        <li\r\n          className=\"hvr-underline-from-left\"\r\n          onClick={debounce(readAllNotification, 500)}\r\n        >\r\n         <span className=\"fa-solid fa-marker\"></span>Mark\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MenuNotifycation;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  ADD_NOTIFICATION,\r\n  ADD_NOTIFICATION_DISPLAY,\r\n  SET_SHOW_NOTIFICATION_MENU,\r\n} from \"../../redux/actions\";\r\nimport DisplayNotification from \"./DisplayNotification\";\r\nimport MenuNotifycation from \"./MenuNotifycation\";\r\nimport \"./notification.scss\";\r\n\r\nconst Notification = () => {\r\n  const { type, notificationDisplays, isShowMenu } = useSelector(\r\n    (state) => state.notification\r\n  );\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    const updateListNotification = ({ notification }) => {\r\n      if (type === \"all\" && type === \"read\") {\r\n        dispatch({\r\n          type: ADD_NOTIFICATION_DISPLAY,\r\n          payload: notification,\r\n        });\r\n      }\r\n\r\n      dispatch({\r\n        type: ADD_NOTIFICATION,\r\n        payload: notification,\r\n      });\r\n    };\r\n\r\n    socket.on(\"updateNotification\", updateListNotification);\r\n\r\n    return () => socket?.off(\"updateNotification\", updateListNotification);\r\n  }, [socket]);\r\n\r\n  return (\r\n    // <div\r\n    //   className=\"notifycationContainer\"\r\n    //   style={{\r\n    //     animation: \"\",\r\n    //   }}\r\n    // >\r\n    //   <div className=\"notificationOptions\">\r\n    //     <button\r\n    //       className=\"btn-notification allNotification\"\r\n    //\r\n    //     >\r\n    //       All Notification\r\n    //     </button>\r\n    //     <button\r\n    //\r\n    //       className=\"btn-notification notificationReads\"\r\n    //     >\r\n    //       Read\r\n    //     </button>\r\n    //     <button\r\n    //       className=\"btn-notification notificationNotReads\"\r\n    //\r\n    //     >\r\n    //       Unread\r\n    //     </button>\r\n    //     <button\r\n    //       className=\"btn-notification removeAllNotifycation\"\r\n    //\r\n    //     >\r\n    //       Remove all notifications\r\n    //     </button>\r\n    //     <button\r\n    //       className=\"btn-notification markAllAsRead\"\r\n    //\r\n    //     >\r\n    //       Mark all as read\r\n    //     </button>\r\n    //   </div>\r\n    //   {notificationDisplays &&\r\n    //     notificationDisplays.map((notification) => (\r\n    //       <DisplayNotification\r\n    //         notification={notification}\r\n    //         key={notification?._id}\r\n    //       />\r\n    //     ))}\r\n    // </div>\r\n\r\n    <div className=\"frame\">\r\n      <div className={`panel ${isShowMenu && \"show-menu\"}`}>\r\n        <div className=\"header flex\">\r\n          <div\r\n            className=\"menu-icon\"\r\n            onClick={() => dispatch({ type: SET_SHOW_NOTIFICATION_MENU })}\r\n          >\r\n            <div className={`dash-top ${isShowMenu && \"slide-top\"}`}></div>\r\n            <div className=\"dash-bottom\"></div>\r\n            <div className={`circle circle-1 ${isShowMenu && \"slide\"}`}></div>\r\n          </div>\r\n          <span className=\"title\">Notifications</span>\r\n        </div>\r\n\r\n        <div className=\"notifications clearfix\">\r\n          <div className=\"line\"></div>\r\n          {notificationDisplays &&\r\n            notificationDisplays.map((notification, idx) => (\r\n              <div\r\n                className=\"notification\"\r\n                key={notification?._id}\r\n                style={{\r\n                  animation: `here-am-i 0.5s ease-out ${0.4 + idx * 0.2}s`,\r\n                  animationFillMode: \"both\",\r\n                }}\r\n              >\r\n                <DisplayNotification\r\n                  key={notification?._id}\r\n                  notification={notification}\r\n                />\r\n              </div>\r\n            ))}\r\n        </div>\r\n      </div>\r\n\r\n      <MenuNotifycation />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Notification;\r\n","import { Notifications } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport {\r\n  INCREASE_NUMBER_NOTIFICATION_UNREAD,\r\n  SET_LIST_NOTIFICATION,\r\n  SET_NUMBER_NOTIFICATION_UNREAD,\r\n  SET_SHOW_NOTIFICATION,\r\n} from \"../../redux/actions\";\r\nimport Notification from \"../notification/Notification\";\r\nimport \"./iconNotification.scss\";\r\n\r\nconst IconNotification = () => {\r\n  const { number, isShow } = useSelector((state) => state.notification);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const { elClick } = useSelector((state) => state.global);\r\n  const dispatch = useDispatch();\r\n\r\n  const notifyRef = useRef();\r\n  useEffect(() => {\r\n    if (notifyRef.current.contains(elClick)) return;\r\n    dispatch({\r\n      type: SET_SHOW_NOTIFICATION,\r\n      payload: false,\r\n    });\r\n  }, [elClick]);\r\n\r\n  useEffect(() => {\r\n    if (!socket) return;\r\n\r\n    const updateNumberNotification = () => {\r\n      if (!isShow) {\r\n        dispatch({\r\n          type: INCREASE_NUMBER_NOTIFICATION_UNREAD,\r\n        });\r\n      }\r\n    };\r\n\r\n    socket.on(\"updateNotification\", updateNumberNotification);\r\n\r\n    return () => socket?.off(\"updateNotification\", updateNumberNotification);\r\n  }, [socket, isShow]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getConversation = async () => {\r\n      if (userCurrent && isShow) {\r\n        try {\r\n          const response = await getDataAPI(`/notification`);\r\n\r\n          const { message, notifications } = response;\r\n\r\n          const data = [];\r\n          notifications.forEach((notification) => {\r\n            !notification.isRead && data.push(notification);\r\n          });\r\n          notifications.forEach((notification) => {\r\n            notification.isRead && data.push(notification);\r\n          });\r\n\r\n          // toast.success(message, { autoClose: 1000 });\r\n          if (isMount) {\r\n            dispatch({\r\n              type: SET_LIST_NOTIFICATION,\r\n              payload: data,\r\n            });\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    getConversation();\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent, isShow]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getNumberNotificationNotRead = async () => {\r\n      if (userCurrent) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/notification/get-number-notification-not-read`\r\n          );\r\n\r\n          const { message, number } = response;\r\n\r\n          // toast.success(message, { autoClose: 1000 });\r\n          if (isMount) {\r\n            dispatch({\r\n              type: SET_NUMBER_NOTIFICATION_UNREAD,\r\n              payload: number,\r\n            });\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    getNumberNotificationNotRead();\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent]);\r\n\r\n  const toogleNotification = () => {\r\n    dispatch({\r\n      type: SET_SHOW_NOTIFICATION,\r\n      payload: !isShow,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div ref={notifyRef}>\r\n      <Notifications\r\n        className=\"svg-notification\"\r\n        style={{\r\n          cursor: \"pointer\",\r\n        }}\r\n        onClick={toogleNotification}\r\n      />\r\n      <span className=\"topbarIconBadge\">{number}</span>\r\n      <div className=\"my-btn-border-notification\"></div>\r\n      <div className=\"my-btn-1\"></div>\r\n      {isShow && <Notification />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IconNotification;\r\n","import React, { useMemo } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { deleteDataAPI, postDataAPI, putDataAPI } from \"../../api/fetchData\";\r\nimport { REMOVE_FRIEND_REQUEST } from \"../../redux/actions\";\r\n\r\nconst ButtonActionsFriendRequest = ({ friendRequest, user }) => {\r\n  const { type } = useSelector((state) => state.friendRequest);\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const status = useMemo(() => friendRequest.status, [friendRequest]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const acceptFriendRequest = async () => {\r\n    try {\r\n      if (friendRequest) {\r\n        const response = await putDataAPI(\r\n          `/friend-request/accept-friend-request`,\r\n          {\r\n            friendId: user?._id,\r\n            friendRequestId: friendRequest?._id,\r\n          }\r\n        );\r\n\r\n        const { message } = response;\r\n\r\n        toast.success(message, { autoClose: 1000 });\r\n\r\n        dispatch({\r\n          type: REMOVE_FRIEND_REQUEST,\r\n          payload: friendRequest?._id,\r\n        });\r\n\r\n        await postDataAPI(\"/notification\", {\r\n          link: \"\",\r\n          userId: user?._id,\r\n          text: userCurrent?.userName + \" has accepted your friend request\",\r\n        });\r\n\r\n        // socket?.emit(\"acceptFriendRequest\", {\r\n        //   friendId: user?._id,\r\n        //   userId: userCurrent?._id,\r\n        // });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const refuseFriendRequest = async () => {\r\n    try {\r\n      if (friendRequest) {\r\n        const response = await putDataAPI(`/friend-request/refuse-request`, {\r\n          friendRequestId: friendRequest?._id,\r\n        });\r\n\r\n        dispatch({\r\n          type: REMOVE_FRIEND_REQUEST,\r\n          payload: friendRequest?._id,\r\n        });\r\n\r\n        const { message } = response;\r\n\r\n        toast.success(message, { autoClose: 1000 });\r\n\r\n        // socket?.emit(\"changeFriendRequest\", {\r\n        //   friendId: user?._id,\r\n        //   status: \"\",\r\n        // });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const deleteFriendRequest = async () => {\r\n    try {\r\n      if (friendRequest) {\r\n        const response = await deleteDataAPI(\r\n          `/friend-request/${friendRequest?._id}`\r\n        );\r\n\r\n        dispatch({\r\n          type: REMOVE_FRIEND_REQUEST,\r\n          payload: friendRequest?._id,\r\n        });\r\n\r\n        const { message } = response;\r\n\r\n        toast.success(message, { autoClose: 1000 });\r\n\r\n        // socket?.emit(\"changeFriendRequest\", {\r\n        //   friendId: user?._id,\r\n        //   status: \"\",\r\n        // });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const sendToFriendRequest = async () => {\r\n    try {\r\n      if (friendRequest) {\r\n        const response = await putDataAPI(`/friend-request`, {\r\n          friendRequestId: friendRequest?._id,\r\n          status: 1,\r\n        });\r\n\r\n        dispatch({\r\n          type: REMOVE_FRIEND_REQUEST,\r\n          payload: friendRequest?._id,\r\n        });\r\n\r\n        const { message } = response;\r\n\r\n        toast.success(message, { autoClose: 1000 });\r\n\r\n        const responseCreateNotification = await postDataAPI(\"/notification\", {\r\n          link: \"\",\r\n          userId: user?._id,\r\n          text: userCurrent?.userName + \" sent a friend request\",\r\n        });\r\n\r\n        const { notification } = responseCreateNotification;\r\n\r\n        socket?.emit(\"createNotification\", { notification });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n        throw new Error(\"Friend Request not Exit\");\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"button-actions\">\r\n      {type === \"received\" ? (\r\n        <>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-primary\"\r\n            onClick={acceptFriendRequest}\r\n          >\r\n            Accept\r\n          </button>\r\n          <button\r\n            type=\"button\"\r\n            className=\"btn btn-secondary\"\r\n            onClick={refuseFriendRequest}\r\n          >\r\n            Refusse\r\n          </button>\r\n        </>\r\n      ) : (\r\n        <>\r\n          {status === 1 ? (\r\n            <>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-warning\"\r\n                onClick={deleteFriendRequest}\r\n              >\r\n                Cancel invitation\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-light\"\r\n                onClick={sendToFriendRequest}\r\n              >\r\n                Send to\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-danger\"\r\n                onClick={deleteFriendRequest}\r\n              >\r\n                Remove\r\n              </button>\r\n            </>\r\n          )}\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ButtonActionsFriendRequest;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport ButtonActionsFriendRequest from \"./ButtonActionsFriendRequest\";\r\n\r\nconst FriendRequest = ({ friendRequest }) => {\r\n  const [user, setUser] = useState();\r\n\r\n  const { type } = useSelector((state) => state.friendRequest);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const handleGetUser = async () => {\r\n      try {\r\n        const id =\r\n          type === \"received\"\r\n            ? friendRequest?.senderId\r\n            : friendRequest?.receiverId;\r\n        if (!id) {\r\n          toast.error(\"id user not found\", { autoClose: 1000 });\r\n          throw new Error(\"id user not found\");\r\n        }\r\n        const response = await getDataAPI(`/user?userId=${id}`);\r\n\r\n        const { user } = response;\r\n\r\n        if (isMount) setUser(user);\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n\r\n    handleGetUser();\r\n\r\n    return () => (isMount = false);\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      {user && (\r\n        <>\r\n          <div className=\"info\">\r\n            <Avatar height=\"60px\" width=\"60px\" user={user} />\r\n            <span>{user?.userName}</span>\r\n          </div>\r\n          <ButtonActionsFriendRequest\r\n            user={user}\r\n            friendRequest={friendRequest}\r\n          />\r\n        </>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FriendRequest;\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport FriendRequest from \"./FriendRequest\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { SET_LIST_FRIEND_REQUEST } from \"../../redux/actions\";\r\n\r\nconst DisplayFriendRequest = () => {\r\n  const { type, listFriendRequest } = useSelector(\r\n    (state) => state.friendRequest\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getFriendRequest = async () => {\r\n      if (type) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/friend-request/get-all-requests-${type}`\r\n          );\r\n\r\n          const { message, friendRequests } = response;\r\n\r\n          // toast.success(message, { autoClose: 2000 });\r\n          if (isMount) {\r\n            dispatch({\r\n              type: SET_LIST_FRIEND_REQUEST,\r\n              payload: friendRequests,\r\n            });\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    getFriendRequest();\r\n\r\n    return () => (isMount = false);\r\n  }, [type]);\r\n\r\n  return (\r\n    <>\r\n      {listFriendRequest &&\r\n        listFriendRequest.map((friendRequest) => (\r\n          <div className=\"friendRequest\" key={friendRequest?._id}>\r\n            <FriendRequest friendRequest={friendRequest} />\r\n          </div>\r\n        ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default DisplayFriendRequest;\r\n","import React from \"react\";\r\nimport \"./boxFriendRequests.scss\";\r\nimport DisplayFriendRequest from \"../friendRequest/DisplayFriendRequest\";\r\nimport { SET_TYPE } from \"../../redux/actions\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\nconst BoxFriendRequests = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <div className=\"boxFriendRequest nav-item dropdown\">\r\n      <h3 className=\"title\">Options</h3>\r\n      <div className=\"button-options\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-success\"\r\n          onClick={() =>\r\n            dispatch({\r\n              type: SET_TYPE,\r\n              payload: \"received\",\r\n            })\r\n          }\r\n        >\r\n          Friend request received\r\n        </button>\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-dark\"\r\n          onClick={() =>\r\n            dispatch({\r\n              type: SET_TYPE,\r\n              payload: \"sent\",\r\n            })\r\n          }\r\n        >\r\n          Friend request sent\r\n        </button>\r\n      </div>\r\n      <DisplayFriendRequest />\r\n      <div className=\"friendRequest\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BoxFriendRequests;\r\n","import { Person } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport BoxFriendRequests from \"./BoxFriendRequests\";\r\n\r\nconst IconPerson = () => {\r\n  const [isShowFriendRequests, setIsShowFriendRequests] = useState(false);\r\n  const { number: numberFriendRequest } = useSelector(\r\n    (state) => state.friendRequest\r\n  );\r\n  const { elClick } = useSelector((state) => state.global);\r\n\r\n  const divRef = useRef();\r\n  useEffect(() => {\r\n    if (divRef.current.contains(elClick)) return;\r\n    setIsShowFriendRequests(false);\r\n  }, [elClick]);\r\n\r\n  return (\r\n    <div ref={divRef}>\r\n      <Person onClick={() => setIsShowFriendRequests((prev) => !prev)} />\r\n      {isShowFriendRequests && <BoxFriendRequests />}\r\n      <span className=\"topbarIconBadge\">{numberFriendRequest}</span>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default IconPerson;\r\n","import { Search } from \"@material-ui/icons\";\r\nimport React, { useEffect, useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { debounce } from \"../../helpers/debounceFunction\";\r\nimport Avatar from \"../avatar/Avatar\";\r\n\r\nconst SeachUser = () => {\r\n  const [usersSearch, setUsersSearch] = useState();\r\n  const [isShowUsersSearch, setIsShowUsersSearch] = useState(false);\r\n  const searchInputRef = useRef();\r\n  const searchRef = useRef();\r\n  const navigate = useNavigate();\r\n\r\n  const { elClick } = useSelector((state) => state.global);\r\n\r\n  useEffect(() => {\r\n    if (searchRef.current.contains(elClick)) return;\r\n    setIsShowUsersSearch(false);\r\n  }, [elClick]);\r\n\r\n  const handleSearchUsers = async () => {\r\n    if (!searchInputRef?.current?.value) {\r\n      return;\r\n    }\r\n    try {\r\n      const response = await getDataAPI(\r\n        `/user/search-user/${searchInputRef.current.value}`\r\n      );\r\n\r\n      const { users } = response;\r\n\r\n      if (users.length) {\r\n        setIsShowUsersSearch(true);\r\n        setUsersSearch(users);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"searchbar\" ref={searchRef}>\r\n      <Search className=\"searchIcon\" />\r\n      <input\r\n        ref={searchInputRef}\r\n        placeholder=\"Search for friend, post or video\"\r\n        className=\"searchInput\"\r\n        onFocus={() => {\r\n          if (!isShowUsersSearch) setIsShowUsersSearch(true);\r\n        }}\r\n        onChange={debounce(handleSearchUsers, 2000)}\r\n      />\r\n\r\n      {usersSearch && isShowUsersSearch && (\r\n        <div className=\"displayUsersSearch\">\r\n          {usersSearch.map((user) => (\r\n            <div\r\n              className=\"userSearchContainer\"\r\n              key={user?._id}\r\n              onClick={() => navigate(`/profile/${user?._id}`)}\r\n            >\r\n              <Avatar user={user} />\r\n              <span>{user?.userName}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SeachUser;\r\n","import { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { ACCESS_TOKEN, REFRESH_TOKEN } from \"../../contants\";\r\nimport {\r\n  INCREASE_NUMBER_FRIEND_REQUEST,\r\n  SET_NUMBER_FRIEND_REQUEST,\r\n  SET_STATUS_CONVERSATION,\r\n  USER_LOGOUT,\r\n} from \"../../redux/actions\";\r\nimport IconMessage from \"./IconMessage\";\r\nimport IconNotifycation from \"./IconNotifycation\";\r\nimport IconPerson from \"./IconPerson\";\r\nimport SeachUser from \"./SeachUser\";\r\nimport \"./topbar.scss\";\r\n\r\nexport default function Topbar() {\r\n  const [notifications, setNotifications] = useState([]);\r\n  const [firstShowNotification, setFirstShowNotification] = useState(false);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getNumberFriendRequest = async () => {\r\n      try {\r\n        const response = await getDataAPI(`/friend-request/get-number`);\r\n\r\n        const { number } = response;\r\n\r\n        if (isMount) {\r\n          dispatch({\r\n            type: SET_NUMBER_FRIEND_REQUEST,\r\n            payload: number,\r\n          });\r\n        }\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n\r\n    getNumberFriendRequest();\r\n\r\n    return () => (isMount = false);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const updateNumberFriendRequest = () => {\r\n      dispatch({\r\n        type: INCREASE_NUMBER_FRIEND_REQUEST,\r\n      });\r\n    };\r\n\r\n    if (socket) {\r\n      socket.on(\"updateNotification\", updateNumberFriendRequest);\r\n    }\r\n\r\n    return () => socket?.off(\"updateNotification\", updateNumberFriendRequest);\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const handleUpdateNotification = ({ notification }) => {\r\n      if (isMount) {\r\n        setNotifications((prev) => [notification, ...prev]);\r\n        setFirstShowNotification(false);\r\n      }\r\n    };\r\n\r\n    if (socket) {\r\n      socket.on(\"updateNotification\", handleUpdateNotification);\r\n    }\r\n\r\n    return () => {\r\n      isMount = false;\r\n      socket?.off(\"updateNotification\", handleUpdateNotification);\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getNumberConversationUnWatch = async () => {\r\n      if (userCurrent) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/conversation/get-status-conversation`\r\n          );\r\n\r\n          const { conversations } = response;\r\n\r\n          dispatch({\r\n            type: SET_STATUS_CONVERSATION,\r\n            payload: conversations,\r\n          });\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    getNumberConversationUnWatch();\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent]);\r\n\r\n  const logOut = () => {\r\n    dispatch({\r\n      type: USER_LOGOUT,\r\n    });\r\n    localStorage.removeItem(REFRESH_TOKEN);\r\n    localStorage.removeItem(ACCESS_TOKEN);\r\n\r\n    socket?.emit(\"userLogOut\", userCurrent?._id);\r\n    navigate(\"/login\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"topbarContainer\">\r\n      <div className=\"topbarLeft\">\r\n        <Link to=\"/\" style={{ textDecoration: \"none\" }}>\r\n          <span className=\"logo\">CoderNoob</span>\r\n        </Link>\r\n      </div>\r\n      <div className=\"topbarCenter\">\r\n        <SeachUser />\r\n      </div>\r\n      <div className=\"topbarRight\">\r\n        <div className=\"topbarLinks\">\r\n          <span className=\"topbarLink\">Homepage</span>\r\n          <span className=\"topbarLink\">Timeline</span>\r\n        </div>\r\n        <div className=\"topbarIcons\">\r\n          <div className=\"topbarIconItem\">\r\n            <IconPerson />\r\n          </div>\r\n          <div className=\"topbarIconItem\">\r\n            <IconMessage />\r\n          </div>\r\n          <div className=\"topbarIconItem\">\r\n            <IconNotifycation />\r\n          </div>\r\n        </div>\r\n        <div onClick={logOut} className=\"logout\">\r\n          <i className=\"fa-solid fa-right-from-bracket topbarImg\"></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import \"./updateImage.scss\";\r\n\r\nimport React from \"react\";\r\nimport { PermMedia } from \"@material-ui/icons\";\r\n\r\nconst UpdateImage = ({ text, id, type }) => {\r\n  return (\r\n    <div className={`updateImage ${type}`}>\r\n      <button\r\n        data-toggle=\"modal\"\r\n        data-target={`#${id}`}\r\n        className=\"shareOption\"\r\n      >\r\n        <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n        <span className=\"shareOptionText\">{text}</span>\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UpdateImage;\r\n","import React from \"react\";\r\nimport \"./buttonSocials.scss\";\r\n\r\nconst ButtonSocials = () => {\r\n  return (\r\n    <ul className=\"button-socials\">\r\n      <li>\r\n        <span className=\"facebook\">\r\n          <i className=\"fab fa-facebook \" aria-hidden=\"true\"></i>\r\n        </span>\r\n      </li>\r\n      <li>\r\n        <span className=\"twitter\">\r\n          <i className=\"fab fa-twitter \" aria-hidden=\"true\"></i>\r\n        </span>\r\n      </li>\r\n      <li>\r\n        <span className=\"google\">\r\n          <i className=\"fab fa-google-plus-g \" aria-hidden=\"true\"></i>\r\n        </span>\r\n      </li>\r\n      <li>\r\n        <span className=\"linkedin\">\r\n          <i className=\"fab fa-linkedin \" aria-hidden=\"true\"></i>\r\n        </span>\r\n      </li>\r\n      <li>\r\n        <span className=\"instagram\">\r\n          <i className=\"fab fa-instagram \" aria-hidden=\"true\"></i>\r\n        </span>\r\n      </li>\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default ButtonSocials;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport Avatar from \"../../components/avatar/Avatar\";\r\nimport ButtonSocials from \"../../components/buttonSocials/ButtonSocials\";\r\nimport UpdateImage from \"../../components/UpdateImage/UpdateImage\";\r\n\r\nconst ProfileLeft = ({ idAvatar }) => {\r\n  const { userProfile } = useSelector((state) => state.profile);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  return (\r\n    <div className=\"left col-lg-4\">\r\n      <div className=\"photo-left\">\r\n        <Avatar\r\n          className=\"profile\"\r\n          width={\"200px\"}\r\n          height={\"200px\"}\r\n          user={userProfile}\r\n          isShowOffline={false}\r\n          link={false}\r\n        />\r\n        {userProfile?._id === userCurrent?._id && (\r\n          <UpdateImage id={idAvatar.current} type=\"avatar\" />\r\n        )}\r\n      </div>\r\n      <h4 className=\"name\">{userProfile?.userName}</h4>\r\n      <p className=\"info\">{userProfile?.email}</p>\r\n      <div className=\"stats row\">\r\n        <div className=\"stat col-4\">\r\n          <p className=\"number-stat\">{userProfile?.followers?.length}</p>\r\n          <p className=\"desc-stat\">Followers</p>\r\n        </div>\r\n        <div className=\"stat col-4\">\r\n          <p className=\"number-stat\">{userProfile?.followings?.length}</p>\r\n          <p className=\"desc-stat\">Following</p>\r\n        </div>\r\n        <div className=\"stat col-4\">\r\n          <p className=\"number-stat\">{userProfile?.friends?.length}</p>\r\n          <p className=\"desc-stat\">Friend</p>\r\n        </div>\r\n      </div>\r\n      <p className=\"desc\">{userProfile?.desc}</p>\r\n\r\n      <ButtonSocials />\r\n      {/* <div className=\"social\"> */}\r\n      {/* <i className=\"fa-brands fa-facebook-square\"></i>\r\n        <i className=\"fa-brands fa-twitter-square\"></i>\r\n        <i className=\"fa-brands fa-youtube-square\"></i>\r\n        <i className=\"fa-brands fa-github-square\"></i> */}\r\n      {/* </div> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileLeft;\r\n","import \"./editProfile.scss\";\r\n\r\nimport React, { useRef } from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\n\r\nimport { toast } from \"react-toastify\";\r\nimport { patchDataAPI } from \"../../api/fetchData\";\r\nimport { UPDATE_USER } from \"../../redux/actions\";\r\n\r\nconst EditProfile = ({ onEdit }) => {\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const nameRef = useRef();\r\n  const phoneRef = useRef();\r\n  const addressRef = useRef();\r\n  const descRef = useRef();\r\n  const relationshipRef = useRef();\r\n\r\n  const updateUser = async (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!nameRef.current.value) {\r\n      return toast.error(\"This field cannot be left blank\", {\r\n        autoClose: 1000,\r\n      });\r\n    }\r\n\r\n    try {\r\n      const data = {\r\n        userName: nameRef.current.value,\r\n        phone: phoneRef.current.value,\r\n        address: addressRef.current.value,\r\n        relationship: relationshipRef.current.value,\r\n        desc: descRef.current.value,\r\n        userId: userCurrent?._id,\r\n      };\r\n\r\n      const response = await patchDataAPI(\"/user/update-user\", data);\r\n\r\n      const { message, user: userUpdate } = response;\r\n\r\n      dispatch({\r\n        type: UPDATE_USER,\r\n        payload: userUpdate,\r\n      });\r\n\r\n      onEdit(false);\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form className=\"edit-profile\" onSubmit={updateUser}>\r\n      <div className=\"page\">\r\n        <label className=\"field field_v1\">\r\n          <input\r\n            defaultValue={userCurrent?.userName || \"\"}\r\n            ref={nameRef}\r\n            className=\"field__input\"\r\n            placeholder=\"e.g Coder Noob\"\r\n          />\r\n          <span className=\"field__label-wrap\">\r\n            <span className=\"field__label\">Full name</span>\r\n          </span>\r\n        </label>\r\n        <label className=\"field field_v2\">\r\n          <input\r\n            defaultValue={userCurrent?.email}\r\n            className=\"field__input\"\r\n            placeholder=\"abc@gmail.com\"\r\n            disabled\r\n          />\r\n          <span className=\"field__label-wrap\">\r\n            <span className=\"field__label\">Email</span>\r\n          </span>\r\n        </label>\r\n        <label className=\"field field_v3\">\r\n          <input\r\n            defaultValue={userCurrent?.address || \"\"}\r\n            ref={addressRef}\r\n            className=\"field__input\"\r\n            placeholder=\"e.g Nam Dinh, Viet Nam\"\r\n          />\r\n          <span className=\"field__label-wrap\">\r\n            <span className=\"field__label\">Address</span>\r\n          </span>\r\n        </label>\r\n        <label className=\"field field_v2\">\r\n          <input\r\n            defaultValue={userCurrent?.phone || \"\"}\r\n            ref={phoneRef}\r\n            className=\"field__input\"\r\n            placeholder=\"e.g (+84) 0399738474\"\r\n          />\r\n          <span className=\"field__label-wrap\">\r\n            <span className=\"field__label\">Phone</span>\r\n          </span>\r\n        </label>\r\n        <label className=\"field field_v3\">\r\n          <input\r\n            defaultValue={userCurrent?.desc || \"\"}\r\n            ref={descRef}\r\n            className=\"field__input\"\r\n            placeholder=\"Fill in what you like\"\r\n          />\r\n          <span className=\"field__label-wrap\">\r\n            <span className=\"field__label\">Description</span>\r\n          </span>\r\n        </label>\r\n        <div className=\"input-group mb-3\">\r\n          <div className=\"input-group-prepend\">\r\n            <label className=\"input-group-text\" htmlFor=\"inputGroupSelect01\">\r\n              Relationship\r\n            </label>\r\n          </div>\r\n          <select\r\n            ref={relationshipRef}\r\n            className=\"custom-select\"\r\n            id=\"inputGroupSelect01\"\r\n          >\r\n            <option value=\"\" selected>\r\n              Choose...\r\n            </option>\r\n            <option value=\"Single\">Single</option>\r\n            <option value=\"Get married\">Get married</option>\r\n            <option value=\"Dating\">Dating</option>\r\n            <option value=\"In a complicated relationship\">\r\n              In a complicated relationship\r\n            </option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n      <div className=\"linktr\">\r\n        <button\r\n          type=\"button\"\r\n          className=\"btn btn-danger\"\r\n          onClick={() => onEdit(false)}\r\n        >\r\n          Cancel\r\n        </button>\r\n        <button className=\"btn btn-primary\" type=\"submit\">\r\n          Save\r\n        </button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default EditProfile;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst DisplayDetailInfo = ({ onEdit }) => {\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { userProfile } = useSelector((state) => state.profile);\r\n\r\n  return (\r\n    <div className=\"col-12\">\r\n      <div className=\"card mb-3\">\r\n        <div className=\"card-body\">\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-3\">\r\n              <h6 className=\"mb-0\">Full Name</h6>\r\n            </div>\r\n\r\n            <div className=\"col-sm-9 text-secondary\">\r\n              {userProfile?.userName}\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-3\">\r\n              <h6 className=\"mb-0\">Email</h6>\r\n            </div>\r\n\r\n            <div className=\"col-sm-9 text-secondary\">{userProfile?.email}</div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-3\">\r\n              <h6 className=\"mb-0\">Phone</h6>\r\n            </div>\r\n\r\n            <div className=\"col-sm-9 text-secondary\">\r\n              {userProfile?.phone\r\n                ? userProfile?.phone\r\n                : \"Not updated information\"}\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-3\">\r\n              <h6 className=\"mb-0\">Relationship</h6>\r\n            </div>\r\n            <div className=\"col-sm-9 text-secondary\">\r\n              {userProfile?.relationship\r\n                ? userProfile?.relationship\r\n                : \"Not updated information\"}\r\n            </div>\r\n          </div>\r\n          <hr />\r\n          <div className=\"row\">\r\n            <div className=\"col-sm-3\">\r\n              <h6 className=\"mb-0\">Address</h6>\r\n            </div>\r\n\r\n            <div className=\"col-sm-9 text-secondary\">\r\n              {userProfile?.address\r\n                ? userProfile?.address\r\n                : \"Not updated information\"}\r\n            </div>\r\n          </div>\r\n          <hr />\r\n\r\n          {userProfile?._id === userCurrent?._id && (\r\n            <div className=\"row\">\r\n              <div className=\"col-12\">\r\n                <button className=\"btn btn-info\" onClick={() => onEdit(true)}>\r\n                  Edit\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayDetailInfo;\r\n","import React, { useState } from \"react\";\r\nimport EditProfile from \"./EditProfile\";\r\nimport DisplayDetailInfo from \"./DisplayDetailInfo\";\r\n\r\nconst AboutProfile = ({ user }) => {\r\n  const [isEditInfo, setIsEditInfo] = useState(false);\r\n\r\n  return (\r\n    <>\r\n      {!isEditInfo ? (\r\n        <DisplayDetailInfo onEdit={setIsEditInfo} />\r\n      ) : (\r\n        <EditProfile onEdit={setIsEditInfo} />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default AboutProfile;\r\n","import React from \"react\";\r\nimport Slider from \"react-slick\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport \"slick-carousel/slick/slick.css\";\r\nimport \"./index.scss\";\r\n\r\nconst Carousel = ({ children, length }) => {\r\n  const setup = {\r\n    dots: true,\r\n    infinite: true,\r\n    speed: 500,\r\n    slidesToShow: Math.min(5, length),\r\n    slidesToScroll: 1,\r\n    lazyLoad: true,\r\n    responsive: [\r\n      {\r\n        breakpoint: 1024,\r\n        settings: {\r\n          slidesToShow: Math.min(3, length),\r\n          slidesToScroll: 3,\r\n          infinite: true,\r\n          dots: true,\r\n        },\r\n      },\r\n      {\r\n        breakpoint: 600,\r\n        settings: {\r\n          slidesToShow: Math.min(2, length),\r\n          slidesToScroll: 2,\r\n          initialSlide: 2,\r\n        },\r\n      },\r\n      {\r\n        breakpoint: 480,\r\n        settings: {\r\n          slidesToShow: Math.min(1, length),\r\n          slidesToScroll: 1,\r\n        },\r\n      },\r\n    ],\r\n  };\r\n  return <Slider {...setup}>{children}</Slider>;\r\n};\r\n\r\nexport default Carousel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"slick-carousel/slick/slick-theme.css\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport Carousel from \"../../components/Carousel/Carousel\";\r\nimport { PUBLIC_FOLDER } from \"../../contants\";\r\nimport \"./displayFriendList.scss\";\r\n\r\nconst DisplayFriendList = () => {\r\n  const [friendList, setFriendList] = useState([]);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { userProfile } = useSelector((state) => state.profile);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const handleFetchFriends = async () => {\r\n      if (userProfile && userProfile._id) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/user/get-friends/${userProfile?._id}`\r\n          );\r\n\r\n          const { friends } = response;\r\n          if (isMount) {\r\n            setFriendList(friends);\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    handleFetchFriends();\r\n\r\n    return () => (isMount = false);\r\n  }, [userProfile?._id, userCurrent]);\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <div className=\"row friend-container\">\r\n      <Carousel length={friendList.length}>\r\n        {friendList.map((friend) => (\r\n          <div\r\n            key={friend?._id}\r\n            onClick={() => navigate(`/profile/${friend?._id}`)}\r\n          >\r\n            <div className=\"our-friend\">\r\n              <div className=\"picture\">\r\n                <img\r\n                  className=\"img-fluid\"\r\n                  src={\r\n                    (friend?.profilePicture?.length &&\r\n                      friend?.profilePicture[0]) ||\r\n                    PUBLIC_FOLDER + \"no-avatar.png\"\r\n                  }\r\n                />\r\n              </div>\r\n              <div className=\"friend-content\">\r\n                <p className=\"name\">{friend?.userName}</p>\r\n                <h4 className=\"title\">{friend?.desc}</h4>\r\n              </div>\r\n              <ul className=\"social\">\r\n                <li>\r\n                  <i className=\"fa-brands fa-facebook-square\"></i>\r\n                </li>\r\n                <li>\r\n                  <i className=\"fa-brands fa-twitter-square\"></i>\r\n                </li>\r\n                <li>\r\n                  <i className=\"fa-brands fa-youtube-square\"></i>\r\n                </li>\r\n                <li>\r\n                  <i className=\"fa-brands fa-github-square\"></i>\r\n                </li>\r\n              </ul>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </Carousel>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DisplayFriendList;\r\n","import React from \"react\";\r\n\r\nconst NavProfile = ({ option, setOption }) => {\r\n  const options = [\"friends\", \"about\", \"posts\", \"share\", \"moreOption\"];\r\n\r\n  return (\r\n    <ul className=\"nav\">\r\n      {options.map((el) => (\r\n        <li\r\n          key={el}\r\n          className={`${option === el ? \"choose\" : \"\"}`}\r\n          onClick={() => setOption(el)}\r\n        >\r\n          {el[0].toUpperCase() + el.slice(1)}\r\n        </li>\r\n      ))}\r\n    </ul>\r\n  );\r\n};\r\n\r\nexport default NavProfile;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { putDataAPI } from \"../../api/fetchData\";\r\nimport { FOLLOW, UN_FOLLOW } from \"../../redux/actions\";\r\n\r\nconst ButtonFollow = () => {\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { userProfile } = useSelector((state) => state.profile);\r\n\r\n  const [followed, setFollowed] = useState(\r\n    () => userCurrent?.followings.includes(userProfile?._id) || false\r\n  );\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (userCurrent) {\r\n      setFollowed(userCurrent?.followings.includes(userProfile?._id));\r\n    }\r\n  }, [userCurrent, userProfile]);\r\n\r\n  const handleClick = async () => {\r\n    if (userProfile?._id) {\r\n      try {\r\n        let response;\r\n        if (followed) {\r\n          response = await putDataAPI(`/user/unfollow/${userProfile._id}`, {\r\n            userId: userCurrent._id,\r\n          });\r\n\r\n          dispatch({\r\n            type: UN_FOLLOW,\r\n            payload: userProfile._id,\r\n          });\r\n        } else {\r\n          response = await putDataAPI(`/user/follow/${userProfile._id}`, {\r\n            userId: userCurrent._id,\r\n          });\r\n          dispatch({\r\n            type: FOLLOW,\r\n            payload: userProfile._id,\r\n          });\r\n        }\r\n\r\n        const { message } = response;\r\n        toast.success(message, { autoClose: 2000 });\r\n        setFollowed(!followed);\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <button\r\n      className=\"card__action__button card__action--follow\"\r\n      onClick={handleClick}\r\n    >\r\n      {followed ? \"Unfollow\" : \"Follow\"}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ButtonFollow;\r\n","import React from \"react\";\r\n\r\nconst ModalConfirmDelete = ({ id, onRemove, text }) => {\r\n  return (\r\n    <>\r\n      <div\r\n        className=\"modal fade\"\r\n        id={id}\r\n        tabIndex=\"-1\"\r\n        role=\"dialog\"\r\n        aria-labelledby=\"exampleModalLabel\"\r\n        aria-hidden=\"true\"\r\n      >\r\n        <div className=\"modal-dialog\" role=\"document\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h5 className=\"modal-title\" id=\"exampleModalLabel\">\r\n                Confirm\r\n              </h5>\r\n              <button\r\n                type=\"button\"\r\n                className=\"close\"\r\n                data-dismiss=\"modal\"\r\n                aria-label=\"Close\"\r\n              >\r\n                <span aria-hidden=\"true\">&times;</span>\r\n              </button>\r\n            </div>\r\n            <div className=\"modal-body\">\r\n              {`You confirm to permanently delete this ` + text}\r\n            </div>\r\n            <div className=\"modal-footer\">\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-danger\"\r\n                onClick={onRemove}\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Remove\r\n              </button>\r\n              <button\r\n                type=\"button\"\r\n                className=\"btn btn-secondary\"\r\n                data-dismiss=\"modal\"\r\n              >\r\n                Close\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ModalConfirmDelete;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  getDataAPI,\r\n  postDataAPI,\r\n  putDataAPI,\r\n  deleteDataAPI,\r\n} from \"../../api/fetchData\";\r\nimport ModalConfirmDelete from \"../../components/modal/ModalConfirmDelete\";\r\nimport {\r\n  ADD_FRIEND,\r\n  REMOVE_FRIEND,\r\n  SET_STATUS_FRIEND,\r\n} from \"../../redux/actions\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst ButtonFriend = () => {\r\n  const [friendRequest, setFriendRequest] = useState();\r\n  const [statusFriend, setStatusFriend] = useState(\"\");\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { userProfile, isFriend } = useSelector((state) => state.profile);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const idModalRemoveFriendRequest = useRef(uuidv4());\r\n  const idModal = useRef(uuidv4());\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const addListFriend = (userId) => {\r\n      dispatch({\r\n        type: ADD_FRIEND,\r\n        payload: userId,\r\n      });\r\n    };\r\n\r\n    const removeListFriend = (userId) => {\r\n      dispatch({\r\n        type: REMOVE_FRIEND,\r\n        payload: userId,\r\n      });\r\n    };\r\n\r\n    const updateStatus = ({ status, friendRequest }) => {\r\n      if (!status) {\r\n        setStatusFriend(\"\");\r\n        setFriendRequest();\r\n      } else {\r\n        setStatusFriend(status);\r\n        setFriendRequest(friendRequest);\r\n      }\r\n    };\r\n\r\n    if (socket) {\r\n      socket.on(\"addListFriend\", addListFriend);\r\n      socket.on(\"removeListFriend\", removeListFriend);\r\n      socket.on(\"updateStatus\", updateStatus);\r\n    }\r\n\r\n    return () => {\r\n      socket?.off(\"addListFriend\", addListFriend);\r\n      socket?.off(\"removeListFriend\", removeListFriend);\r\n      socket?.off(\"updateStatus\", updateStatus);\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    const handleCheckStatusFriend = async () => {\r\n      const responses = await Promise.all([\r\n        getDataAPI(\r\n          `/friend-request?friendId=${userProfile?._id}&type=sender&status=1`\r\n        ),\r\n        getDataAPI(\r\n          `/friend-request?friendId=${userProfile?._id}&type=receive&status=1`\r\n        ),\r\n      ]);\r\n\r\n      let status = \"\";\r\n\r\n      responses.forEach((response) => {\r\n        const { message, friendRequestDb, type } = response;\r\n\r\n        if (friendRequestDb) {\r\n          setFriendRequest(friendRequestDb);\r\n          status = type;\r\n        }\r\n      });\r\n\r\n      return status;\r\n    };\r\n\r\n    const handleSetStatusFriend = async () => {\r\n      if (userProfile && userCurrent) {\r\n        if (isFriend) {\r\n          setStatusFriend(\"friend\");\r\n        } else {\r\n          const status = await handleCheckStatusFriend();\r\n          setStatusFriend(status);\r\n        }\r\n      }\r\n    };\r\n\r\n    handleSetStatusFriend();\r\n  }, [userProfile, userCurrent]);\r\n\r\n  const createFriendRequest = async () => {\r\n    try {\r\n      const response = await postDataAPI(\"/friend-request\", {\r\n        receiverId: userProfile?._id,\r\n      });\r\n\r\n      const { message, friendRequestDb } = response;\r\n\r\n      toast.success(message, { autoClose: 1000 });\r\n\r\n      setFriendRequest(friendRequestDb);\r\n      setStatusFriend(\"sender\");\r\n\r\n      socket?.emit(\"changeFriendRequest\", {\r\n        friendId: userProfile?._id,\r\n        friendRequest: friendRequestDb,\r\n        status: \"receiver\",\r\n      });\r\n\r\n      const responseCreateNotification = await postDataAPI(\"/notification\", {\r\n        link: `/profile/${userCurrent?._id}`,\r\n        receiverId: userProfile?._id,\r\n        text: userCurrent?.userName + \" sent a friend request\",\r\n        senderId: userCurrent?._id,\r\n      });\r\n\r\n      const { notification } = responseCreateNotification;\r\n\r\n      socket?.emit(\"createNotification\", { notification });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const removeFriendRequest = async () => {\r\n    try {\r\n      if (friendRequest) {\r\n        const response = await deleteDataAPI(\r\n          `/friend-request/${friendRequest?._id}`\r\n        );\r\n\r\n        const { message } = response;\r\n\r\n        // toast.success(message, { autoClose: 1000 });\r\n\r\n        setFriendRequest();\r\n        setStatusFriend(\"\");\r\n\r\n        socket?.emit(\"changeFriendRequest\", {\r\n          friendId: userProfile?._id,\r\n          status: \"\",\r\n        });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const refuseFriendRequest = async () => {\r\n    try {\r\n      if (friendRequest) {\r\n        const response = await putDataAPI(`/friend-request/refuse-request`, {\r\n          friendRequestId: friendRequest?._id,\r\n        });\r\n\r\n        const { message } = response;\r\n\r\n        toast.success(message, { autoClose: 1000 });\r\n\r\n        setFriendRequest();\r\n        setStatusFriend(\"\");\r\n\r\n        socket?.emit(\"changeFriendRequest\", {\r\n          friendId: userProfile?._id,\r\n          status: \"\",\r\n        });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const acceptFriendRequest = async () => {\r\n    try {\r\n      if (friendRequest) {\r\n        const response = await putDataAPI(\r\n          `/friend-request/accept-friend-request`,\r\n          {\r\n            friendId: userProfile?._id,\r\n            friendRequestId: friendRequest?._id,\r\n          }\r\n        );\r\n\r\n        const { message } = response;\r\n\r\n        toast.success(message, { autoClose: 1000 });\r\n\r\n        setFriendRequest();\r\n        setStatusFriend(\"friend\");\r\n\r\n        dispatch({\r\n          type: ADD_FRIEND,\r\n          payload: userProfile?._id,\r\n        });\r\n\r\n        dispatch({\r\n          type: SET_STATUS_FRIEND,\r\n          payload: true,\r\n        });\r\n\r\n        const responseCreateNotification = await postDataAPI(\"/notification\", {\r\n          link: `/profile/${userCurrent?._id}`,\r\n          receiverId: userProfile?._id,\r\n          text: userCurrent?.userName + \" has accept friend request\",\r\n          senderId: userCurrent?._id,\r\n        });\r\n\r\n        const { notification } = responseCreateNotification;\r\n\r\n        socket?.emit(\"acceptFriendRequest\", {\r\n          friendId: userProfile?._id,\r\n          userId: userCurrent?._id,\r\n          notification,\r\n        });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const unFriend = async () => {\r\n    try {\r\n      if (!friendRequest && statusFriend === \"friend\") {\r\n        const response = await putDataAPI(`/friend-request/unfriend`, {\r\n          friendId: userProfile?._id,\r\n        });\r\n\r\n        const { message } = response;\r\n\r\n        toast.success(message, { autoClose: 1000 });\r\n\r\n        setStatusFriend(\"\");\r\n\r\n        dispatch({\r\n          type: REMOVE_FRIEND,\r\n          payload: userProfile?._id,\r\n        });\r\n\r\n        dispatch({\r\n          type: SET_STATUS_FRIEND,\r\n          payload: false,\r\n        });\r\n\r\n        socket?.emit(\"removeFriend\", {\r\n          friendId: userProfile?._id,\r\n          userId: userCurrent?._id,\r\n        });\r\n      } else {\r\n        toast.error(\"An error occurred while making this request!!!\", {\r\n          autoClose: 1000,\r\n        });\r\n      }\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {statusFriend ? (\r\n        statusFriend === \"friend\" ? (\r\n          <>\r\n            <button className=\"card__action__button card__action--friend\">\r\n              friend\r\n            </button>\r\n\r\n            <button\r\n              data-toggle=\"modal\"\r\n              data-target={`#${idModal.current}`}\r\n              className=\"card__action__button card__action--unfriend\"\r\n            >\r\n              Unfriend\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            {statusFriend === \"sender\" ? (\r\n              <>\r\n                <button\r\n                  data-toggle=\"modal\"\r\n                  data-target={`#${idModalRemoveFriendRequest.current}`}\r\n                  className=\"card__action__button card__action--deleteRequestFriend\"\r\n                >\r\n                  Cancel friend request\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <button\r\n                  className=\"card__action__button card__action--acceptFriendRequset\"\r\n                  onClick={acceptFriendRequest}\r\n                >\r\n                  Accept friend request\r\n                </button>\r\n\r\n                <button\r\n                  className=\"card__action__button card__action--refuseFriendRequset\"\r\n                  onClick={refuseFriendRequest}\r\n                >\r\n                  Refuse friend request\r\n                </button>\r\n              </>\r\n            )}\r\n          </>\r\n        )\r\n      ) : (\r\n        <>\r\n          <button\r\n            className=\"card__action__button card__action--addFriend\"\r\n            onClick={createFriendRequest}\r\n          >\r\n            add friend\r\n          </button>\r\n        </>\r\n      )}\r\n\r\n      <ModalConfirmDelete\r\n        id={idModalRemoveFriendRequest.current}\r\n        text={\"Are you sure you want to cancel this friend request?\"}\r\n        onRemove={removeFriendRequest}\r\n      />\r\n\r\n      <ModalConfirmDelete\r\n        id={idModal.current}\r\n        text={`You definitely want to unfriend ${userProfile?.userName}`}\r\n        onRemove={unFriend}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ButtonFriend;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport {\r\n  ADD_CONVERSATION,\r\n  SET_CHAT,\r\n  SET_NEW_CONVERSATION_CHAT,\r\n} from \"../../redux/actions\";\r\n\r\nconst ButtonMessage = () => {\r\n  const [isClick, setIsClick] = useState(false);\r\n\r\n  const { userProfile, isFriend } = useSelector((state) => state.profile);\r\n\r\n  const { listConversation, isChat, conversationChat } = useSelector(\r\n    (state) => state.chat\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isClick && isChat && listConversation) {\r\n      handleSetConversationChat();\r\n    }\r\n  }, [isChat, listConversation, isClick]);\r\n\r\n  const handleSetConversationChat = async () => {\r\n    if (!userProfile) return;\r\n    try {\r\n      const response = await getDataAPI(\r\n        `conversation?receiverId=${userProfile?._id}&isFriend=${\r\n          isFriend ? true : false\r\n        }`\r\n      );\r\n\r\n      const { message, conversation } = response;\r\n\r\n      if (conversation?._id === conversationChat?._id) return;\r\n\r\n      if (!listConversation?.find((item) => item?._id === conversation?._id)) {\r\n        dispatch({\r\n          type: ADD_CONVERSATION,\r\n          payload: { conversation },\r\n        });\r\n      }\r\n\r\n      dispatch({\r\n        type: SET_NEW_CONVERSATION_CHAT,\r\n        payload: { conversationChat: conversation },\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  return (\r\n    <button\r\n      className=\"card__action__button card__action--message messSkip\"\r\n      onClick={() => {\r\n        setIsClick(true);\r\n        dispatch({\r\n          type: SET_CHAT,\r\n          payload: {\r\n            isChat: true,\r\n          },\r\n        });\r\n      }}\r\n    >\r\n      message\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default ButtonMessage;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport ButtonFollow from \"./ButtonFollow\";\r\nimport ButtonFriend from \"./ButtonFriend\";\r\nimport ButtonMessage from \"./ButtonMessage\";\r\nimport \"./profileButtonActions.scss\";\r\n\r\nconst ProfileButtonAction = () => {\r\n  const { isMe } = useSelector((state) => state.profile);\r\n\r\n  return (\r\n    <>\r\n      {!isMe ? (\r\n        <div className=\"card-profile__action\">\r\n          <ButtonFriend />\r\n          <ButtonFollow />\r\n          <ButtonMessage />\r\n        </div>\r\n      ) : (\r\n        <></>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ProfileButtonAction;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport AboutProfile from \"./AboutProfile\";\r\nimport DisplayFriendList from \"./DisplayFriendList\";\r\nimport NavProfile from \"./NavProfile\";\r\nimport ProfileButtonActions from \"./ProfileButtonActions\";\r\n\r\nconst ProfileRight = () => {\r\n  const [option, setOption] = useState(\"friends\");\r\n\r\n  return (\r\n    <div className=\"right col-lg-8\">\r\n      <ProfileButtonActions  />\r\n      <NavProfile option={option} setOption={setOption} />\r\n      <div className=\"display-content\">\r\n        {option === \"about\" && <AboutProfile />}\r\n        {option === \"friends\" && <DisplayFriendList />}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProfileRight;\r\n","import \"./ShowError.css\";\r\n\r\nexport default function ShowError({ err }) {\r\n  if (!err) return \"\";\r\n  return <span className=\"mes-err\">{err}</span>;\r\n}\r\n","export const generateKeywords = (displayName) => {\r\n  // liet ke tat cac hoan vi. vd: name = [\"David\", \"Van\", \"Teo\"]\r\n  // => [\"David\", \"Van\", \"Teo\"], [\"David\", \"Teo\", \"Van\"], [\"Teo\", \"David\", \"Van\"],...\r\n  const name = displayName.split(\" \").filter((word) => word);\r\n\r\n  const length = name.length;\r\n  let flagArray = [];\r\n  let result = [];\r\n  let stringArray = [];\r\n\r\n  /**\r\n   * khoi tao mang flag false\r\n   * dung de danh dau xem gia tri\r\n   * tai vi tri nay da duoc su dung\r\n   * hay chua\r\n   **/\r\n  for (let i = 0; i < length; i++) {\r\n    flagArray[i] = false;\r\n  }\r\n\r\n  const createKeywords = (name) => {\r\n    const arrName = [];\r\n    let curName = \"\";\r\n    name.split(\"\").forEach((letter) => {\r\n      curName += letter;\r\n      arrName.push(curName);\r\n    });\r\n    return arrName;\r\n  };\r\n\r\n  function findPermutation(k) {\r\n    for (let i = 0; i < length; i++) {\r\n      if (!flagArray[i]) {\r\n        flagArray[i] = true;\r\n        result[k] = name[i];\r\n\r\n        if (k === length - 1) {\r\n          stringArray.push(result.join(\" \"));\r\n        }\r\n\r\n        findPermutation(k + 1);\r\n        flagArray[i] = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  findPermutation(0);\r\n\r\n  const keywords = stringArray.reduce((acc, cur) => {\r\n    const words = createKeywords(cur);\r\n    return [...acc, ...words];\r\n  }, []);\r\n\r\n  return keywords;\r\n};\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { register } from \"../../api/authApi\";\r\nimport ShowError from \"../../components/ShowError/ShowError\";\r\nimport { checkMinLength, isEmail } from \"../../helpers\";\r\nimport { generateKeywords } from \"../../helpers/createKeyUser\";\r\nimport \"./register.css\";\r\n\r\nconst initValue = {\r\n  userName: \"\",\r\n  password: \"\",\r\n  passwordAgain: \"\",\r\n  email: \"\",\r\n};\r\n\r\nexport default function Register() {\r\n  const [infoRegister, setInfoRegister] = useState({ ...initValue });\r\n  const [errors, setErrors] = useState({ ...initValue });\r\n  const { isLoading, isFirst } = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n  const handleChangeInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setInfoRegister({ ...infoRegister, [name]: value });\r\n    setErrors({ ...errors, [name]: \"\" });\r\n  };\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (!isFirst || !isLoading) return;\r\n    toast.success(\r\n      \"Do lần đầu kết nối nên có thể server phản hồi chậm mong bạn kiên nhẫn chờ đợi trong giây lát\",\r\n      {\r\n        autoClose: 5000,\r\n      }\r\n    );\r\n  }, [isLoading]);\r\n\r\n  const handleRegister = (e) => {\r\n    e.preventDefault();\r\n    if (isLoading) return;\r\n    let isValid = true;\r\n\r\n    let newErrors = { ...errors };\r\n    if (!isEmail(infoRegister.email)) {\r\n      isValid = false;\r\n      newErrors.email = \"Please enter the correct email format\";\r\n    }\r\n    let message;\r\n    message = checkMinLength(infoRegister.userName, \"User name\", 6);\r\n    if (message) {\r\n      isValid = false;\r\n      newErrors.userName = message;\r\n    }\r\n\r\n    message = checkMinLength(infoRegister.password, \"Password\", 6);\r\n    if (message) {\r\n      isValid = false;\r\n      newErrors.password = message;\r\n    }\r\n\r\n    if (infoRegister.password !== infoRegister.passwordAgain) {\r\n      newErrors.passwordAgain = \"Passwords do not match\";\r\n      isValid = false;\r\n    }\r\n    if (!isValid) {\r\n      setErrors(newErrors);\r\n      toast.warn(\"Please check registration information again\", {\r\n        autoClose: 500,\r\n      });\r\n      return;\r\n    }\r\n\r\n    infoRegister.keys = generateKeywords(infoRegister.userName);\r\n    dispatch(register(infoRegister, navigate));\r\n  };\r\n\r\n  return (\r\n    <div className=\"register\">\r\n      <div className=\"registerWrapper\">\r\n        <div className=\"registerLeft\">\r\n          <h3 className=\"registerLogo\">CoderNoob</h3>\r\n          <span className=\"registerDesc\">\r\n            Connect with friends and the world around you on CoderNoob.\r\n          </span>\r\n        </div>\r\n        <div className=\"registerRight\">\r\n          <form className=\"registerBox\" onSubmit={handleRegister}>\r\n            <input\r\n              required\r\n              minLength={\"6\"}\r\n              maxLength={\"20\"}\r\n              name=\"userName\"\r\n              value={infoRegister.userName}\r\n              onChange={handleChangeInput}\r\n              placeholder=\"Username\"\r\n              className=\"registerInput\"\r\n            />\r\n            <ShowError err={errors.userName}></ShowError>\r\n            <input\r\n              required\r\n              name=\"email\"\r\n              value={infoRegister.email}\r\n              onChange={handleChangeInput}\r\n              placeholder=\"Email\"\r\n              type=\"email\"\r\n              className=\"registerInput\"\r\n            />\r\n            <ShowError err={errors.email}></ShowError>\r\n            <input\r\n              type=\"password\"\r\n              minLength={\"6\"}\r\n              required\r\n              name=\"password\"\r\n              value={infoRegister.password}\r\n              onChange={handleChangeInput}\r\n              placeholder=\"Password\"\r\n              className=\"registerInput\"\r\n            />\r\n            <ShowError err={errors.password}></ShowError>\r\n            <input\r\n              type=\"password\"\r\n              minLength={\"6\"}\r\n              required\r\n              name=\"passwordAgain\"\r\n              value={infoRegister.passwordAgain}\r\n              onChange={handleChangeInput}\r\n              placeholder=\"Password Again\"\r\n              className=\"registerInput\"\r\n            />\r\n            <ShowError err={errors.passwordAgain}></ShowError>\r\n            <button className=\"registerButton\">\r\n              {isLoading ? <CircularProgress color={\"primary\"} /> : \"Register\"}\r\n            </button>\r\n            <div\r\n              style={{\r\n                display: \"flex\",\r\n                justifyContent: \"center\",\r\n              }}\r\n            >\r\n              <button\r\n                className=\"redirectButton\"\r\n                onClick={() => {\r\n                  if (isLoading) return;\r\n                  navigate(\"/login\");\r\n                }}\r\n              >\r\n                {isLoading ? (\r\n                  <CircularProgress color={\"primary\"} />\r\n                ) : (\r\n                  \"Log into Account\"\r\n                )}\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./notFound.scss\";\r\n\r\nconst NotFound = () => {\r\n  return (\r\n    <div className=\"pageNotFound\">\r\n      <h1>404 Error Page</h1>\r\n      <p className=\"zoom-area\">\r\n        <b>Page Not Found</b>\r\n      </p>\r\n      <section className=\"error-container\">\r\n        <span className=\"four\">\r\n          <span className=\"screen-reader-text\">4</span>\r\n        </span>\r\n        <span className=\"zero\">\r\n          <span className=\"screen-reader-text\">0</span>\r\n        </span>\r\n        <span className=\"four\">\r\n          <span className=\"screen-reader-text\">4</span>\r\n        </span>\r\n      </section>\r\n      <div className=\"link-container\">\r\n        <Link to=\"/\" className=\"more-link\">\r\n          Visit page Home\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import { Link } from \"react-router-dom\";\r\nimport { PUBLIC_FOLDER } from \"../../contants\";\r\nimport \"./userSuggestion.css\";\r\nexport default function UserSuggestion({ user }) {\r\n  return (\r\n    <Link\r\n      to={\"/profile/\" + user?._id}\r\n      style={{\r\n        textDecoration: \"none\",\r\n        color: \"#333\",\r\n      }}\r\n    >\r\n      <li className=\"sidebarFriend\">\r\n        <img\r\n          className=\"sidebarFriendImg\"\r\n          src={\r\n            (user?.profilePicture?.length && user?.profilePicture[0]) ||\r\n            PUBLIC_FOLDER + \"no-avatar.png\"\r\n          }\r\n          alt=\"\"\r\n        />\r\n        <span className=\"sidebarFriendName\">{user.userName}</span>\r\n      </li>\r\n    </Link>\r\n  );\r\n}\r\n","import {\r\n  Bookmark,\r\n  Chat,\r\n  Event,\r\n  Group,\r\n  HelpOutline,\r\n  PlayCircleFilledOutlined,\r\n  RssFeed,\r\n  School,\r\n  WorkOutline,\r\n} from \"@material-ui/icons\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { SET_CHAT } from \"../../redux/actions\";\r\nimport UserSuggestion from \"../userSuggestion/UserSuggestion\";\r\nimport \"./sidebar.css\";\r\n\r\nexport default function Sidebar() {\r\n  const [usersSuggestion, setUsersSuggestion] = useState([]);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const getUsersSuggestion = async () => {\r\n      if (userCurrent?._id) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/user/get-users-suggestion/${userCurrent?._id}`\r\n          );\r\n          const { users } = response;\r\n          if (isMount) {\r\n            setUsersSuggestion(users);\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    getUsersSuggestion();\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent]);\r\n\r\n  return (\r\n    <div className=\"sidebar\">\r\n      <div className=\"sidebarWrapper\">\r\n        <ul className=\"sidebarList\">\r\n          <li className=\"sidebarListItem\">\r\n            <RssFeed className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Feed</span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <Chat className=\"sidebarIcon\" />\r\n            <span\r\n              className=\"sidebarListItemText\"\r\n              onClick={() =>\r\n                dispatch({\r\n                  type: SET_CHAT,\r\n                  payload: true,\r\n                })\r\n              }\r\n            >\r\n              Chats\r\n            </span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <PlayCircleFilledOutlined className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Videos</span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <Group className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Groups</span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <Bookmark className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Bookmarks</span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <HelpOutline className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Questions</span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <WorkOutline className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Jobs</span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <Event className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Events</span>\r\n          </li>\r\n          <li className=\"sidebarListItem\">\r\n            <School className=\"sidebarIcon\" />\r\n            <span className=\"sidebarListItemText\">Courses</span>\r\n          </li>\r\n        </ul>\r\n        <button className=\"sidebarButton\">Show More</button>\r\n        <hr className=\"sidebarHr\" />\r\n        <ul className=\"sidebarUsersSuggestion\">\r\n          <h4 className=\"sidebarDesc\">Recommend friends</h4>\r\n          {usersSuggestion.map((user) => (\r\n            <UserSuggestion key={user?._id} user={user} />\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\n\r\nconst CommentCrud = ({ id, setIsEdit }) => {\r\n  return (\r\n    <>\r\n      <div className=\"commentCrudAction\">\r\n        <button\r\n          className=\"updateComment\"\r\n          onClick={() => setIsEdit((prev) => !prev)}\r\n        >\r\n          Edit\r\n        </button>\r\n\r\n        <button\r\n          type=\"button\"\r\n          className=\"removeComment\"\r\n          data-toggle=\"modal\"\r\n          data-target={\"#\" + id}\r\n        >\r\n          Remove\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CommentCrud;\r\n","import { PermMedia } from \"@material-ui/icons\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { putDataAPI } from \"../../api/fetchData\";\r\nimport { imageUpload, removeImage } from \"../../helpers/image\";\r\nimport DisplayImg from \"../displayimg/DisplayImg\";\r\nimport \"./commentInfo.css\";\r\n\r\nconst CommentInfo = ({\r\n  post,\r\n  user,\r\n  comment,\r\n  isEdit,\r\n  setIsEdit,\r\n  setMessages,\r\n}) => {\r\n  const [images, setImages] = useState([]);\r\n  const [text, setText] = useState(comment?.text || \"\");\r\n  const [files, setFiles] = useState([]);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  useEffect(() => {\r\n    setImages(comment?.images);\r\n  }, [comment?.images]);\r\n\r\n  const handleReset = (comment) => {\r\n    setImages(comment?.images);\r\n    setText(comment?.text || \"\");\r\n    setFiles([]);\r\n    setIsEdit(false);\r\n  };\r\n\r\n  const updateComment = async () => {\r\n    try {\r\n      let newImages = images ? [...images] : [];\r\n\r\n      const imagesRemove = comment?.images.filter((image) => {\r\n        return !newImages.find((newImage) => image.url === newImage.url);\r\n      });\r\n\r\n      if (imagesRemove.length) {\r\n        removeImage(imagesRemove.map((image) => image.public_id));\r\n      }\r\n\r\n      const responseImages = await imageUpload(files);\r\n      newImages = [...newImages, ...responseImages];\r\n\r\n      const response = await putDataAPI(\r\n        `/comment/update-comment/${comment?._id}`,\r\n        {\r\n          text,\r\n          images: newImages,\r\n          userId: userCurrent?._id,\r\n          isEdit: true,\r\n        }\r\n      );\r\n\r\n      const { message, newComment } = response;\r\n\r\n      toast.success(message, { autoClose: 2000 });\r\n\r\n      socket?.emit(\"commentPostHandler\", {\r\n        type: \"update\",\r\n        comment: newComment,\r\n        postId: post?._id,\r\n        userPost: post.userId,\r\n        message: userCurrent?.userName + \"updated comment on your post\",\r\n      });\r\n\r\n      setMessages((prev) =>\r\n        prev.map((item) => (item._id === newComment._id ? newComment : item))\r\n      );\r\n\r\n      handleReset(newComment);\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`commentInfo ${isEdit && \"edit\"}`}>\r\n      {isEdit ? (\r\n        <>\r\n          <div className={`editCommentContainer`}>\r\n            <input\r\n              className=\"editCommentInput\"\r\n              type=\"text\"\r\n              autoFocus\r\n              value={text}\r\n              onChange={(e) => setText(e.target.value)}\r\n            />\r\n\r\n            <button\r\n              onClick={() => handleReset()}\r\n              type=\"button\"\r\n              className=\"btn btn-secondary \r\n              btnEdit btnCancelEdit \"\r\n            >\r\n              Cancel\r\n            </button>\r\n\r\n            <button\r\n              type=\"button\"\r\n              className=\"btn btn-success\r\n              btnEdit btnConfirmEdit\"\r\n              onClick={updateComment}\r\n            >\r\n              Edit\r\n            </button>\r\n          </div>\r\n          <div className=\"editImgPost\">\r\n            <div className=\"editImgPostTop\">\r\n              <div className=\"shareOption\">\r\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n\r\n                <span className=\"shareOptionText\">Posted photo</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"disPlayImgCreateComment\">\r\n              {images &&\r\n                images.map((image) => (\r\n                  <div className=\"imgContainer\" key={image.url}>\r\n                    <DisplayImg image={image.url} setImages={setImages} />\r\n                  </div>\r\n                ))}\r\n            </div>\r\n\r\n            <div className=\"editImgPostTop\">\r\n              <label\r\n                htmlFor={\"editEomment\" + comment._id}\r\n                className=\"shareOption\"\r\n              >\r\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n                <span className=\"shareOptionText\">Add Photo or Video</span>\r\n              </label>\r\n              <input\r\n                style={{ display: \" none\" }}\r\n                type={\"file\"}\r\n                id={\"editEomment\" + comment._id}\r\n                accept=\".png,.jpeg,.jpg\"\r\n                multiple\r\n                onChange={(e) => {\r\n                  const data = Array.from(e.target.files);\r\n                  setFiles((prev) => [\r\n                    ...prev,\r\n                    ...data.map((file) => {\r\n                      file.uuid = uuidv4();\r\n                      return file;\r\n                    }),\r\n                  ]);\r\n                }}\r\n              />\r\n            </div>\r\n\r\n            <div className=\"disPlayImgCreateComment\">\r\n              {files.map((file) => (\r\n                <div className=\"imgContainer\" key={file.uuid}>\r\n                  <DisplayImg file={file} setFiles={setFiles} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <div className=\"commentInfoTop\">\r\n            <span className=\"commentUserName\">{user?.userName}</span>\r\n            <span className=\"commentText\">{comment?.text}</span>\r\n          </div>\r\n          <div className=\"commentInfoImgContainer\">\r\n            {comment.images.map((image, idx) => (\r\n              <img\r\n                alt={\"link anh\"}\r\n                className=\"commentInfoImg\"\r\n                key={image.url}\r\n                style={{\r\n                  width: `${\r\n                    comment.images.length % 2 !== 0\r\n                      ? idx === comment.images.length - 1\r\n                        ? \"100%\"\r\n                        : \"calc(100%/2)\"\r\n                      : \"calc(100%/2)\"\r\n                  }`,\r\n                }}\r\n                src={image && image.url}\r\n              />\r\n            ))}\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommentInfo;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as timeago from \"timeago.js\";\r\nimport { deleteDataAPI, getDataAPI, putDataAPI } from \"../../api/fetchData\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport CommentCrud from \"../comment/CommentCrud\";\r\nimport CommentInfo from \"../comment/CommentInfo\";\r\nimport ModalConfirmDelete from \"../modal/ModalConfirmDelete\";\r\nimport \"./commentReply.css\";\r\n\r\nfunction CommentReply({ comment, commentReply, setCommentsReply }) {\r\n  const [like, setLike] = useState();\r\n  const [user, setUser] = useState({});\r\n  const [isCrudComment, setIsCrudComment] = useState(false);\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n\r\n  const [isLiked, setIsLiked] = useState(false);\r\n\r\n  useEffect(() => {\r\n    setLike(commentReply?.likes.length);\r\n    setIsLiked(commentReply?.likes.includes(userCurrent._id));\r\n  }, [commentReply?.likes, userCurrent?._id]);\r\n\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      try {\r\n        const response = await getDataAPI(\r\n          `/user?userId=${commentReply?.userId}`\r\n        );\r\n\r\n        const { user } = response;\r\n        setUser(user);\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n    fetchUser();\r\n  }, [commentReply]);\r\n\r\n  useEffect(() => {\r\n    const handleCheckClick = (e) => {\r\n      if (isCrudComment) {\r\n        setIsCrudComment(false);\r\n      }\r\n    };\r\n\r\n    document.body.addEventListener(\"click\", handleCheckClick);\r\n\r\n    return () => document.body.removeEventListener(\"click\", handleCheckClick);\r\n  }, [isCrudComment]);\r\n\r\n  const likeHandler = async () => {\r\n    try {\r\n      const response = isLiked\r\n        ? await putDataAPI(`/comment/unlike-comment/${commentReply._id}`, {\r\n            userId: userCurrent._id,\r\n          })\r\n        : await putDataAPI(`/comment/like-comment/${commentReply._id}`, {\r\n            userId: userCurrent._id,\r\n          });\r\n      const { message } = response;\r\n      toast.success(message, { autoClose: 1000 });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n    setIsLiked(!isLiked);\r\n    setLike(isLiked ? like - 1 : like + 1);\r\n  };\r\n\r\n  const handleRemoveCommnetReply = async () => {\r\n    try {\r\n      const response = await deleteDataAPI(\r\n        `/comment/remove-comment-reply/${comment._id}/${commentReply._id}/${userCurrent._id}`\r\n      );\r\n\r\n      const { message } = response;\r\n      toast.success(message, { autoClose: 1000 });\r\n\r\n      setCommentsReply((prev) =>\r\n        prev.filter((item) => item._id !== commentReply._id)\r\n      );\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"commentReplyContainer\">\r\n        <div className=\"commentReplyLeft\">\r\n          <Avatar user={userCurrent} />\r\n        </div>\r\n        <div className=\"commentReplyRight\">\r\n          <div className=\"commentReplyRightTop\">\r\n            <CommentInfo\r\n              user={userCurrent}\r\n              comment={commentReply}\r\n              isEdit={isEdit}\r\n              setIsEdit={setIsEdit}\r\n              setMessages={setCommentsReply}\r\n            />\r\n\r\n            {commentReply?.userId === userCurrent._id && (\r\n              <div\r\n                className=\"commentCrud\"\r\n                onClick={() => setIsCrudComment(!isCrudComment)}\r\n              >\r\n                <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAHVJREFUSEtjZKAxYKSx+QyjFhAM4dEgGqFB5MDAwDAf6vdEBgaGA1A2qeJgbdhS0QMGBgZ5qKEgtiISmxRxnBZ8YGBg4Ica+pCBgUEByiZVHKcFoKBYADU0AS2ISBHHaQHBpEeKgtGcTDC0RoNoNIgIhgBBBQBNkxgZxgF3rgAAAABJRU5ErkJggg==\" />\r\n\r\n                {isCrudComment && (\r\n                  <CommentCrud\r\n                    id={commentReply._id}\r\n                    onRemoveComment={handleRemoveCommnetReply}\r\n                    setIsEdit={setIsEdit}\r\n                  />\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"commentReplyAction\">\r\n            <div className=\"commentReplyLikeContainer\">\r\n              <span\r\n                className={`commentReplyLike ${isLiked && \"like\"}`}\r\n                onClick={likeHandler}\r\n              >\r\n                Like\r\n              </span>\r\n              <span className=\"commentReplyNumberLike\">{like}</span>\r\n            </div>\r\n\r\n            <span className=\"commentRefDate\">\r\n              {timeago.format(commentReply?.createdAt)}\r\n            </span>\r\n\r\n            {commentReply.isEdit && <span className=\"showIsEdit\">Edited</span>}\r\n          </div>\r\n        </div>\r\n\r\n        <ModalConfirmDelete\r\n          id={commentReply?._id}\r\n          onRemove={handleRemoveCommnetReply}\r\n          text=\"this comment ?\"\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CommentReply;\r\n","import React, { useRef } from \"react\";\r\nimport \"./createComment.css\";\r\nimport { PermMedia } from \"@material-ui/icons\";\r\nimport DisplayImg from \"../../displayimg/DisplayImg\";\r\nimport Avatar from \"../../avatar/Avatar\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\n\r\nconst CreateComment = ({ onCreateComment, user, setFiles, files, id }) => {\r\n  const commentRef = useRef();\r\n\r\n  return (\r\n    <>\r\n      <form\r\n        className=\"createComment\"\r\n        onSubmit={(e) => {\r\n          onCreateComment(e, commentRef.current.value);\r\n          commentRef.current.value = \"\";\r\n        }}\r\n      >\r\n        <div className=\"createCommentInput\">\r\n          <Avatar width={\"50px\"} height={\"50px\"} user={user} />\r\n          <div className=\"createCommentInputTop\">\r\n            <input\r\n              autoFocus\r\n              type=\"text\"\r\n              ref={commentRef}\r\n              placeholder={\"Enter comment...\"}\r\n            />\r\n\r\n            <label htmlFor={\"filesCreateComment\" + id} className=\"shareOption\">\r\n              <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n            </label>\r\n            <input\r\n              style={{ display: \" none\" }}\r\n              type={\"file\"}\r\n              id={\"filesCreateComment\" + id}\r\n              accept=\".png,.jpeg,.jpg\"\r\n              multiple\r\n              onChange={(e) => {\r\n                const data = Array.from(e.target.files);\r\n                setFiles([\r\n                  ...data.map((file) => {\r\n                    file.uuid = uuidv4();\r\n                    return file;\r\n                  }),\r\n                ]);\r\n              }}\r\n            />\r\n          </div>\r\n          <button type=\"submit\" className=\"btn btn-primary btnCreateComment\">\r\n            Send\r\n          </button>\r\n        </div>\r\n        <div className=\"disPlayImgCreateComment\">\r\n          {files.map((file) => (\r\n            <div className=\"imgContainer\" key={file.uuid}>\r\n              <DisplayImg file={file} setFiles={setFiles} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </form>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CreateComment;\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as timeago from \"timeago.js\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { getDataAPI, postDataAPI, putDataAPI } from \"../../api/fetchData\";\r\nimport { imageUpload } from \"../../helpers/image\";\r\nimport { UPDATE_ID_COMMENT } from \"../../redux/actions\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport CommentReply from \"../commentReply/CommentReply\";\r\nimport CreateComment from \"../form/createComment/CreateComment\";\r\nimport ModalConfirmDelete from \"../modal/ModalConfirmDelete\";\r\nimport \"./comment.css\";\r\nimport CommentCrud from \"./CommentCrud\";\r\nimport CommentInfo from \"./CommentInfo\";\r\n\r\nfunction Comment({ comment, post, setComments }) {\r\n  const [like, setLike] = useState();\r\n  const [user, setUser] = useState({});\r\n  const [isShowCommentsReply, setIsShowCommentsReply] = useState(false);\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [commentsReply, setCommentsReply] = useState([]);\r\n  const [isCrudComment, setIsCrudComment] = useState(false);\r\n  const [files, setFiles] = useState([]);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { idComment } = useSelector((state) => state.comment);\r\n\r\n  const idCreateComment = useRef(uuidv4());\r\n\r\n  useEffect(() => {\r\n    const handleCheckClick = (e) => {\r\n      if (isCrudComment) {\r\n        setIsCrudComment(false);\r\n      }\r\n    };\r\n\r\n    document.body.addEventListener(\"click\", handleCheckClick);\r\n\r\n    return () => document.body.removeEventListener(\"click\", handleCheckClick);\r\n  }, [isCrudComment]);\r\n\r\n  useEffect(() => {\r\n    setLike(comment?.likes.length);\r\n    setIsLiked(comment?.likes.includes(userCurrent._id));\r\n  }, [comment?.likes, userCurrent?._id]);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n    const fetchUser = async () => {\r\n      try {\r\n        const response = await getDataAPI(`/user?userId=${comment?.userId}`);\r\n\r\n        const { user } = response;\r\n        if (isMount) setUser(user);\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n    fetchUser();\r\n\r\n    return () => (isMount = false);\r\n  }, [comment]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n    const handleGetCommentReply = async () => {\r\n      try {\r\n        const response = await getDataAPI(\r\n          `/comment/get-all-comments-reply/${comment?._id}`\r\n        );\r\n\r\n        const { message, comments } = response;\r\n\r\n        if (isMount) setCommentsReply(comments);\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n    if (isShowCommentsReply) {\r\n      handleGetCommentReply();\r\n    }\r\n\r\n    return () => (isMount = false);\r\n  }, [isShowCommentsReply]);\r\n\r\n  const likeHandler = async () => {\r\n    try {\r\n      const response = isLiked\r\n        ? await putDataAPI(`/comment/unlike-comment/${comment._id}`, {\r\n            userId: userCurrent._id,\r\n          })\r\n        : await putDataAPI(`/comment/like-comment/${comment._id}`, {\r\n            userId: userCurrent._id,\r\n          });\r\n      const { message } = response;\r\n      toast.success(message, { autoClose: 1000 });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n    setIsLiked(!isLiked);\r\n    setLike(isLiked ? like - 1 : like + 1);\r\n  };\r\n\r\n  const handleCreateCommentReply = async (e, text) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (!text && !files.length) {\r\n        return toast.info(\"Please enter data to comment\", { autoClose: 2000 });\r\n      }\r\n      const commentInfo = {\r\n        postId: post?._id,\r\n        userId: user?._id,\r\n        text,\r\n      };\r\n\r\n      const images = await imageUpload(files);\r\n      commentInfo.images = [...images];\r\n\r\n      const response = await postDataAPI(`/comment`, commentInfo);\r\n\r\n      const { comment: commentReply, message } = response;\r\n\r\n      const responseToAddCommentReply = await postDataAPI(\r\n        `/comment/add-comment-reply/${comment?._id}`,\r\n        {\r\n          commentReplyId: commentReply._id,\r\n        }\r\n      );\r\n\r\n      if (isShowCommentsReply) {\r\n        setCommentsReply((prev) => [commentReply, ...prev]);\r\n      }\r\n\r\n      setFiles([]);\r\n      setIsShowCommentsReply(true);\r\n\r\n      toast.success(message, { autoClose: 2000 });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const handleRemoveComment = async () => {\r\n    try {\r\n      const response = await postDataAPI(`/post/remove-comment/${post?._id}`, {\r\n        commentId: comment?._id,\r\n        userId: userCurrent?._id,\r\n      });\r\n\r\n      const { message } = response;\r\n      toast.success(message, { autoClose: 2000 });\r\n\r\n      setComments((prev) =>\r\n        prev.filter((commentPost) => commentPost._id !== comment._id)\r\n      );\r\n\r\n      socket?.emit(\"commentPostHandler\", {\r\n        type: \"remove\",\r\n        comment,\r\n        postId: post?._id,\r\n        userPost: post.userId,\r\n        message: userCurrent?.userName + \" deleted the comment on your post\",\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className=\"commentLeft\">\r\n        <Avatar user={user} />\r\n      </div>\r\n      <div className=\"commentRight\">\r\n        <div className=\"commentRightTop\">\r\n          <CommentInfo\r\n            post={post}\r\n            user={user}\r\n            comment={comment}\r\n            isEdit={isEdit}\r\n            setIsEdit={setIsEdit}\r\n            setMessages={setComments}\r\n          />\r\n\r\n          {comment?.userId === userCurrent?._id && (\r\n            <div\r\n              className=\"commentCrud\"\r\n              onClick={() => setIsCrudComment(!isCrudComment)}\r\n            >\r\n              <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAHVJREFUSEtjZKAxYKSx+QyjFhAM4dEgGqFB5MDAwDAf6vdEBgaGA1A2qeJgbdhS0QMGBgZ5qKEgtiISmxRxnBZ8YGBg4Ica+pCBgUEByiZVHKcFoKBYADU0AS2ISBHHaQHBpEeKgtGcTDC0RoNoNIgIhgBBBQBNkxgZxgF3rgAAAABJRU5ErkJggg==\" />\r\n\r\n              {isCrudComment && (\r\n                <CommentCrud\r\n                  id={comment?._id}\r\n                  onRemoveComment={handleRemoveComment}\r\n                  setIsEdit={setIsEdit}\r\n                />\r\n              )}\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        <div className=\"commentAction\">\r\n          <div className=\"commentLikeContainer\">\r\n            <span\r\n              className={`commentLike ${isLiked && \"like\"}`}\r\n              onClick={likeHandler}\r\n            >\r\n              Like\r\n            </span>\r\n            <span className=\"commentNumberLike\">{like}</span>\r\n          </div>\r\n          <span\r\n            className=\"reply\"\r\n            onClick={() => {\r\n              let newIdComment = comment?._id;\r\n              if (idComment === comment?._id) newIdComment = null;\r\n              dispatch({\r\n                type: UPDATE_ID_COMMENT,\r\n                payload: { idComment: newIdComment },\r\n              });\r\n            }}\r\n          >\r\n            Reply\r\n          </span>\r\n          <span className=\"commentDate\">\r\n            {timeago.format(comment?.createdAt)}\r\n          </span>\r\n          <span\r\n            className=\"showFeedback\"\r\n            onClick={() => setIsShowCommentsReply(!isShowCommentsReply)}\r\n          >\r\n            feedbacks\r\n          </span>\r\n\r\n          {comment.isEdit && <span className=\"showIsEdit\">Edited</span>}\r\n        </div>\r\n\r\n        <div className=\"comentBottom\">\r\n          {idComment === comment?._id && (\r\n            <CreateComment\r\n              id={idCreateComment.current}\r\n              files={files}\r\n              setFiles={setFiles}\r\n              user={userCurrent}\r\n              onCreateComment={handleCreateCommentReply}\r\n            />\r\n          )}\r\n\r\n          {isShowCommentsReply &&\r\n            commentsReply.map((commentReply) => (\r\n              <CommentReply\r\n                comment={comment}\r\n                setCommentsReply={setCommentsReply}\r\n                key={commentReply?._id}\r\n                commentReply={commentReply}\r\n              />\r\n            ))}\r\n        </div>\r\n\r\n        <ModalConfirmDelete\r\n          text=\"this comment ?\"\r\n          id={comment?._id}\r\n          onRemove={handleRemoveComment}\r\n        />\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Comment;\r\n","import React, { useRef, useState } from \"react\";\r\nimport \"./modal.css\";\r\nimport { Button, Modal } from \"react-bootstrap\";\r\nimport { PermMedia } from \"@material-ui/icons\";\r\nimport { toast } from \"react-toastify\";\r\nimport DisplayImg from \"../displayimg/DisplayImg\";\r\nimport { putDataAPI, postDataAPI } from \"../../api/fetchData\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { removeImage, imageUpload } from \"../../helpers/image\";\r\nimport ChooseImage from \"../chooseImage/ChooseImage\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nconst ModalEditPost = ({ setPosts, post, setIsEdit }) => {\r\n  const [images, setImages] = useState(post?.images);\r\n  const [desc, setDesc] = useState(post?.desc || \"\");\r\n  const [files, setFiles] = useState([]);\r\n  const [isTakePhoto, setIsTakePhoto] = useState(false);\r\n\r\n  const id = useRef(uuidv4());\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const updatePost = async () => {\r\n    try {\r\n      let newImages = [...images];\r\n\r\n      const imagesRemove = post?.images.filter((image) => {\r\n        return !newImages.find((newImage) => image.url === newImage.url);\r\n      });\r\n\r\n      if (imagesRemove.length) {\r\n        removeImage(imagesRemove.map((image) => image.public_id));\r\n      }\r\n\r\n      const responseImages = await imageUpload(files);\r\n      newImages = [...newImages, ...responseImages];\r\n\r\n      const response = await putDataAPI(`/post/${post?._id}`, {\r\n        desc,\r\n        images: newImages,\r\n        userId: userCurrent._id,\r\n      });\r\n\r\n      const { message, newPost } = response;\r\n\r\n      toast.success(message, { autoClose: 2000 });\r\n\r\n      setPosts((prev) =>\r\n        prev.map((item) => (item._id === newPost._id ? newPost : item))\r\n      );\r\n\r\n      socket?.emit(\"postHandler\", {\r\n        type: \"updatePost\",\r\n        post: newPost,\r\n        userFollowings: userCurrent?.followings,\r\n        message: `${userCurrent?.userName} just edit a new post`,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const handleClose = () => {\r\n    setImages(post?.images);\r\n    setDesc(post?.desc || \"\");\r\n    setFiles([]);\r\n    setIsEdit(false);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Modal show={true} onHide={handleClose} className=\"modalEditContainer\">\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Edit Post</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body className={\"modalEditPostBody\"}>\r\n          <div className=\"editDescPost\">\r\n            <textarea\r\n              className=\"editDescPostInput\"\r\n              value={desc}\r\n              onChange={(e) => setDesc(e.target.value)}\r\n              autoFocus\r\n              row={1000}\r\n            ></textarea>\r\n          </div>\r\n\r\n          <div className=\"editImgPost\">\r\n            <div className=\"editImgPostTop\">\r\n              <div className=\"shareOption\">\r\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n                <span className=\"shareOptionText\">Posted photo</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"disPlayImgCreateComment\">\r\n              {images.map((image) => (\r\n                <div className=\"imgContainer\" key={image.url}>\r\n                  <DisplayImg image={image.url} setImages={setImages} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <ChooseImage\r\n              setIsTakePhoto={setIsTakePhoto}\r\n              isTakePhoto={isTakePhoto}\r\n              files={files}\r\n              id={id.current}\r\n              multiple={true}\r\n              setFiles={setFiles}\r\n            />\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"secondary\" onClick={handleClose}>\r\n            Close\r\n          </Button>\r\n          <Button\r\n            variant=\"primary\"\r\n            onClick={() => {\r\n              updatePost();\r\n              handleClose();\r\n            }}\r\n          >\r\n            Save Changes\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ModalEditPost;\r\n","import React from \"react\";\r\nimport \"./crudPost.css\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\n\r\nconst CrudPost = ({ id, setIsEdit }) => {\r\n  const navigate = useNavigate();\r\n  return (\r\n    <>\r\n      <>\r\n        <button className=\"detailPost\" onClick={() => navigate(\"/post/\" + id)}>\r\n          Detail Post\r\n        </button>\r\n        <button\r\n          className=\"updatePost\"\r\n          onClick={() => setIsEdit((prev) => !prev)}\r\n        >\r\n          Edit\r\n        </button>\r\n\r\n        <button\r\n          type=\"button\"\r\n          className=\"removePost\"\r\n          data-toggle=\"modal\"\r\n          data-target={\"#\" + id}\r\n        >\r\n          Remove\r\n        </button>\r\n      </>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CrudPost;\r\n","import { useEffect, useRef, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport * as timeago from \"timeago.js\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport {\r\n  deleteDataAPI,\r\n  getDataAPI,\r\n  postDataAPI,\r\n  putDataAPI,\r\n} from \"../../api/fetchData\";\r\nimport { debounce } from \"../../helpers/debounceFunction\";\r\nimport { imageUpload } from \"../../helpers/image\";\r\nimport { UPDATE_ID_COMMENT } from \"../../redux/actions\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport Comment from \"../comment/Comment\";\r\nimport CreateComment from \"../form/createComment/CreateComment\";\r\nimport ModalConfirmDelete from \"../modal/ModalConfirmDelete\";\r\nimport ModalEditPost from \"../modal/ModalEditPost\";\r\nimport CrudPost from \"./CrudPost\";\r\nimport \"./post.scss\";\r\nexport default function Post({ post, setPosts, className }) {\r\n  const [like, setLike] = useState(post?.likes.length);\r\n  const [isLiked, setIsLiked] = useState(false);\r\n  const [user, setUser] = useState({});\r\n  const [comments, setComments] = useState([]);\r\n  const [isShowComment, setIsShowComment] = useState(false);\r\n  const [isCrudPost, setIsCrudPost] = useState(false);\r\n  const [isEdit, setIsEdit] = useState(false);\r\n  const [files, setFiles] = useState([]);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { idComment, idPostOpen } = useSelector((state) => state.comment);\r\n\r\n  const idCreateComment = useRef(uuidv4());\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const handleCheckClick = (e) => {\r\n      if (isCrudPost) {\r\n        setIsCrudPost(false);\r\n      }\r\n    };\r\n\r\n    document.body.addEventListener(\"click\", handleCheckClick);\r\n\r\n    return () => document.body.removeEventListener(\"click\", handleCheckClick);\r\n  }, [isCrudPost]);\r\n\r\n  useEffect(() => {\r\n    setIsLiked(post?.likes.includes(userCurrent?._id));\r\n    setLike(post?.likes.length);\r\n  }, [post?.likes, userCurrent?._id]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n    const getComments = async () => {\r\n      try {\r\n        const response = await getDataAPI(`/post/get-all-comment/${post?._id}`);\r\n\r\n        const { comments } = response;\r\n\r\n        if (isMount) setComments(comments);\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n\r\n    if (isShowComment) getComments();\r\n\r\n    return () => (isMount = false);\r\n  }, [isShowComment, post?.comments]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (userCurrent?._id !== post?.userId) {\r\n      const fetchUser = async () => {\r\n        try {\r\n          const response = await getDataAPI(`/user?userId=${post?.userId}`);\r\n\r\n          const { user } = response;\r\n          setUser(user);\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      };\r\n      fetchUser();\r\n    } else {\r\n      if (isMount) setUser(userCurrent);\r\n    }\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent, post?.userId]);\r\n\r\n  useEffect(() => {\r\n    const handleUpdateLikePost = ({ type, message, postId }) => {\r\n      if (post?._id !== postId) return;\r\n\r\n      setLike((prev) => (type === \"like\" ? prev + 1 : prev - 1));\r\n    };\r\n\r\n    const handleUpdateCmtPost = ({ postId, type, comment }) => {\r\n      if (post?._id !== postId) return;\r\n\r\n      setComments((prev) =>\r\n        type === \"remove\"\r\n          ? prev.filter((commentPost) => commentPost?._id !== comment?._id)\r\n          : type === \"update\"\r\n          ? prev.map((commentPost) =>\r\n              commentPost?._id !== comment?._id ? commentPost : comment\r\n            )\r\n          : [comment, ...prev]\r\n      );\r\n    };\r\n\r\n    if (socket) {\r\n      socket.on(\"updateLikePost\", handleUpdateLikePost);\r\n      socket.on(\"updateCommentPost\", handleUpdateCmtPost);\r\n    }\r\n\r\n    return () => {\r\n      socket?.off(\"getNotify\", handleUpdateLikePost);\r\n      socket?.off(\"updateCommentPost\", handleUpdateCmtPost);\r\n    };\r\n  }, [socket]);\r\n\r\n  const likeHandler = async () => {\r\n    try {\r\n      const response = isLiked\r\n        ? await putDataAPI(`/post/dislike-post/${post._id}`, {\r\n            userId: userCurrent._id,\r\n          })\r\n        : await putDataAPI(`/post/like-post/${post._id}`, {\r\n            userId: userCurrent._id,\r\n          });\r\n      const { message } = response;\r\n      toast.success(message, { autoClose: 2000 });\r\n\r\n      if (!isLiked && post?.userId !== userCurrent?._id) {\r\n        const responseCreateNotification = await postDataAPI(\"/notification\", {\r\n          link: \"/post/\" + post?._id,\r\n          receiverId: post?.userId,\r\n          text: userCurrent?.userName + \" liked on your post\",\r\n          senderId: userCurrent?._id,\r\n        });\r\n\r\n        const { notification } = responseCreateNotification;\r\n\r\n        socket?.emit(\"createNotification\", { notification });\r\n      }\r\n      setIsLiked((prev) => !prev);\r\n      setLike((prev) => (isLiked ? prev - 1 : prev + 1));\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const handleCreateComment = async (e, text) => {\r\n    e.preventDefault();\r\n    try {\r\n      const commentInfo = {\r\n        postId: post?._id,\r\n        userId: userCurrent?._id,\r\n        text,\r\n        images: [],\r\n      };\r\n\r\n      const images = await imageUpload(files);\r\n      commentInfo.images = [...images];\r\n\r\n      const response = await postDataAPI(`/comment`, commentInfo);\r\n\r\n      const { comment, message } = response;\r\n\r\n      const responseAddToPost = await postDataAPI(\r\n        `/post/add-comment/${post?._id}`,\r\n        {\r\n          commentId: comment?._id,\r\n        }\r\n      );\r\n\r\n      toast.success(message, { autoClose: 2000 });\r\n\r\n      const responseCreateNotification = await postDataAPI(\"/notification\", {\r\n        link: \"/post/\" + post?._id,\r\n        receiverId: post?.userId,\r\n        text: userCurrent?.userName + \" commented on your post\",\r\n        senderId: userCurrent?._id,\r\n      });\r\n\r\n      const { notification } = responseCreateNotification;\r\n\r\n      socket?.emit(\"createNotification\", { notification });\r\n\r\n      setComments((prev) => [comment, ...prev]);\r\n      setFiles([]);\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  const handleRemovePost = async () => {\r\n    try {\r\n      const response = await deleteDataAPI(`/post/${post?._id}`);\r\n\r\n      const { message } = response;\r\n\r\n      toast.success(message, { autoClose: 2000 });\r\n\r\n      setPosts((prev) => prev.filter((item) => item._id !== post?._id));\r\n\r\n      socket.emit(\"postHandler\", {\r\n        type: \"remove\",\r\n        post,\r\n        userFollowings: userCurrent?.followings,\r\n        message: `${userCurrent?.userName} just edit a new post`,\r\n      });\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <div className={className ? className : \"post\"}>\r\n        <div className=\"postWrapper\">\r\n          <div className=\"postTop\">\r\n            <div className=\"postTopLeft\">\r\n              <Avatar user={user} width=\"50px\" height=\"50px\" />\r\n\r\n              <span className=\"postUsername\">{user?.userName}</span>\r\n              <span className=\"postDate\">\r\n                {timeago.format(post?.createdAt)}\r\n              </span>\r\n            </div>\r\n\r\n            {post?.userId === userCurrent?._id && (\r\n              <div className=\"postTopRight\">\r\n                <span\r\n                  className=\"CrudPost\"\r\n                  onClick={() => setIsCrudPost(!isCrudPost)}\r\n                >\r\n                  <img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAFBJREFUSEtjZKAxYKSx+Qwjy4L/aMFJlO+JUgQ1eNQC2iRYUuKALBeQYsFoJBMMYpoHEUEXYFNASiTT3AKaB9GoBWTFIUFNgyoVEXTtgOQDAEM9DBleh0KcAAAAAElFTkSuQmCC\" />\r\n                </span>\r\n\r\n                {isCrudPost && (\r\n                  <div className=\"postCrudAction\">\r\n                    <CrudPost id={post?._id} setIsEdit={setIsEdit} />\r\n                  </div>\r\n                )}\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className=\"postCenter\">\r\n            <span className=\"postText\">{post?.desc}</span>\r\n            <div className=\"postImgContainer\">\r\n              {post?.images.map((image, idx) => {\r\n                return (\r\n                  <div\r\n                    className=\"postImg\"\r\n                    key={image.url}\r\n                    style={{\r\n                      width: `${\r\n                        post.images.length % 2 !== 0\r\n                          ? idx === post.images.length - 1\r\n                            ? \"100%\"\r\n                            : \"calc(100%/2)\"\r\n                          : \"calc(100%/2)\"\r\n                      }`,\r\n                    }}\r\n                  >\r\n                    <img src={image.url} alt=\"\" />\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n          <div className=\"postBottom\">\r\n            <div className=\"postBottomLeft\">\r\n              <i\r\n                className={`bx ${\r\n                  isLiked ? \"bxs-heart has-like\" : \"bx-heart\"\r\n                } likeIcon`}\r\n                onClick={debounce(likeHandler, 2000)}\r\n              ></i>\r\n              <span className=\"postLikeCounter\">{like} people like it</span>\r\n            </div>\r\n            <div\r\n              className=\"postBottomRight\"\r\n              onClick={() => {\r\n                let newIdComment = post?._id;\r\n                let newIdPostOpen = post?._id;\r\n                if (idPostOpen === post?._id) {\r\n                  newIdPostOpen = null;\r\n                  newIdComment = null;\r\n                }\r\n                dispatch({\r\n                  type: UPDATE_ID_COMMENT,\r\n                  payload: {\r\n                    idComment: newIdComment,\r\n                    idPostOpen: newIdPostOpen,\r\n                  },\r\n                });\r\n                setIsShowComment(!isShowComment);\r\n              }}\r\n            >\r\n              {comments.length ? (\r\n                <span className=\"postCommentText\">{comments.length}</span>\r\n              ) : (\r\n                \"\"\r\n              )}\r\n              <i className=\"bx bx-comment postCommentIcon\"></i>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"commentContainer\">\r\n            {idComment === post?._id && (\r\n              <CreateComment\r\n                id={idCreateComment.current}\r\n                files={files}\r\n                setFiles={setFiles}\r\n                user={userCurrent}\r\n                onCreateComment={handleCreateComment}\r\n              />\r\n            )}\r\n\r\n            <div className=\"displayComment\">\r\n              {isShowComment &&\r\n                comments.map((comment) => (\r\n                  <div className=\"comment\" key={comment._id}>\r\n                    <Comment\r\n                      setComments={setComments}\r\n                      post={post}\r\n                      comment={comment}\r\n                    />\r\n                  </div>\r\n                ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {isEdit && (\r\n          <ModalEditPost\r\n            setPosts={setPosts}\r\n            setIsEdit={setIsEdit}\r\n            post={post}\r\n          />\r\n        )}\r\n      </div>\r\n\r\n      <ModalConfirmDelete\r\n        onRemove={handleRemovePost}\r\n        id={post?._id}\r\n        text=\"this post ?\"\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import { EmojiEmotions, Label, PermMedia, Room } from \"@material-ui/icons\";\r\nimport { useRef, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { postDataAPI } from \"../../api/fetchData\";\r\nimport { imageUpload } from \"../../helpers/image\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport DisplayImg from \"../displayimg/DisplayImg\";\r\nimport ModalChooseImage from \"../modal/ModalChooseImage\";\r\nimport \"./share.css\";\r\n\r\nexport default function Share({ setPosts }) {\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const [shareing, setShearing] = useState(false);\r\n\r\n  const [files, setFiles] = useState([]);\r\n  const descRef = useRef();\r\n  const id = useRef(uuidv4());\r\n\r\n  const handleSaveImages = (files) => {\r\n    setFiles((prev) => [...prev, ...files]);\r\n  };\r\n\r\n  const handleCreatePost = async (e) => {\r\n    e.preventDefault();\r\n    if (shareing) return;\r\n\r\n    if (!files.length && !descRef.current.value) {\r\n      return toast.info(\"Please enter information to create a post\", {\r\n        autoClose: 1000,\r\n      });\r\n    }\r\n    setShearing(true);\r\n\r\n    const newPost = {\r\n      desc: descRef.current.value,\r\n      userId: userCurrent?._id,\r\n      images: [],\r\n    };\r\n\r\n    const images = await imageUpload(files);\r\n\r\n    newPost.images = images;\r\n    try {\r\n      const response = await postDataAPI(\"/post\", newPost);\r\n      const { message, post } = response;\r\n\r\n      descRef.current.value = \"\";\r\n      toast.success(message, { autoClose: 2000 });\r\n\r\n      const responses = await Promise.all(\r\n        userCurrent.followings.map((userFollowingId) =>\r\n          postDataAPI(\"/notification\", {\r\n            link: \"/post/\" + post?._id,\r\n            receiverId: userFollowingId,\r\n            text: userCurrent?.userName + \" created a new post\",\r\n            senderId: userCurrent?._id,\r\n          })\r\n        )\r\n      );\r\n\r\n      const dataEmit = [];\r\n      responses.forEach((response) =>\r\n        dataEmit.push(response?.data?.notification)\r\n      );\r\n\r\n      socket?.emit(\"createPost\", {\r\n        dataEmit,\r\n      });\r\n\r\n      setPosts((prev) => [post, ...prev]);\r\n      setFiles([]);\r\n      setShearing(false);\r\n    } catch (err) {\r\n      console.log(\"err\", err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"share\">\r\n      <div className=\"shareWrapper\">\r\n        <div className=\"shareTop\">\r\n          <Avatar user={userCurrent} width=\"50px\" height=\"50px\" />\r\n\r\n          <input\r\n            required\r\n            placeholder={`What's in your mind ${userCurrent?.userName} ?`}\r\n            className=\"shareInput\"\r\n            ref={descRef}\r\n          />\r\n        </div>\r\n        <hr className=\"shareHr\" />\r\n        <form className=\"\" onSubmit={handleCreatePost}>\r\n          <div className=\"shareBottom\">\r\n            <div className=\"shareOptions\">\r\n              <button\r\n                type={\"button\"}\r\n                data-target={`#${id.current}`}\r\n                data-toggle=\"modal\"\r\n                className=\"shareOption\"\r\n                style={{\r\n                  border: 0,\r\n                  outline: 0,\r\n                  backgroundColor: \"transparent\",\r\n                }}\r\n              >\r\n                <PermMedia htmlColor=\"tomato\" className=\"shareIcon\" />\r\n                <span className=\"shareOptionText\">Photo or Video</span>\r\n              </button>\r\n              <div className=\"shareOption\">\r\n                <Label htmlColor=\"blue\" className=\"shareIcon\" />\r\n                <span className=\"shareOptionText\">Tag</span>\r\n              </div>\r\n              <div className=\"shareOption\">\r\n                <Room htmlColor=\"green\" className=\"shareIcon\" />\r\n                <span className=\"shareOptionText\">Location</span>\r\n              </div>\r\n              <div className=\"shareOption\">\r\n                <EmojiEmotions htmlColor=\"goldenrod\" className=\"shareIcon\" />\r\n                <span className=\"shareOptionText\">Feelings</span>\r\n              </div>\r\n            </div>\r\n            <button\r\n              type={\"submit\"}\r\n              className={`shareButton ${shareing ? \"isShareing\" : \"\"}`}\r\n            >\r\n              Share\r\n            </button>\r\n          </div>\r\n\r\n          <div className=\"shareImgContainer\">\r\n            {files.map((file) => {\r\n              return (\r\n                <div className=\"imgContainer\" key={file.uuid}>\r\n                  <DisplayImg file={file} setFiles={setFiles} />\r\n                </div>\r\n              );\r\n            })}\r\n          </div>\r\n        </form>\r\n      </div>\r\n      <ModalChooseImage\r\n        onSave={handleSaveImages}\r\n        height={\"150px\"}\r\n        multiple={true}\r\n        id={id.current}\r\n        text={\"Choose a photo for the post\"}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { UPDATE_INFO_GET_POST } from \"../../redux/actions\";\r\n\r\nconst GetMorePost = ({ postsLength, limit }) => {\r\n  const divRef = useRef(null);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const observer = new IntersectionObserver((entries) => {\r\n      entries.forEach((entry) => {\r\n        if (entry.isIntersecting) {\r\n          const payload = {\r\n            skip: postsLength,\r\n            limit: limit + 2,\r\n            isLoadingPost: true,\r\n          };\r\n          dispatch({\r\n            type: UPDATE_INFO_GET_POST,\r\n            payload,\r\n          });\r\n        }\r\n      });\r\n    });\r\n    observer.observe(divRef.current);\r\n\r\n    return () => {\r\n      if (!divRef.current) return;\r\n      observer.unobserve(divRef.current);\r\n    };\r\n  }, []);\r\n\r\n  return <div ref={divRef}>Get More Post</div>;\r\n};\r\n\r\nexport default GetMorePost;\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\nimport { LOADING_POST_END, UPDATE_INFO_GET_POST } from \"../../redux/actions\";\r\nimport MessagePretty from \"../MessagePretty/MessagePretty\";\r\nimport Post from \"../post/Post\";\r\nimport Share from \"../share/Share\";\r\nimport \"./feed.scss\";\r\nimport GetMorePost from \"./GetMorePost\";\r\n\r\nexport default function Feed({ userName }) {\r\n  const [posts, setPosts] = useState([]);\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n  const { limit, skip, isLoadingPost, isMaxPost } = useSelector(\r\n    (state) => state.post\r\n  );\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    const handleUpdateFeed = ({ post, type, message }) => {\r\n      toast.info(message, { autoClose: 2000 });\r\n\r\n      setPosts((prev) =>\r\n        type === \"removePost\"\r\n          ? prev.filter((postFeed) => postFeed?._id !== post?._id)\r\n          : type === \"updatePost\"\r\n          ? prev.map((postFeed) =>\r\n              postFeed?._id !== post?._id ? postFeed : post\r\n            )\r\n          : [post, ...prev]\r\n      );\r\n    };\r\n\r\n    if (socket) {\r\n      socket.on(\"updateFeed\", handleUpdateFeed);\r\n    }\r\n\r\n    return () => {\r\n      socket?.off(\"updateFeed\", handleUpdateFeed);\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const fetchPosts = async () => {\r\n      try {\r\n        const response = await getDataAPI(\r\n          `/post/get-feed-post?limit=${limit}&skip=${skip}`\r\n        );\r\n\r\n        const { posts: newPosts } = response;\r\n        if (!newPosts.length) {\r\n          dispatch({\r\n            type: UPDATE_INFO_GET_POST,\r\n            payload: { isMaxPost: true },\r\n          });\r\n          return;\r\n        }\r\n        if (!isMount) return;\r\n        setPosts([...posts, ...newPosts]);\r\n      } catch (err) {\r\n        console.log(\"get post feed\", err);\r\n      } finally {\r\n        dispatch({\r\n          type: LOADING_POST_END,\r\n        });\r\n      }\r\n    };\r\n    fetchPosts();\r\n\r\n    return () => (isMount = false);\r\n  }, [limit, skip]);\r\n\r\n  return (\r\n    <div className=\"feedWrapper\">\r\n      {(!userName || userName === userCurrent?.userName) && (\r\n        <Share setPosts={setPosts} />\r\n      )}\r\n      {posts.map((p) => (\r\n        <Post setPosts={setPosts} key={p._id} post={p} />\r\n      ))}\r\n\r\n      {isLoadingPost ? (\r\n        <div className=\"loadingPost\">\r\n          <CircularProgress color=\"primary\" />\r\n        </div>\r\n      ) : !isMaxPost ? (\r\n        <GetMorePost postsLength={posts.length} limit={limit} />\r\n      ) : (\r\n        <MessagePretty mess={\"Make friends to see more posts\"} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import { Link } from \"react-router-dom\";\r\nimport Avatar from \"../avatar/Avatar\";\r\nimport \"./friend.scss\";\r\n\r\nexport default function Friend({ friend }) {\r\n  return (\r\n    <Link to={\"/profile/\" + friend?._id} className=\"rightbarFriend\">\r\n      <div className=\"rightbarProfileImgContainer\">\r\n        <Avatar user={friend} link={false} />\r\n      </div>\r\n      <span className=\"rightbarUsername\">{friend?.userName}</span>\r\n    </Link>\r\n  );\r\n}\r\n","import { Add, Remove } from \"@material-ui/icons\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { getDataAPI, putDataAPI } from \"../../api/fetchData\";\r\nimport { PUBLIC_FOLDER } from \"../../contants\";\r\nimport { FOLLOW, UN_FOLLOW } from \"../../redux/actions\";\r\nimport Friend from \"../friend/Friend\";\r\nimport \"./rightbar.css\";\r\n\r\nexport default function Rightbar({ user }) {\r\n  const [friendList, setFriendList] = useState([]);\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { usersOnline } = useSelector((state) => state.network);\r\n  const dispatch = useDispatch();\r\n\r\n  const [followed, setFollowed] = useState(() =>\r\n    userCurrent?.followings.includes(user?._id)\r\n  );\r\n\r\n  const { socket } = useSelector((state) => state.network);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    if (!socket) return;\r\n\r\n    const updateFriendList = ({ userDisconnectId, time }) => {\r\n      if (!isMount) return;\r\n      setFriendList((prev) =>\r\n        prev.map((friend) =>\r\n          friend?._id === userDisconnectId\r\n            ? {\r\n                ...friend,\r\n                lastLogin: time,\r\n              }\r\n            : friend\r\n        )\r\n      );\r\n    };\r\n\r\n    socket.on(\"friendLogout\", updateFriendList);\r\n\r\n    return () => {\r\n      isMount = false;\r\n      socket?.off(\"friendLogout\", updateFriendList);\r\n    };\r\n  }, [socket]);\r\n\r\n  useEffect(() => {\r\n    if (friendList.length) {\r\n      setFriendList((prev) =>\r\n        prev.map((friend) =>\r\n          usersOnline?.includes(friend?._id)\r\n            ? {\r\n                ...friend,\r\n                online: true,\r\n              }\r\n            : {\r\n                ...friend,\r\n                online: false,\r\n              }\r\n        )\r\n      );\r\n    }\r\n  }, [usersOnline]);\r\n\r\n  useEffect(() => {\r\n    setFollowed(userCurrent?.followings.includes(user?._id));\r\n  }, [userCurrent?.followings, user?._id]);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const handleFetchFriends = async () => {\r\n      if ((user && user._id) || (userCurrent && userCurrent._id)) {\r\n        try {\r\n          const response = await getDataAPI(\r\n            `/user/get-friends/${user?._id || userCurrent?._id}`\r\n          );\r\n\r\n          const { message, friends } = response;\r\n          // toast.success(message, { autoClose: 2000 });\r\n          const friendsUpdateStatus = friends.map((friend) =>\r\n            usersOnline?.includes(friend._id)\r\n              ? {\r\n                  ...friend,\r\n                  online: true,\r\n                }\r\n              : {\r\n                  ...friend,\r\n                  online: false,\r\n                }\r\n          );\r\n          if (isMount) {\r\n            setFriendList(friendsUpdateStatus);\r\n          }\r\n        } catch (err) {\r\n          console.log(\"err\", err);\r\n        }\r\n      }\r\n    };\r\n    handleFetchFriends();\r\n\r\n    return () => (isMount = false);\r\n  }, [user, userCurrent]);\r\n\r\n  const handleClick = async () => {\r\n    if (user?._id) {\r\n      try {\r\n        let response;\r\n        if (followed) {\r\n          response = await putDataAPI(`/user/unfollow/${user._id}`, {\r\n            userId: userCurrent._id,\r\n          });\r\n\r\n          dispatch({\r\n            type: UN_FOLLOW,\r\n            payload: user._id,\r\n          });\r\n        } else {\r\n          response = await putDataAPI(`/user/follow/${user._id}`, {\r\n            userId: userCurrent._id,\r\n          });\r\n          dispatch({\r\n            type: FOLLOW,\r\n            payload: user._id,\r\n          });\r\n        }\r\n\r\n        const { message } = response;\r\n        toast.success(message, { autoClose: 2000 });\r\n        setFollowed(!followed);\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    }\r\n  };\r\n\r\n  const HomeRightbar = () => {\r\n    return (\r\n      <>\r\n        <div className=\"birthdayContainer\">\r\n          <img\r\n            className=\"birthdayImg\"\r\n            src={PUBLIC_FOLDER + \"gift.png\"}\r\n            alt=\"\"\r\n          />\r\n          <span className=\"birthdayText\"></span>\r\n        </div>\r\n        <img className=\"rightbarAd\" src={PUBLIC_FOLDER + \"social.png\"} alt=\"\" />\r\n        <h4 className=\"rightbarTitle\">Friends</h4>\r\n        <ul className=\"rightbarFriendList\">\r\n          {friendList.map((friend) => (\r\n            <Friend key={friend?._id} friend={friend} />\r\n          ))}\r\n        </ul>\r\n      </>\r\n    );\r\n  };\r\n\r\n  const ProfileRightbar = () => {\r\n    return (\r\n      <>\r\n        {user?.userName !== userCurrent?.userName && (\r\n          <button className=\"rightbarFollowButton\" onClick={handleClick}>\r\n            {followed ? \"Unfollow\" : \"Follow\"}\r\n            {followed ? <Remove /> : <Add />}\r\n          </button>\r\n        )}\r\n        <h4 className=\"rightbarTitle\">User information</h4>\r\n        <div className=\"rightbarInfo\">\r\n          <div className=\"rightbarInfoItem\">\r\n            <span className=\"rightbarInfoKey\">City:</span>\r\n            <span className=\"rightbarInfoValue\">{user?.city}</span>\r\n          </div>\r\n          <div className=\"rightbarInfoItem\">\r\n            <span className=\"rightbarInfoKey\">From:</span>\r\n            <span className=\"rightbarInfoValue\">{user?.from}</span>\r\n          </div>\r\n          <div className=\"rightbarInfoItem\">\r\n            <span className=\"rightbarInfoKey\">Relationship:</span>\r\n            <span className=\"rightbarInfoValue\">\r\n              {user?.relationships === 1\r\n                ? \"Single\"\r\n                : user?.relationships === 2\r\n                ? \"Marry\"\r\n                : \"In a complicated relationship\"}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <h4 className=\"rightbarTitle\">User friends</h4>\r\n        <div className=\"rightbarFollowings\">\r\n          {friendList.map((friend) => (\r\n            <div key={friend._id} className=\"rightbarFollowing\">\r\n              <Link to={`/profile/${friend?._id}`}>\r\n                <img\r\n                  src={\r\n                    (friend?.profilePicture?.length &&\r\n                      friend?.profilePicture[0]) ||\r\n                    PUBLIC_FOLDER + \"no-avatar.png\"\r\n                  }\r\n                  alt=\"\"\r\n                  className=\"rightbarFollowingImg\"\r\n                />\r\n              </Link>\r\n              <div\r\n                className={`active ${friend?.online ? \"online\" : \"offline\"} `}\r\n              >\r\n                8 hours\r\n              </div>\r\n              {/* <TimeOffline /> */}\r\n              <span className=\"rightbarFollowingName\">{friend?.userName}</span>\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </>\r\n    );\r\n  };\r\n  return (\r\n    <div className=\"rightbar\">\r\n      {user ? <ProfileRightbar /> : <HomeRightbar />}\r\n    </div>\r\n  );\r\n}\r\n","import jwt_decode from \"jwt-decode\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { getDataAPI } from \"../../../api/fetchData\";\r\nimport { ACCESS_TOKEN } from \"../../../contants\";\r\nimport { getLocalStorage } from \"../../../helpers\";\r\nimport { UPDATE_USER } from \"../../../redux/actions\";\r\n\r\nfunction ProtectLayOut({ children }) {\r\n  const [isLogin, setIslogin] = useState(false);\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const navigate = useNavigate();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    if (userCurrent) {\r\n      setIslogin(true);\r\n      return;\r\n    }\r\n    const accessToken = getLocalStorage(ACCESS_TOKEN);\r\n    if (!accessToken) return navigate(\"/login\");\r\n    const { exp, userId } = jwt_decode(accessToken);\r\n    const date = new Date();\r\n    if (exp < date.getTime() / 1000 || !userId) {\r\n      return navigate(\"/login\");\r\n    }\r\n\r\n    const handleGetUser = async () => {\r\n      try {\r\n        const response = await getDataAPI(`/user?userId=${userId}`);\r\n\r\n        const { message, user } = response;\r\n\r\n        dispatch({\r\n          type: UPDATE_USER,\r\n          payload: user,\r\n        });\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n        navigate(\"/login\");\r\n      }\r\n    };\r\n\r\n    handleGetUser();\r\n    setIslogin(true);\r\n  }, []);\r\n\r\n  return isLogin ? <>{children}</> : <></>;\r\n}\r\n\r\nexport default ProtectLayOut;\r\n","import \"../home/home.css\";\r\nimport \"./postPage.css\";\r\n\r\nimport React, { useState, useEffect } from \"react\";\r\nimport Post from \"../../components/post/Post\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport Sidebar from \"../../components/sidebar/Sidebar\";\r\nimport Rightbar from \"../../components/rightbar/Rightbar\";\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport { getDataAPI } from \"../../api/fetchData\";\r\n\r\nconst PostPage = () => {\r\n  const { postId } = useParams();\r\n  const [post, setPost] = useState(null);\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n\r\n    const fetchPost = async () => {\r\n      try {\r\n        const response = await getDataAPI(`/post/${postId}`);\r\n\r\n        const { post } = response;\r\n        if (isMount) {\r\n          setPost(post);\r\n        }\r\n      } catch (err) {\r\n        console.log(\"err\", err);\r\n      }\r\n    };\r\n    fetchPost();\r\n\r\n    return () => (isMount = false);\r\n  }, [postId]);\r\n\r\n  return (\r\n    <>\r\n      <Topbar />\r\n      <div className=\"homeContainer\">\r\n        <Sidebar />\r\n        <div className=\"postPageContainer\">\r\n          {post && <Post post={post} className=\"postPage\" />}\r\n        </div>\r\n        <Rightbar />\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PostPage;\r\n","import { v4 as uuidv4 } from \"uuid\";\r\n\r\n// Layouts\r\n\r\n// Pages\r\nimport Login from \"../pages/login/Login\";\r\nimport Profile from \"../pages/profile/Profile\";\r\nimport Register from \"../pages/register/Register\";\r\nimport NotFound from \"../pages/notFound/NotFound\";\r\nimport Home from \"../pages/home/Home\";\r\nimport { ProtectLayOut } from \"../components/Layout\";\r\nimport PostPage from \"../pages/post/PostPage\";\r\n\r\n// Public routes\r\nconst publicRoutes = [\r\n    { path: \"/*\", component: NotFound, layout: null, key: uuidv4() },\r\n    { path: \"/login\", component: Login, key: uuidv4(), layout: null },\r\n    {\r\n        path: \"/register\",\r\n        component: Register,\r\n        key: uuidv4(),\r\n        layout: null,\r\n    },\r\n];\r\n\r\nconst privateRoutes = [\r\n    { path: \"/\", component: Home, key: uuidv4(), layout: ProtectLayOut },\r\n    {\r\n        path: \"/messenger\",\r\n        component: Register,\r\n        key: uuidv4(),\r\n        layout: ProtectLayOut,\r\n    },\r\n    {\r\n        path: \"/profile/:id\",\r\n        component: Profile,\r\n        key: uuidv4(),\r\n        layout: ProtectLayOut,\r\n    },\r\n    {\r\n        path: \"/post/:postId\",\r\n        component: PostPage,\r\n        layout: ProtectLayOut,\r\n        key: uuidv4(),\r\n    },\r\n];\r\n\r\nexport { publicRoutes, privateRoutes };\r\n","import { CircularProgress } from \"@material-ui/core\";\r\nimport { useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport { login } from \"../../api/authApi\";\r\nimport \"./login.css\";\r\n\r\nexport default function Login() {\r\n  const userNameRef = useRef();\r\n  const passwordRef = useRef();\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { isLoading, isFirst } = useSelector((state) => state.auth);\r\n  useEffect(() => {\r\n    if (!isFirst || !isLoading) return;\r\n    toast.success(\r\n      \"Do lần đầu kết nối nên có thể server phản hồi chậm mong bạn kiên nhẫn chờ đợi trong giây lát\",\r\n      {\r\n        autoClose: 5000,\r\n      }\r\n    );\r\n  }, [isLoading]);\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    if (isLoading) return;\r\n    dispatch(\r\n      login(\r\n        {\r\n          userName: userNameRef.current.value,\r\n          password: passwordRef.current.value,\r\n        },\r\n        navigate\r\n      )\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"login\">\r\n      <div className=\"loginWrapper\">\r\n        <div className=\"loginLeft\">\r\n          <h3 className=\"loginLogo\">Coder Noob</h3>\r\n          <span className=\"loginDesc\">\r\n            Connect with friends and the world around you on CODE NOOB.\r\n          </span>\r\n        </div>\r\n        <form className=\"loginRight\" onSubmit={handleLogin}>\r\n          <div className=\"loginBox\">\r\n            <input\r\n              required\r\n              placeholder=\"User name\"\r\n              ref={userNameRef}\r\n              type=\"text\"\r\n              className=\"loginInput\"\r\n            />\r\n            <input\r\n              required\r\n              placeholder=\"Password\"\r\n              ref={passwordRef}\r\n              type=\"password\"\r\n              className=\"loginInput\"\r\n              minLength=\"6\"\r\n            />\r\n            <button className=\"loginButton\">\r\n              {isLoading ? (\r\n                <CircularProgress color={\"primary\"} size=\"30px\" />\r\n              ) : (\r\n                \"Log In\"\r\n              )}\r\n            </button>\r\n            <span className=\"loginForgot\">Forgot Password?</span>\r\n            <button\r\n              className=\"loginRegisterButton\"\r\n              onClick={() => {\r\n                if (isLoading) return;\r\n                navigate(\"/register\");\r\n              }}\r\n            >\r\n              {isLoading ? (\r\n                <CircularProgress color={\"primary\"} size=\"30px\" />\r\n              ) : (\r\n                \"Create a New Account\"\r\n              )}\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import Topbar from \"../../components/topbar/Topbar\";\r\nimport Sidebar from \"../../components/sidebar/Sidebar\";\r\nimport Feed from \"../../components/feed/Feed\";\r\nimport Rightbar from \"../../components/rightbar/Rightbar\";\r\nimport \"./home.css\";\r\n\r\nexport default function Home() {\r\n  return (\r\n    <div className=\"wrapper\">\r\n      <Topbar />\r\n      <div className=\"homeContainer\">\r\n        <Sidebar />\r\n        <Feed />\r\n        <Rightbar />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport { getDataAPI, patchDataAPI } from \"../../api/fetchData\";\r\nimport ModalChooseImage from \"../../components/modal/ModalChooseImage\";\r\nimport Topbar from \"../../components/topbar/Topbar\";\r\nimport UpdateImage from \"../../components/UpdateImage/UpdateImage.jsx\";\r\nimport { PUBLIC_FOLDER } from \"../../contants\";\r\nimport { imageUpload, removeImage } from \"../../helpers/image\";\r\nimport {\r\n  SET_IS_ME,\r\n  SET_USER_PROFILE,\r\n  UPDATE_AVATAR_USER,\r\n  UPDATE_BACKGROUND_USER,\r\n} from \"../../redux/actions\";\r\nimport \"./profile.scss\";\r\nimport ProflieLeft from \"./ProfileLeft\";\r\nimport ProfileRight from \"./ProfileRight\";\r\n\r\nexport default function Profile() {\r\n  const { id } = useParams();\r\n\r\n  const { userCurrent } = useSelector((state) => state.auth);\r\n  const { userProfile } = useSelector((state) => state.profile);\r\n\r\n  const idBgc = useRef(uuidv4());\r\n  const idAvatar = useRef(uuidv4());\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    let isMount = true;\r\n    if (userCurrent) {\r\n      if (userCurrent?._id !== id) {\r\n        const fetchUser = async () => {\r\n          try {\r\n            const response = await getDataAPI(`/user?userId=${id}`);\r\n\r\n            const { user } = response;\r\n\r\n            dispatch({\r\n              type: SET_USER_PROFILE,\r\n              payload: {\r\n                userProfile: user,\r\n                isFriend: user?.friends.includes(userCurrent?._id),\r\n              },\r\n            });\r\n          } catch (err) {\r\n            console.log(\"err\", err);\r\n          }\r\n        };\r\n        fetchUser();\r\n      } else {\r\n        if (isMount) {\r\n          dispatch({\r\n            type: SET_IS_ME,\r\n            payload: userCurrent,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return () => (isMount = false);\r\n  }, [userCurrent, id]);\r\n\r\n  const handleUpload = async (files, typeImage) => {\r\n    if (!files.length) return;\r\n\r\n    if (userProfile[typeImage]?.length) {\r\n      removeImage([userProfile[typeImage][1]]);\r\n    }\r\n\r\n    const images = await imageUpload(files);\r\n\r\n    const dataImage = [];\r\n    for (const key in images[0]) {\r\n      dataImage.push(images[0][key]);\r\n    }\r\n\r\n    const response = await patchDataAPI(`/user/update-user`, {\r\n      [typeImage]: dataImage,\r\n      userId: userProfile?._id,\r\n    });\r\n\r\n    dispatch({\r\n      type:\r\n        typeImage === \"coverPicture\"\r\n          ? UPDATE_BACKGROUND_USER\r\n          : UPDATE_AVATAR_USER,\r\n      payload: dataImage,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Topbar />\r\n      <div className=\"profile-container\">\r\n        <div\r\n          className=\"profile-bgc\"\r\n          style={{\r\n            backgroundImage: `url(${\r\n              (userProfile?.coverPicture?.length &&\r\n                userProfile?.coverPicture[0]) ||\r\n              PUBLIC_FOLDER + \"no-backgound.jpg\"\r\n            })`,\r\n          }}\r\n        >\r\n          <i className=\"fa fa-bars\" aria-hidden=\"true\"></i>\r\n\r\n          {userProfile?._id === userCurrent?._id && (\r\n            <UpdateImage\r\n              id={idBgc.current}\r\n              text={`${\r\n                userProfile?.coverPicture?.length &&\r\n                userProfile?.coverPicture[0]\r\n                  ? \"Change\"\r\n                  : \"Add\"\r\n              } cover photo`}\r\n              type=\"background\"\r\n            />\r\n          )}\r\n        </div>\r\n\r\n        <hr className=\"separator separator--line\" />\r\n\r\n        <main>\r\n          <div className=\"row\">\r\n            <ProflieLeft idAvatar={idAvatar} />\r\n            <ProfileRight />\r\n          </div>\r\n        </main>\r\n      </div>\r\n\r\n      <ModalChooseImage\r\n        onSave={handleUpload}\r\n        width={\"100%\"}\r\n        multiple={false}\r\n        height={\"300px\"}\r\n        id={idBgc.current}\r\n        text={\"Select the background image you want to update\"}\r\n        typeImage=\"coverPicture\"\r\n      />\r\n\r\n      <ModalChooseImage\r\n        onSave={handleUpload}\r\n        multiple={false}\r\n        width={\"100%\"}\r\n        height={\"250px\"}\r\n        id={idAvatar.current}\r\n        text={\"Select the avatar image you want to update\"}\r\n        typeImage=\"profilePicture\"\r\n      />\r\n    </>\r\n  );\r\n}\r\n","import Peer from \"peerjs\";\r\nimport { Fragment, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Route, Routes } from \"react-router-dom\";\r\nimport { io } from \"socket.io-client\";\r\nimport ModalCall from \"./components/modalCall/ModalCall\";\r\nimport { SOCKET_SERVER } from \"./contants\";\r\nimport {\r\n    ADD_FRIEND,\r\n    ADD_USER_ONLINE,\r\n    REMOVE_FRIEND,\r\n    REMOVE_USER_OFFLINE,\r\n    SET_CALL,\r\n    SET_ELEMENT_CLICK,\r\n    SET_PEER,\r\n    SET_SOCKET,\r\n    SET_USERS_ONLINE\r\n} from \"./redux/actions\";\r\nimport { privateRoutes, publicRoutes } from \"./routes\";\r\n\r\n\r\nfunction App() {\r\n    const { firstConnect, socket, firstGetData, usersOnline } = useSelector(\r\n        (state) => state.network\r\n    );\r\n\r\n    const { userCurrent } = useSelector((state) => state.auth);\r\n    const { isCall } = useSelector((state) => state.call);\r\n\r\n    const dispatch = useDispatch();\r\n\r\n    useEffect(() => {\r\n        const handleClick = (e) => {\r\n            dispatch({\r\n                type: SET_ELEMENT_CLICK,\r\n                payload: { elClick: e.target }\r\n            })\r\n        }\r\n        window.addEventListener(\"click\", handleClick);\r\n\r\n        return () => window.removeEventListener(\"click\", handleClick);\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (!socket) return;\r\n\r\n        const handleConnectCall = (data) => {\r\n            const { isVideo, userSendCall, roomCallId, isCreate, conversationId } =\r\n                data;\r\n\r\n            dispatch({\r\n                type: SET_CALL,\r\n                payload: {\r\n                    isCall: true,\r\n                    isVideo,\r\n                    userSendCall,\r\n                    roomCallId,\r\n                    isCreate,\r\n                    isSenderCall: false,\r\n                    conversationId,\r\n                },\r\n            });\r\n        };\r\n\r\n        socket.on(\"connectCall\", handleConnectCall);\r\n\r\n        return () => {\r\n            socket?.off(\"handleConnectCall\", handleConnectCall);\r\n        };\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        const peer = new Peer(undefined, {\r\n            host: \"/\",\r\n            port: 9000,\r\n        });\r\n\r\n        dispatch({ type: SET_PEER, payload: peer });\r\n    }, [dispatch]);\r\n\r\n    useEffect(() => {\r\n        const addUserOnline = (userLoginId) => {\r\n            if (usersOnline.includes(userLoginId)) {\r\n                return;\r\n            }\r\n            dispatch({\r\n                type: ADD_USER_ONLINE,\r\n                payload: userLoginId,\r\n            });\r\n        };\r\n\r\n        const removeUserOffline = ({ userDisconnectId }) => {\r\n            dispatch({\r\n                type: REMOVE_USER_OFFLINE,\r\n                payload: userDisconnectId,\r\n            });\r\n        };\r\n\r\n        if (socket) {\r\n            socket.on(\"friendOnline\", addUserOnline);\r\n            socket.on(\"friendLogout\", removeUserOffline);\r\n        }\r\n\r\n        return () => {\r\n            socket?.off(\"friendOnline\", addUserOnline);\r\n            socket?.off(\"friendLogout\", removeUserOffline);\r\n        };\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        const addListFriend = (userId) => {\r\n            dispatch({\r\n                type: ADD_FRIEND,\r\n                payload: userId,\r\n            });\r\n        };\r\n\r\n        const removeListFriend = (userId) => {\r\n            dispatch({\r\n                type: REMOVE_FRIEND,\r\n                payload: userId,\r\n            });\r\n        };\r\n\r\n        if (socket) {\r\n            socket.on(\"addListFriend\", addListFriend);\r\n            socket.on(\"removeListFriend\", removeListFriend);\r\n        }\r\n\r\n        return () => {\r\n            socket?.off(\"addListFriend\", addListFriend);\r\n            socket?.off(\"removeListFriend\", removeListFriend);\r\n        };\r\n    }, [socket]);\r\n\r\n    useEffect(() => {\r\n        if (!userCurrent) return;\r\n\r\n        const handleSetUserOnline = (allUser) => {\r\n            if (!firstGetData) return;\r\n            const usersFollowOnline = userCurrent?.followings.filter((followingiD) =>\r\n                allUser.find((userId) => userId === followingiD)\r\n            );\r\n\r\n            dispatch({\r\n                type: SET_USERS_ONLINE,\r\n                payload: usersFollowOnline,\r\n            });\r\n        };\r\n        const socket = io(SOCKET_SERVER);\r\n\r\n        socket.emit(\"userLogin\", {\r\n            userId: userCurrent?._id,\r\n            friends: userCurrent?.friends,\r\n            userName: userCurrent?.userName,\r\n        });\r\n        socket.on(\"getUsers\", handleSetUserOnline);\r\n\r\n        dispatch({\r\n            type: SET_SOCKET,\r\n            payload: socket\r\n        });\r\n        return () => {\r\n            socket?.off(\"getUsers\", handleSetUserOnline);\r\n        };\r\n    }, [userCurrent]);\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <Routes>\r\n                {publicRoutes.map((route) => {\r\n                    const Layout = route.layout ? route.layout : Fragment;\r\n\r\n                    const Page = route.component;\r\n\r\n                    return (\r\n                        <Route\r\n                            key={route.key}\r\n                            path={route.path}\r\n                            element={\r\n                                <Layout>\r\n                                    <Page />\r\n                                </Layout>\r\n                            }\r\n                        />\r\n                    );\r\n                })}\r\n\r\n                {privateRoutes.map((route) => {\r\n                    const Layout = route.layout ? route.layout : Fragment;\r\n\r\n                    const Page = route.component;\r\n\r\n                    return (\r\n                        <Route\r\n                            key={route.key}\r\n                            path={route.path}\r\n                            element={\r\n                                <Layout>\r\n                                    <Page />\r\n                                </Layout>\r\n                            }\r\n                        />\r\n                    );\r\n                })}\r\n            </Routes>\r\n\r\n            {isCall && <ModalCall />}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import {\r\n    ADD_FRIEND, FOLLOW, LOADING_END, LOADING_START, LOGIN_FAILED, LOGIN_SUCCESS, REMOVE_FRIEND, UN_FOLLOW, UPDATE_AVATAR_USER, UPDATE_BACKGROUND_USER, UPDATE_USER,\r\n    USER_LOGOUT\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n    userCurrent: null,\r\n    isLoading: false,\r\n    error: null,\r\n    isFirst: true\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return {\r\n                ...initialState,\r\n                isFirst: state.isFirst\r\n            };\r\n        }\r\n\r\n        case LOADING_START: {\r\n            return {\r\n                ...state,\r\n                isLoading: true,\r\n            };\r\n        }\r\n\r\n        case LOADING_END: {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                isFirst: false\r\n            };\r\n        }\r\n        case LOGIN_SUCCESS: {\r\n            return {\r\n                ...state,\r\n                userCurrent: payload,\r\n                isLoading: false,\r\n            };\r\n        }\r\n        case LOGIN_FAILED: {\r\n            return {\r\n                ...state,\r\n                isLoading: false,\r\n                userCurrent: null,\r\n                error: payload,\r\n            };\r\n        }\r\n\r\n        case UPDATE_USER: {\r\n            return {\r\n                ...state,\r\n                userCurrent: payload,\r\n            };\r\n        }\r\n\r\n        case UN_FOLLOW: {\r\n            return {\r\n                ...state,\r\n                userCurrent: {\r\n                    ...state.userCurrent,\r\n                    followings: state.userCurrent.followings.filter(\r\n                        (idUserFollow) => idUserFollow !== payload\r\n                    ),\r\n                },\r\n            };\r\n        }\r\n\r\n        case FOLLOW: {\r\n            return {\r\n                ...state,\r\n                userCurrent: {\r\n                    ...state.userCurrent,\r\n                    followings: [payload, ...state.userCurrent.followings],\r\n                },\r\n            };\r\n        }\r\n\r\n        case UPDATE_AVATAR_USER: {\r\n            return {\r\n                ...state,\r\n                userCurrent: {\r\n                    ...state.userCurrent,\r\n                    profilePicture: [...payload],\r\n                },\r\n            };\r\n        }\r\n\r\n        case UPDATE_BACKGROUND_USER: {\r\n            return {\r\n                ...state,\r\n                userCurrent: {\r\n                    ...state.userCurrent,\r\n                    coverPicture: [...payload],\r\n                },\r\n            };\r\n        }\r\n\r\n        case ADD_FRIEND: {\r\n            return {\r\n                ...state,\r\n                userCurrent: {\r\n                    ...state.userCurrent,\r\n                    friends: [payload, ...state.userCurrent.friends],\r\n                    followings: [payload, ...state.userCurrent.followings],\r\n                },\r\n            };\r\n        }\r\n\r\n        case REMOVE_FRIEND: {\r\n            return {\r\n                ...state,\r\n                userCurrent: {\r\n                    ...state.userCurrent,\r\n                    friends: state.userCurrent.friends.filter(\r\n                        (friendId) => friendId !== payload\r\n                    ),\r\n                },\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n","import {\r\n    END_CALL, REFUSE_INVITE,\r\n    SET_ACCEPT_INVITE, SET_CALL, SET_FRIEND_INVITES, SET_IS_ANSWER,\r\n    SET_IS_COMPLETE, SET_USER_STREAM, USER_LOGOUT\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n    isVideo: null,\r\n    isCall: null,\r\n    userSendCall: null,\r\n    userReciverCall: null,\r\n    isSenderCall: false,\r\n    isAnswer: false,\r\n    friendInvites: [],\r\n    fristLoadFriends: true,\r\n    isCreate: null,\r\n    roomCallId: null,\r\n    userStream: null,\r\n    conversationId: null,\r\n    isComplete: false,\r\n};\r\n\r\nconst networkReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case SET_IS_COMPLETE: {\r\n            return {\r\n                ...state,\r\n                isComplete: true,\r\n            };\r\n        }\r\n\r\n        case SET_USER_STREAM: {\r\n            return {\r\n                ...state,\r\n                userStream: payload,\r\n            };\r\n        }\r\n\r\n        case REFUSE_INVITE: {\r\n            return {\r\n                ...state,\r\n                isCreate: false,\r\n                isCall: false,\r\n                isVideo: null,\r\n                userSendCall: null,\r\n            };\r\n        }\r\n\r\n        case SET_ACCEPT_INVITE: {\r\n            return {\r\n                ...state,\r\n                isAnswer: true,\r\n                isCall: true,\r\n                isCreate: false,\r\n            };\r\n        }\r\n\r\n        case SET_FRIEND_INVITES: {\r\n            return {\r\n                ...state,\r\n                friendInvites: payload,\r\n                fristLoadFriends: false,\r\n            };\r\n        }\r\n\r\n        case SET_CALL: {\r\n            return {\r\n                ...state,\r\n                ...payload,\r\n            };\r\n        }\r\n\r\n        case END_CALL: {\r\n            const { userStream } = state;\r\n            if (userStream) {\r\n                const tracks = userStream.getTracks();\r\n                tracks.forEach((track) => track.stop());\r\n            }\r\n\r\n            return {\r\n                ...initialState,\r\n            };\r\n        }\r\n\r\n        case SET_IS_ANSWER: {\r\n            return {\r\n                ...state,\r\n                isAnswer: payload,\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default networkReducer;\r\n","import { addElment } from \"../../helpers\";\r\nimport {\r\n    ADD_CONVERSATION, DECREASE_NUMBER_UNREAD, INCREASE_NUMBER_UNREAD, SET_CHAT,\r\n    SET_CONVERSATION_CHAT, SET_IS_SHOW, SET_LIST_CONVERSATION, SET_NEW_CONVERSATION_CHAT, SET_NUMBER_UNREAD, SET_STATUS_CONVERSATION, UPDATE_CONVERSATION, UPDATE_CONVERSATION_DISPLAYS,\r\n    UPDATE_FRIEND_CHAT, UPDATE_LAST_MESSAGE, UPDATE_READ_CONVERSATION, UPDATE_STATUS_CONVERSATION, USER_LOGOUT\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n    lastMessageConversation: null,\r\n    isChat: false,\r\n    number: 0,\r\n    conversationChat: null,\r\n    conversationUnReads: [],\r\n    listConversation: [],\r\n    isShowConversationPending: false,\r\n};\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case SET_IS_SHOW: {\r\n            return {\r\n                ...state,\r\n                isShowConversationPending: payload,\r\n            };\r\n        }\r\n\r\n        case UPDATE_CONVERSATION: {\r\n            const { conversationId, ...newInfo } = payload;\r\n\r\n            const { listConversation } = state;\r\n\r\n            return {\r\n                ...state,\r\n                listConversation: listConversation.map((conversation) =>\r\n                    conversation._id === conversationId\r\n                        ? {\r\n                            ...conversation,\r\n                            ...newInfo,\r\n                        }\r\n                        : conversation\r\n                ),\r\n            };\r\n        }\r\n\r\n        case UPDATE_LAST_MESSAGE: {\r\n            return {\r\n                ...state,\r\n                lastMessageConversation: payload,\r\n            };\r\n        }\r\n\r\n        case UPDATE_STATUS_CONVERSATION: {\r\n            const { conversationId, isRead } = payload;\r\n            return {\r\n                ...state,\r\n                statusConversations: state.statusConversations.map((conversation) =>\r\n                    conversation.conversationId === conversationId\r\n                        ? {\r\n                            ...conversation,\r\n                            isRead,\r\n                        }\r\n                        : conversation\r\n                ),\r\n            };\r\n        }\r\n\r\n        case SET_STATUS_CONVERSATION: {\r\n            return {\r\n                ...state,\r\n                statusConversations: payload,\r\n            };\r\n        }\r\n\r\n        case SET_CHAT: {\r\n            return {\r\n                ...state,\r\n                ...payload,\r\n                number: 0,\r\n            };\r\n        }\r\n\r\n        case SET_LIST_CONVERSATION: {\r\n            const { userId, conversations } = payload;\r\n\r\n            const conversationUnReads = [];\r\n            conversations.forEach((conversation) => {\r\n                const { reads, status, _id } = conversation;\r\n\r\n                if (status.includes(userId)) {\r\n                    if (!reads.includes(userId)) conversationUnReads.push(_id);\r\n                }\r\n            });\r\n\r\n            return {\r\n                ...state,\r\n                listConversation: conversations,\r\n                conversationUnReads,\r\n            };\r\n        }\r\n\r\n        case ADD_CONVERSATION: {\r\n            const { conversation } = payload;\r\n\r\n            const { listConversation } = state;\r\n\r\n            return {\r\n                ...state,\r\n                listConversation: addElment(\r\n                    listConversation,\r\n                    conversation,\r\n                    (array, value) => array.find((el) => el._id !== value._id)\r\n                ),\r\n            };\r\n        }\r\n\r\n        case UPDATE_READ_CONVERSATION: {\r\n            const { conversationId, userId } = payload;\r\n\r\n            return {\r\n                ...state,\r\n                conversationAccepts: state.conversationAccepts.map((conversation) =>\r\n                    conversation._id === conversationId\r\n                        ? {\r\n                            ...conversation,\r\n                            reads: [...conversation.reads, userId],\r\n                        }\r\n                        : conversation\r\n                ),\r\n                conversationDisplays: state.conversationDisplays.map((conversation) =>\r\n                    conversation._id === conversationId\r\n                        ? {\r\n                            ...conversation,\r\n                            reads: [...conversation.reads, userId],\r\n                        }\r\n                        : conversation\r\n                ),\r\n            };\r\n        }\r\n\r\n        case UPDATE_CONVERSATION_DISPLAYS: {\r\n            const isExit = state.conversationAccepts.find(\r\n                (conversation) => conversation?._id === payload?._id\r\n            );\r\n\r\n            if (isExit)\r\n                return {\r\n                    ...state,\r\n                };\r\n\r\n            const conversationAccepts = [payload, ...state.conversationAccepts];\r\n\r\n            const conversationPendings = state.conversationPendings.filter(\r\n                (conversation) => conversation?._id !== payload?._id\r\n            );\r\n\r\n            return {\r\n                ...state,\r\n                conversationAccepts,\r\n                conversationDisplays: conversationAccepts,\r\n                conversationPendings,\r\n            };\r\n        }\r\n\r\n        case SET_CONVERSATION_CHAT: {\r\n            const { conversationChat, isChangeType } = payload;\r\n\r\n            const { isShowConversationPending, listConversation } = state;\r\n            return {\r\n                ...state,\r\n                listConversation: listConversation.map((conversation) =>\r\n                    conversation._id === conversationChat._id\r\n                        ? conversationChat\r\n                        : conversation\r\n                ),\r\n                conversationChat,\r\n                isShowConversationPending: isChangeType\r\n                    ? !isShowConversationPending\r\n                    : isShowConversationPending,\r\n            };\r\n        }\r\n\r\n        case SET_NEW_CONVERSATION_CHAT: {\r\n            const { conversationChat } = payload;\r\n            return {\r\n                ...state,\r\n                conversationChat,\r\n            };\r\n        }\r\n\r\n        case UPDATE_FRIEND_CHAT: {\r\n            return {\r\n                ...state,\r\n                friendChat: {\r\n                    ...state.friendChat,\r\n                    lastLogin: payload,\r\n                },\r\n            };\r\n        }\r\n\r\n        case SET_NUMBER_UNREAD: {\r\n            return {\r\n                ...state,\r\n                number: payload,\r\n            };\r\n        }\r\n\r\n        case INCREASE_NUMBER_UNREAD: {\r\n            return {\r\n                ...state,\r\n                conversationUnReads: addElment(state.conversationUnReads, payload),\r\n            };\r\n        }\r\n\r\n        case DECREASE_NUMBER_UNREAD: {\r\n            return {\r\n                ...state,\r\n                number: state.number - 1,\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default chatReducer;\r\n","import {\r\n    UPDATE_ID_COMMENT, USER_LOGOUT\r\n} from \"../actions\";\r\n\r\n\r\nconst initialState = {\r\n    idComment: null,\r\n    idPostOpen: null\r\n};\r\n\r\nconst commentReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case UPDATE_ID_COMMENT: {\r\n            return { ...state, ...payload };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default commentReducer;\r\n","import { addElment } from \"../../helpers\";\r\nimport {\r\n  SET_CREATE_ROOM,\r\n  ADD_FRIEND_TO_ROOM,\r\n  REMOVE_FRIEND_TO_ROOM,\r\n  SET_LIST_FRIEND,\r\n  RESET_CREATE_ROOM,\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n  isCreate: false,\r\n  friends: [],\r\n  friendAdds: [],\r\n};\r\n\r\nconst createRoomChatReducer = (state = initialState, action) => {\r\n  const { type, payload } = action;\r\n\r\n  switch (type) {\r\n    case RESET_CREATE_ROOM: {\r\n      return {\r\n        ...state,\r\n        ...initialState,\r\n      };\r\n    }\r\n\r\n    case SET_LIST_FRIEND: {\r\n      return {\r\n        ...state,\r\n        friends: payload,\r\n      };\r\n    }\r\n\r\n    case SET_CREATE_ROOM: {\r\n      return {\r\n        ...state,\r\n        isCreate: payload,\r\n      };\r\n    }\r\n\r\n    case ADD_FRIEND_TO_ROOM: {\r\n      return {\r\n        ...state,\r\n        friendAdds: addElment(state.friendAdds, payload, (array, value) =>\r\n          array.find((el) => el?._id === value?._id)\r\n        ),\r\n        friends: state.friends.filter((friend) => friend?._id !== payload?._id),\r\n      };\r\n    }\r\n\r\n    case REMOVE_FRIEND_TO_ROOM: {\r\n      return {\r\n        ...state,\r\n        friends: addElment(state.friends, payload, (array, value) =>\r\n          array.find((el) => el?._id === value?._id)\r\n        ),\r\n        friendAdds: state.friendAdds.filter(\r\n          (friend) => friend?._id !== payload?._id\r\n        ),\r\n      };\r\n    }\r\n\r\n    default: {\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nexport default createRoomChatReducer;\r\n","import {\r\n    ADD_LIST_FRIEND_REQUEST, INCREASE_NUMBER_FRIEND_REQUEST, REMOVE_FRIEND_REQUEST, SET_LIST_FRIEND_REQUEST, SET_NUMBER_FRIEND_REQUEST, SET_TYPE, USER_LOGOUT\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n    type: \"received\",\r\n    listFriendRequest: null,\r\n    number: 0,\r\n};\r\n\r\nconst friendRequestReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case SET_TYPE: {\r\n            const types = [\"received\", \"sent\"];\r\n            if (!types.includes(payload)) return { ...state };\r\n\r\n            return {\r\n                ...state,\r\n                type: payload,\r\n            };\r\n        }\r\n        case SET_LIST_FRIEND_REQUEST: {\r\n            return {\r\n                ...state,\r\n                listFriendRequest: payload,\r\n                number: payload.length,\r\n            };\r\n        }\r\n        case ADD_LIST_FRIEND_REQUEST: {\r\n            const isExit = state.listFriendRequest.find(\r\n                (friendRequest) => friendRequest?._id === payload?._id\r\n            );\r\n\r\n            if (isExit)\r\n                return {\r\n                    ...state,\r\n                };\r\n\r\n            return {\r\n                ...state,\r\n                listFriendRequest: [payload, ...state.listFriendRequest],\r\n                number: state.number + 1,\r\n            };\r\n        }\r\n\r\n        case REMOVE_FRIEND_REQUEST: {\r\n            return {\r\n                ...state,\r\n                listFriendRequest: state.listFriendRequest.filter(\r\n                    (friendRequest) => friendRequest?._id !== payload\r\n                ),\r\n                number: state.number - 1,\r\n            };\r\n        }\r\n\r\n        case INCREASE_NUMBER_FRIEND_REQUEST: {\r\n            return {\r\n                ...state,\r\n                number: state.number + 1,\r\n            };\r\n        }\r\n\r\n        case SET_NUMBER_FRIEND_REQUEST: {\r\n            return {\r\n                ...state,\r\n                number: payload,\r\n            };\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default friendRequestReducer;\r\n","import { SET_ELEMENT_CLICK } from \"../actions\";\r\n\r\nconst initialState = {\r\n    elClick: null\r\n};\r\n\r\nconst peerReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case SET_ELEMENT_CLICK: {\r\n            return { ...state, ...payload };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default peerReducer;\r\n","import { SET_FILES, ADD_FILE, REMOVE_FILE, USER_LOGOUT } from \"../actions\";\r\n\r\nconst initialState = {\r\n    files: [],\r\n};\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case SET_FILES: {\r\n            return {\r\n                ...state,\r\n                files: payload,\r\n            };\r\n        }\r\n        case ADD_FILE: {\r\n            const isExit = state.files.find((file) => file?.uuid === payload?.uuid);\r\n\r\n            if (isExit)\r\n                return {\r\n                    ...state,\r\n                };\r\n\r\n            return {\r\n                ...state,\r\n                files: [payload, ...state.files],\r\n            };\r\n        }\r\n        case REMOVE_FILE: {\r\n            return {\r\n                ...state,\r\n                files: state.files.filter((file) => file?.uuid !== payload),\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n","import { addElment } from \"../../helpers\";\r\nimport {\r\n    ADD_USER_ONLINE,\r\n    REMOVE_USER_OFFLINE,\r\n    RESET_NETWORK, SET_SOCKET,\r\n    SET_USERS_ONLINE, USER_LOGOUT\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n    firstConnect: true,\r\n    socket: null,\r\n    usersOnline: [],\r\n    firstGetData: true,\r\n};\r\n\r\nconst networkReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case RESET_NETWORK: {\r\n            return {\r\n                ...initialState,\r\n            };\r\n        }\r\n\r\n        case SET_SOCKET: {\r\n            return {\r\n                ...state,\r\n                socket: payload,\r\n                firstConnect: false,\r\n            };\r\n        }\r\n\r\n        case SET_USERS_ONLINE: {\r\n            return {\r\n                ...state,\r\n                usersOnline: payload ? payload : [],\r\n                firstGetData: false,\r\n            };\r\n        }\r\n\r\n        case ADD_USER_ONLINE: {\r\n            return {\r\n                ...state,\r\n                usersOnline: addElment(state.usersOnline, payload),\r\n            };\r\n        }\r\n\r\n        case REMOVE_USER_OFFLINE: {\r\n            return {\r\n                ...state,\r\n                usersOnline: state.usersOnline.filter((user) => user !== payload),\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default networkReducer;\r\n","import {\r\n    ADD_NOTIFICATION, ADD_NOTIFICATION_DISPLAY, DECREASE_NUMBER_NOTIFICATION_UNREAD, INCREASE_NUMBER_NOTIFICATION_UNREAD, REMOVE_ALL_NOTIFICATION, REMOVE_NOTIFICATION, SET_LIST_NOTIFICATION, SET_NOTIFICATIONs_DISPLAY, SET_NUMBER_NOTIFICATION_UNREAD, SET_SHOW_NOTIFICATION,\r\n    SET_SHOW_NOTIFICATION_MENU, SET_TYPE_NOTIFICATION, UPDATE_LIST_CONVERSATION, USER_LOGOUT\r\n} from \"../actions\";\r\n\r\nimport { addElment } from \"../../helpers\";\r\n\r\nconst initialState = {\r\n    isShow: false,\r\n    isShowMenu: false,\r\n    number: 0,\r\n    listNotifycation: null,\r\n    notificationDisplays: null,\r\n    type: \"all\",\r\n};\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case SET_SHOW_NOTIFICATION: {\r\n            return {\r\n                ...state,\r\n                isShow: payload,\r\n                number: 0,\r\n            };\r\n        }\r\n\r\n        case SET_LIST_NOTIFICATION: {\r\n            return {\r\n                ...state,\r\n                listNotifycation: payload,\r\n                notificationDisplays: payload,\r\n            };\r\n        }\r\n\r\n        case SET_NUMBER_NOTIFICATION_UNREAD: {\r\n            return {\r\n                ...state,\r\n                number: payload,\r\n            };\r\n        }\r\n\r\n        case INCREASE_NUMBER_NOTIFICATION_UNREAD: {\r\n            return {\r\n                ...state,\r\n                number: state.number + 1,\r\n            };\r\n        }\r\n\r\n        case DECREASE_NUMBER_NOTIFICATION_UNREAD: {\r\n            return {\r\n                ...state,\r\n                number: state.number - 1,\r\n            };\r\n        }\r\n\r\n        case ADD_NOTIFICATION: {\r\n            return {\r\n                ...state,\r\n                listNotifycation: addElment(\r\n                    state.listNotifycation,\r\n                    payload,\r\n                    (array, payload) => array.find((el) => el?._id === payload?._id)\r\n                ),\r\n            };\r\n        }\r\n\r\n        case ADD_NOTIFICATION_DISPLAY: {\r\n            return {\r\n                ...state,\r\n                notificationDisplays: addElment(\r\n                    state.notificationDisplays,\r\n                    payload,\r\n                    (array, payload) => array.find((el) => el?._id === payload?._id)\r\n                ),\r\n            };\r\n        }\r\n\r\n        case REMOVE_NOTIFICATION: {\r\n            return {\r\n                ...state,\r\n                listNotifycation: state.listNotifycation.filter(\r\n                    (notification) => notification?._id !== payload\r\n                ),\r\n                notificationDisplays: state.notificationDisplays.filter(\r\n                    (notification) => notification?._id !== payload\r\n                ),\r\n            };\r\n        }\r\n\r\n        case SET_NOTIFICATIONs_DISPLAY: {\r\n            return {\r\n                ...state,\r\n                notificationDisplays: payload,\r\n            };\r\n        }\r\n\r\n        case SET_TYPE_NOTIFICATION: {\r\n            const types = [\"all\", \"read\", \"unread\"];\r\n\r\n            if (!types.includes(payload)) return { ...state };\r\n\r\n            return {\r\n                ...state,\r\n                type: payload,\r\n            };\r\n        }\r\n\r\n        case REMOVE_ALL_NOTIFICATION: {\r\n            return {\r\n                ...state,\r\n                listNotifycation: [],\r\n                notificationDisplays: [],\r\n            };\r\n        }\r\n\r\n        case UPDATE_LIST_CONVERSATION: {\r\n            return {\r\n                ...state,\r\n                listNotifycation: state.listNotifycation.map((el) =>\r\n                    el?._id === payload?._id ? payload : el\r\n                ),\r\n                notificationDisplays: state.notificationDisplays.map((el) =>\r\n                    el?._id === payload?._id ? payload : el\r\n                ),\r\n            };\r\n        }\r\n\r\n        case SET_SHOW_NOTIFICATION_MENU: {\r\n            return {\r\n                ...state,\r\n                isShowMenu: !state.isShowMenu,\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default chatReducer;\r\n","import { SET_PEER, USER_LOGOUT } from \"../actions\";\r\n\r\nconst initialState = null;\r\n\r\nconst peerReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case SET_PEER: {\r\n            return payload;\r\n        }\r\n\r\n        case USER_LOGOUT: {\r\n            return null;\r\n        }\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default peerReducer;\r\n","import {\r\n    LOADING_POST_END, UPDATE_INFO_GET_POST, USER_LOGOUT\r\n} from \"../actions\";\r\n\r\nconst initialState = {\r\n    isLoadingPost: true,\r\n    limit: 5,\r\n    skip: 0,\r\n    isMaxPost: false\r\n};\r\n\r\nconst postReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case UPDATE_INFO_GET_POST: {\r\n            return { ...state, ...payload };\r\n        }\r\n\r\n\r\n        case LOADING_POST_END: {\r\n            return { ...state, isLoadingPost: false };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default postReducer;\r\n","import { SET_IS_ME, SET_STATUS_FRIEND, SET_USER_PROFILE, USER_LOGOUT } from \"../actions\";\r\n\r\n\r\nconst initialState = {\r\n    isFriend: null,\r\n    userProfile: null,\r\n    isMe: false,\r\n};\r\n\r\nconst chatReducer = (state = initialState, action) => {\r\n    const { type, payload } = action;\r\n\r\n    switch (type) {\r\n        case USER_LOGOUT: {\r\n            return { ...initialState };\r\n        }\r\n        case SET_STATUS_FRIEND: {\r\n            return {\r\n                ...state,\r\n                isFriend: payload,\r\n            };\r\n        }\r\n\r\n        case SET_USER_PROFILE: {\r\n            const { userProfile, isFriend } = payload;\r\n            return {\r\n                ...state,\r\n                userProfile,\r\n                isFriend,\r\n            };\r\n        }\r\n\r\n        case SET_IS_ME: {\r\n            return {\r\n                ...state,\r\n                isMe: true,\r\n                userProfile: payload,\r\n            };\r\n        }\r\n\r\n        default: {\r\n            return state;\r\n        }\r\n    }\r\n};\r\n\r\nexport default chatReducer;\r\n","import authReducer from \"./authReducer\";\r\nimport callReducer from \"./callReducer\";\r\nimport chatReducer from \"./chatReducer\";\r\nimport commentReducer from \"./commentReducer\";\r\nimport createRoomChatReducer from \"./createRoomChatReducer\";\r\nimport friendRequestReducer from \"./friendRequestReducer\";\r\nimport globalReducer from \"./globalReducer\";\r\nimport messageReducer from \"./messageReducer\";\r\nimport networkReducer from \"./networkReducer\";\r\nimport notifycationReducer from \"./notifycationReducer\";\r\nimport peerReducer from \"./peerReducer\";\r\nimport postReducer from \"./postReducer\";\r\nimport profileReducer from \"./profileReducer\";\r\n\r\nconst rootReducer = (state = {}, action) => ({\r\n    auth: authReducer(state.auth, action),\r\n    global: globalReducer(state.global, action),\r\n    post: postReducer(state.post, action),\r\n    comment: commentReducer(state.comment, action),\r\n    chat: chatReducer(state.chat, action),\r\n    friendRequest: friendRequestReducer(state.friendRequest, action),\r\n    message: messageReducer(state.message, action),\r\n    network: networkReducer(state.network, action),\r\n    notification: notifycationReducer(state.notification, action),\r\n    profile: profileReducer(state.profile, action),\r\n    peer: peerReducer(state.peer, action),\r\n    call: callReducer(state.call, action),\r\n    createRoomChat: createRoomChatReducer(state.createRoomChat, action),\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport rootReducer from \"./reducers/index\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\n\r\n\r\nconst composeEnhancers = composeWithDevTools(applyMiddleware(thunk));\r\n\r\nexport default createStore(rootReducer, composeEnhancers);\r\n","import \"./GlobalStyles.scss\";\r\n\r\nconst GlobalStyles = ({ children }) => {\r\n  return children;\r\n};\r\n\r\nexport default GlobalStyles;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { Provider } from \"react-redux\";\r\nimport { BrowserRouter } from \"react-router-dom\";\r\nimport { ToastContainer } from \"react-toastify\";\r\nimport \"react-toastify/dist/ReactToastify.css\";\r\nimport App from \"./App\";\r\nimport store from \"./redux/store\";\r\n\r\nimport GlobalStyles from \"./components/GlobalStyles\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(\r\n    <Provider store={store}>\r\n        <React.StrictMode>\r\n            <BrowserRouter>\r\n                <GlobalStyles>\r\n                    <App />\r\n                </GlobalStyles>\r\n            </BrowserRouter>\r\n            <ToastContainer />\r\n        </React.StrictMode>\r\n    </Provider>,\r\n    document.getElementById(\"root\")\r\n);\r\n"],"sourceRoot":""}